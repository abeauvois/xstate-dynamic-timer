var Qy=Object.defineProperty,Yy=Object.defineProperties;var Ky=Object.getOwnPropertyDescriptors;var pd=Object.getOwnPropertySymbols;var qy=Object.prototype.hasOwnProperty,Xy=Object.prototype.propertyIsEnumerable;var vd=(t,e,n)=>e in t?Qy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rt=(t,e)=>{for(var n in e||(e={}))qy.call(e,n)&&vd(t,n,e[n]);if(pd)for(var n of pd(e))Xy.call(e,n)&&vd(t,n,e[n]);return t},Ot=(t,e)=>Yy(t,Ky(e));const Jy=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};Jy();var Ie={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fs=Symbol.for("react.element"),Zy=Symbol.for("react.portal"),e_=Symbol.for("react.fragment"),t_=Symbol.for("react.strict_mode"),n_=Symbol.for("react.profiler"),r_=Symbol.for("react.provider"),i_=Symbol.for("react.context"),s_=Symbol.for("react.forward_ref"),o_=Symbol.for("react.suspense"),l_=Symbol.for("react.memo"),a_=Symbol.for("react.lazy"),md=Symbol.iterator;function u_(t){return t===null||typeof t!="object"?null:(t=md&&t[md]||t["@@iterator"],typeof t=="function"?t:null)}var Ip={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Np=Object.assign,Pp={};function fi(t,e,n){this.props=t,this.context=e,this.refs=Pp,this.updater=n||Ip}fi.prototype.isReactComponent={};fi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Rp(){}Rp.prototype=fi.prototype;function _c(t,e,n){this.props=t,this.context=e,this.refs=Pp,this.updater=n||Ip}var wc=_c.prototype=new Rp;wc.constructor=_c;Np(wc,fi.prototype);wc.isPureReactComponent=!0;var gd=Array.isArray,Op=Object.prototype.hasOwnProperty,Sc={current:null},Ap={key:!0,ref:!0,__self:!0,__source:!0};function Dp(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Op.call(e,r)&&!Ap.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Fs,type:t,key:s,ref:o,props:i,_owner:Sc.current}}function c_(t,e){return{$$typeof:Fs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ec(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fs}function f_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var yd=/\/+/g;function fa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?f_(""+t.key):e.toString(36)}function So(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Fs:case Zy:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+fa(o,0):r,gd(i)?(n="",t!=null&&(n=t.replace(yd,"$&/")+"/"),So(i,e,n,"",function(u){return u})):i!=null&&(Ec(i)&&(i=c_(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(yd,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",gd(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+fa(s,l);o+=So(s,e,n,a,i)}else if(a=u_(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+fa(s,l++),o+=So(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ks(t,e,n){if(t==null)return t;var r=[],i=0;return So(t,r,"","",function(s){return e.call(n,s,i++)}),r}function d_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var st={current:null},Eo={transition:null},h_={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:Eo,ReactCurrentOwner:Sc};G.Children={map:Ks,forEach:function(t,e,n){Ks(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ks(t,function(){e++}),e},toArray:function(t){return Ks(t,function(e){return e})||[]},only:function(t){if(!Ec(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};G.Component=fi;G.Fragment=e_;G.Profiler=n_;G.PureComponent=_c;G.StrictMode=t_;G.Suspense=o_;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h_;G.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Np({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Sc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Op.call(e,a)&&!Ap.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Fs,type:t.type,key:i,ref:s,props:r,_owner:o}};G.createContext=function(t){return t={$$typeof:i_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:r_,_context:t},t.Consumer=t};G.createElement=Dp;G.createFactory=function(t){var e=Dp.bind(null,t);return e.type=t,e};G.createRef=function(){return{current:null}};G.forwardRef=function(t){return{$$typeof:s_,render:t}};G.isValidElement=Ec;G.lazy=function(t){return{$$typeof:a_,_payload:{_status:-1,_result:t},_init:d_}};G.memo=function(t,e){return{$$typeof:l_,type:t,compare:e===void 0?null:e}};G.startTransition=function(t){var e=Eo.transition;Eo.transition={};try{t()}finally{Eo.transition=e}};G.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};G.useCallback=function(t,e){return st.current.useCallback(t,e)};G.useContext=function(t){return st.current.useContext(t)};G.useDebugValue=function(){};G.useDeferredValue=function(t){return st.current.useDeferredValue(t)};G.useEffect=function(t,e){return st.current.useEffect(t,e)};G.useId=function(){return st.current.useId()};G.useImperativeHandle=function(t,e,n){return st.current.useImperativeHandle(t,e,n)};G.useInsertionEffect=function(t,e){return st.current.useInsertionEffect(t,e)};G.useLayoutEffect=function(t,e){return st.current.useLayoutEffect(t,e)};G.useMemo=function(t,e){return st.current.useMemo(t,e)};G.useReducer=function(t,e,n){return st.current.useReducer(t,e,n)};G.useRef=function(t){return st.current.useRef(t)};G.useState=function(t){return st.current.useState(t)};G.useSyncExternalStore=function(t,e,n){return st.current.useSyncExternalStore(t,e,n)};G.useTransition=function(){return st.current.useTransition()};G.version="18.1.0";Ie.exports=G;var p_=Ie.exports,Mp={exports:{}},yt={},Lp={exports:{}},Fp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,F){var $=N.length;N.push(F);e:for(;0<$;){var ve=$-1>>>1,Ne=N[ve];if(0<i(Ne,F))N[ve]=F,N[$]=Ne,$=ve;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var F=N[0],$=N.pop();if($!==F){N[0]=$;e:for(var ve=0,Ne=N.length,mr=Ne>>>1;ve<mr;){var Ht=2*(ve+1)-1,Si=N[Ht],tn=Ht+1,gr=N[tn];if(0>i(Si,$))tn<Ne&&0>i(gr,Si)?(N[ve]=gr,N[tn]=$,ve=tn):(N[ve]=Si,N[Ht]=$,ve=Ht);else if(tn<Ne&&0>i(gr,$))N[ve]=gr,N[tn]=$,ve=tn;else break e}}return F}function i(N,F){var $=N.sortIndex-F.sortIndex;return $!==0?$:N.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],f=1,d=null,c=3,p=!1,m=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(N){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=N)r(u),F.sortIndex=F.expirationTime,e(a,F);else break;F=n(u)}}function w(N){if(_=!1,g(N),!m)if(n(a)!==null)m=!0,Be(T);else{var F=n(u);F!==null&&Wn(w,F.startTime-N)}}function T(N,F){m=!1,_&&(_=!1,v(E),E=-1),p=!0;var $=c;try{for(g(F),d=n(a);d!==null&&(!(d.expirationTime>F)||N&&!U());){var ve=d.callback;if(typeof ve=="function"){d.callback=null,c=d.priorityLevel;var Ne=ve(d.expirationTime<=F);F=t.unstable_now(),typeof Ne=="function"?d.callback=Ne:d===n(a)&&r(a),g(F)}else r(a);d=n(a)}if(d!==null)var mr=!0;else{var Ht=n(u);Ht!==null&&Wn(w,Ht.startTime-F),mr=!1}return mr}finally{d=null,c=$,p=!1}}var I=!1,C=null,E=-1,L=5,D=-1;function U(){return!(t.unstable_now()-D<L)}function oe(){if(C!==null){var N=t.unstable_now();D=N;var F=!0;try{F=C(!0,N)}finally{F?Ke():(I=!1,C=null)}}else I=!1}var Ke;if(typeof h=="function")Ke=function(){h(oe)};else if(typeof MessageChannel!="undefined"){var wt=new MessageChannel,pe=wt.port2;wt.port1.onmessage=oe,Ke=function(){pe.postMessage(null)}}else Ke=function(){S(oe,0)};function Be(N){C=N,I||(I=!0,Ke())}function Wn(N,F){E=S(function(){N(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,Be(T))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return c},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(N){switch(c){case 1:case 2:case 3:var F=3;break;default:F=c}var $=c;c=F;try{return N()}finally{c=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,F){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var $=c;c=N;try{return F()}finally{c=$}},t.unstable_scheduleCallback=function(N,F,$){var ve=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ve+$:ve):$=ve,N){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=$+Ne,N={id:f++,callback:F,priorityLevel:N,startTime:$,expirationTime:Ne,sortIndex:-1},$>ve?(N.sortIndex=$,e(u,N),n(a)===null&&N===n(u)&&(_?(v(E),E=-1):_=!0,Wn(w,$-ve))):(N.sortIndex=Ne,e(a,N),m||p||(m=!0,Be(T))),N},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(N){var F=c;return function(){var $=c;c=F;try{return N.apply(this,arguments)}finally{c=$}}}})(Fp);Lp.exports=Fp;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp=Ie.exports,gt=Lp.exports;function k(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zp=new Set,as={};function fr(t,e){Kr(t,e),Kr(t+"Capture",e)}function Kr(t,e){for(as[t]=e,t=0;t<e.length;t++)zp.add(e[t])}var fn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Ka=Object.prototype.hasOwnProperty,v_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_d={},wd={};function m_(t){return Ka.call(wd,t)?!0:Ka.call(_d,t)?!1:v_.test(t)?wd[t]=!0:(_d[t]=!0,!1)}function g_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function y_(t,e,n,r){if(e===null||typeof e=="undefined"||g_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ot(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qe[t]=new ot(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qe[e]=new ot(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qe[t]=new ot(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qe[t]=new ot(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qe[t]=new ot(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qe[t]=new ot(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qe[t]=new ot(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qe[t]=new ot(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qe[t]=new ot(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cc=/[\-:]([a-z])/g;function Tc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cc,Tc);Qe[e]=new ot(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cc,Tc);Qe[e]=new ot(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cc,Tc);Qe[e]=new ot(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qe[t]=new ot(t,1,!1,t.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qe[t]=new ot(t,1,!1,t.toLowerCase(),null,!0,!0)});function kc(t,e,n,r){var i=Qe.hasOwnProperty(e)?Qe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(y_(e,n,i,r)&&(n=null),r||i===null?m_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vn=bp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qs=Symbol.for("react.element"),kr=Symbol.for("react.portal"),xr=Symbol.for("react.fragment"),xc=Symbol.for("react.strict_mode"),qa=Symbol.for("react.profiler"),jp=Symbol.for("react.provider"),$p=Symbol.for("react.context"),Ic=Symbol.for("react.forward_ref"),Xa=Symbol.for("react.suspense"),Ja=Symbol.for("react.suspense_list"),Nc=Symbol.for("react.memo"),gn=Symbol.for("react.lazy"),Up=Symbol.for("react.offscreen"),Sd=Symbol.iterator;function Ci(t){return t===null||typeof t!="object"?null:(t=Sd&&t[Sd]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,da;function zi(t){if(da===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);da=e&&e[1]||""}return`
`+da+t}var ha=!1;function pa(t,e){if(!t||ha)return"";ha=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{ha=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zi(t):""}function __(t){switch(t.tag){case 5:return zi(t.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 2:case 15:return t=pa(t.type,!1),t;case 11:return t=pa(t.type.render,!1),t;case 1:return t=pa(t.type,!0),t;default:return""}}function Za(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xr:return"Fragment";case kr:return"Portal";case qa:return"Profiler";case xc:return"StrictMode";case Xa:return"Suspense";case Ja:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $p:return(t.displayName||"Context")+".Consumer";case jp:return(t._context.displayName||"Context")+".Provider";case Ic:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Nc:return e=t.displayName||null,e!==null?e:Za(t.type)||"Memo";case gn:e=t._payload,t=t._init;try{return Za(t(e))}catch{}}return null}function w_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Za(e);case 8:return e===xc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function S_(t){var e=Bp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xs(t){t._valueTracker||(t._valueTracker=S_(t))}function Wp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Bp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fo(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function eu(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function Ed(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Mn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vp(t,e){e=e.checked,e!=null&&kc(t,"checked",e,!1)}function tu(t,e){Vp(t,e);var n=Mn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nu(t,e.type,n):e.hasOwnProperty("defaultValue")&&nu(t,e.type,Mn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Cd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nu(t,e,n){(e!=="number"||Fo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ji=Array.isArray;function zr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Mn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ru(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(k(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Td(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(k(92));if(ji(n)){if(1<n.length)throw Error(k(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mn(n)}}function Hp(t,e){var n=Mn(e.value),r=Mn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function kd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Gp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Gp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Js,Qp=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Js=Js||document.createElement("div"),Js.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Js.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function us(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E_=["Webkit","ms","Moz","O"];Object.keys(Gi).forEach(function(t){E_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gi[e]=Gi[t]})});function Yp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gi.hasOwnProperty(t)&&Gi[t]?(""+e).trim():e+"px"}function Kp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Yp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var C_=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function su(t,e){if(e){if(C_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(k(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(k(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(k(61))}if(e.style!=null&&typeof e.style!="object")throw Error(k(62))}}function ou(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lu=null;function Pc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var au=null,jr=null,$r=null;function xd(t){if(t=js(t)){if(typeof au!="function")throw Error(k(280));var e=t.stateNode;e&&(e=Ml(e),au(t.stateNode,t.type,e))}}function qp(t){jr?$r?$r.push(t):$r=[t]:jr=t}function Xp(){if(jr){var t=jr,e=$r;if($r=jr=null,xd(t),e)for(t=0;t<e.length;t++)xd(e[t])}}function Jp(t,e){return t(e)}function Zp(){}var va=!1;function ev(t,e,n){if(va)return t(e,n);va=!0;try{return Jp(t,e,n)}finally{va=!1,(jr!==null||$r!==null)&&(Zp(),Xp())}}function cs(t,e){var n=t.stateNode;if(n===null)return null;var r=Ml(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(k(231,e,typeof n));return n}var uu=!1;if(fn)try{var Ti={};Object.defineProperty(Ti,"passive",{get:function(){uu=!0}}),window.addEventListener("test",Ti,Ti),window.removeEventListener("test",Ti,Ti)}catch{uu=!1}function T_(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var Qi=!1,bo=null,zo=!1,cu=null,k_={onError:function(t){Qi=!0,bo=t}};function x_(t,e,n,r,i,s,o,l,a){Qi=!1,bo=null,T_.apply(k_,arguments)}function I_(t,e,n,r,i,s,o,l,a){if(x_.apply(this,arguments),Qi){if(Qi){var u=bo;Qi=!1,bo=null}else throw Error(k(198));zo||(zo=!0,cu=u)}}function dr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Id(t){if(dr(t)!==t)throw Error(k(188))}function N_(t){var e=t.alternate;if(!e){if(e=dr(t),e===null)throw Error(k(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Id(i),t;if(s===r)return Id(i),e;s=s.sibling}throw Error(k(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(k(189))}}if(n.alternate!==r)throw Error(k(190))}if(n.tag!==3)throw Error(k(188));return n.stateNode.current===n?t:e}function nv(t){return t=N_(t),t!==null?rv(t):null}function rv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rv(t);if(e!==null)return e;t=t.sibling}return null}var iv=gt.unstable_scheduleCallback,Nd=gt.unstable_cancelCallback,P_=gt.unstable_shouldYield,R_=gt.unstable_requestPaint,xe=gt.unstable_now,O_=gt.unstable_getCurrentPriorityLevel,Rc=gt.unstable_ImmediatePriority,sv=gt.unstable_UserBlockingPriority,jo=gt.unstable_NormalPriority,A_=gt.unstable_LowPriority,ov=gt.unstable_IdlePriority,Rl=null,Xt=null;function D_(t){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(Rl,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:F_,M_=Math.log,L_=Math.LN2;function F_(t){return t>>>=0,t===0?32:31-(M_(t)/L_|0)|0}var Zs=64,eo=4194304;function $i(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $o(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=$i(l):(s&=o,s!==0&&(r=$i(s)))}else o=n&~i,o!==0?r=$i(o):s!==0&&(r=$i(s));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ut(e),i=1<<n,r|=t[n],e&=~i;return r}function b_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ut(s),l=1<<o,a=i[o];a===-1?((l&n)===0||(l&r)!==0)&&(i[o]=b_(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function fu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lv(){var t=Zs;return Zs<<=1,(Zs&4194240)===0&&(Zs=64),t}function ma(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ut(e),t[e]=n}function j_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ut(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Oc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ut(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var te=0;function av(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var uv,Ac,cv,fv,dv,du=!1,to=[],kn=null,xn=null,In=null,fs=new Map,ds=new Map,_n=[],$_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pd(t,e){switch(t){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":fs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ds.delete(e.pointerId)}}function ki(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=js(e),e!==null&&Ac(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function U_(t,e,n,r,i){switch(e){case"focusin":return kn=ki(kn,t,e,n,r,i),!0;case"dragenter":return xn=ki(xn,t,e,n,r,i),!0;case"mouseover":return In=ki(In,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return fs.set(s,ki(fs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ds.set(s,ki(ds.get(s)||null,t,e,n,r,i)),!0}return!1}function hv(t){var e=Yn(t.target);if(e!==null){var n=dr(e);if(n!==null){if(e=n.tag,e===13){if(e=tv(n),e!==null){t.blockedOn=e,dv(t.priority,function(){cv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Co(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lu=r,n.target.dispatchEvent(r),lu=null}else return e=js(n),e!==null&&Ac(e),t.blockedOn=n,!1;e.shift()}return!0}function Rd(t,e,n){Co(t)&&n.delete(e)}function B_(){du=!1,kn!==null&&Co(kn)&&(kn=null),xn!==null&&Co(xn)&&(xn=null),In!==null&&Co(In)&&(In=null),fs.forEach(Rd),ds.forEach(Rd)}function xi(t,e){t.blockedOn===e&&(t.blockedOn=null,du||(du=!0,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,B_)))}function hs(t){function e(i){return xi(i,t)}if(0<to.length){xi(to[0],t);for(var n=1;n<to.length;n++){var r=to[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kn!==null&&xi(kn,t),xn!==null&&xi(xn,t),In!==null&&xi(In,t),fs.forEach(e),ds.forEach(e),n=0;n<_n.length;n++)r=_n[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_n.length&&(n=_n[0],n.blockedOn===null);)hv(n),n.blockedOn===null&&_n.shift()}var Ur=vn.ReactCurrentBatchConfig,Uo=!0;function W_(t,e,n,r){var i=te,s=Ur.transition;Ur.transition=null;try{te=1,Dc(t,e,n,r)}finally{te=i,Ur.transition=s}}function V_(t,e,n,r){var i=te,s=Ur.transition;Ur.transition=null;try{te=4,Dc(t,e,n,r)}finally{te=i,Ur.transition=s}}function Dc(t,e,n,r){if(Uo){var i=hu(t,e,n,r);if(i===null)xa(t,e,r,Bo,n),Pd(t,r);else if(U_(i,t,e,n,r))r.stopPropagation();else if(Pd(t,r),e&4&&-1<$_.indexOf(t)){for(;i!==null;){var s=js(i);if(s!==null&&uv(s),s=hu(t,e,n,r),s===null&&xa(t,e,r,Bo,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else xa(t,e,r,null,n)}}var Bo=null;function hu(t,e,n,r){if(Bo=null,t=Pc(r),t=Yn(t),t!==null)if(e=dr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bo=t,null}function pv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(O_()){case Rc:return 1;case sv:return 4;case jo:case A_:return 16;case ov:return 536870912;default:return 16}default:return 16}}var En=null,Mc=null,To=null;function vv(){if(To)return To;var t,e=Mc,n=e.length,r,i="value"in En?En.value:En.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return To=i.slice(t,1<r?1-r:void 0)}function ko(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function no(){return!0}function Od(){return!1}function _t(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?no:Od,this.isPropagationStopped=Od,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=no)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=no)},persist:function(){},isPersistent:no}),e}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lc=_t(di),zs=we({},di,{view:0,detail:0}),H_=_t(zs),ga,ya,Ii,Ol=we({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ii&&(Ii&&t.type==="mousemove"?(ga=t.screenX-Ii.screenX,ya=t.screenY-Ii.screenY):ya=ga=0,Ii=t),ga)},movementY:function(t){return"movementY"in t?t.movementY:ya}}),Ad=_t(Ol),G_=we({},Ol,{dataTransfer:0}),Q_=_t(G_),Y_=we({},zs,{relatedTarget:0}),_a=_t(Y_),K_=we({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),q_=_t(K_),X_=we({},di,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),J_=_t(X_),Z_=we({},di,{data:0}),Dd=_t(Z_),e0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=n0[t])?!!e[t]:!1}function Fc(){return r0}var i0=we({},zs,{key:function(t){if(t.key){var e=e0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ko(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fc,charCode:function(t){return t.type==="keypress"?ko(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ko(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s0=_t(i0),o0=we({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Md=_t(o0),l0=we({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fc}),a0=_t(l0),u0=we({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),c0=_t(u0),f0=we({},Ol,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),d0=_t(f0),h0=[9,13,27,32],bc=fn&&"CompositionEvent"in window,Yi=null;fn&&"documentMode"in document&&(Yi=document.documentMode);var p0=fn&&"TextEvent"in window&&!Yi,mv=fn&&(!bc||Yi&&8<Yi&&11>=Yi),Ld=String.fromCharCode(32),Fd=!1;function gv(t,e){switch(t){case"keyup":return h0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ir=!1;function v0(t,e){switch(t){case"compositionend":return yv(e);case"keypress":return e.which!==32?null:(Fd=!0,Ld);case"textInput":return t=e.data,t===Ld&&Fd?null:t;default:return null}}function m0(t,e){if(Ir)return t==="compositionend"||!bc&&gv(t,e)?(t=vv(),To=Mc=En=null,Ir=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mv&&e.locale!=="ko"?null:e.data;default:return null}}var g0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!g0[t.type]:e==="textarea"}function _v(t,e,n,r){qp(r),e=Wo(e,"onChange"),0<e.length&&(n=new Lc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ki=null,ps=null;function y0(t){Rv(t,0)}function Al(t){var e=Rr(t);if(Wp(e))return t}function _0(t,e){if(t==="change")return e}var wv=!1;if(fn){var wa;if(fn){var Sa="oninput"in document;if(!Sa){var zd=document.createElement("div");zd.setAttribute("oninput","return;"),Sa=typeof zd.oninput=="function"}wa=Sa}else wa=!1;wv=wa&&(!document.documentMode||9<document.documentMode)}function jd(){Ki&&(Ki.detachEvent("onpropertychange",Sv),ps=Ki=null)}function Sv(t){if(t.propertyName==="value"&&Al(ps)){var e=[];_v(e,ps,t,Pc(t)),ev(y0,e)}}function w0(t,e,n){t==="focusin"?(jd(),Ki=e,ps=n,Ki.attachEvent("onpropertychange",Sv)):t==="focusout"&&jd()}function S0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Al(ps)}function E0(t,e){if(t==="click")return Al(e)}function C0(t,e){if(t==="input"||t==="change")return Al(e)}function T0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wt=typeof Object.is=="function"?Object.is:T0;function vs(t,e){if(Wt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ka.call(e,i)||!Wt(t[i],e[i]))return!1}return!0}function $d(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ud(t,e){var n=$d(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$d(n)}}function Ev(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ev(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Cv(){for(var t=window,e=Fo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fo(t.document)}return e}function zc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function k0(t){var e=Cv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ev(n.ownerDocument.documentElement,n)){if(r!==null&&zc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ud(n,s);var o=Ud(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var x0=fn&&"documentMode"in document&&11>=document.documentMode,Nr=null,pu=null,qi=null,vu=!1;function Bd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vu||Nr==null||Nr!==Fo(r)||(r=Nr,"selectionStart"in r&&zc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qi&&vs(qi,r)||(qi=r,r=Wo(pu,"onSelect"),0<r.length&&(e=new Lc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Nr)))}function ro(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Pr={animationend:ro("Animation","AnimationEnd"),animationiteration:ro("Animation","AnimationIteration"),animationstart:ro("Animation","AnimationStart"),transitionend:ro("Transition","TransitionEnd")},Ea={},Tv={};fn&&(Tv=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function Dl(t){if(Ea[t])return Ea[t];if(!Pr[t])return t;var e=Pr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Tv)return Ea[t]=e[n];return t}var kv=Dl("animationend"),xv=Dl("animationiteration"),Iv=Dl("animationstart"),Nv=Dl("transitionend"),Pv=new Map,Wd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(t,e){Pv.set(t,e),fr(e,[t])}for(var Ca=0;Ca<Wd.length;Ca++){var Ta=Wd[Ca],I0=Ta.toLowerCase(),N0=Ta[0].toUpperCase()+Ta.slice(1);$n(I0,"on"+N0)}$n(kv,"onAnimationEnd");$n(xv,"onAnimationIteration");$n(Iv,"onAnimationStart");$n("dblclick","onDoubleClick");$n("focusin","onFocus");$n("focusout","onBlur");$n(Nv,"onTransitionEnd");Kr("onMouseEnter",["mouseout","mouseover"]);Kr("onMouseLeave",["mouseout","mouseover"]);Kr("onPointerEnter",["pointerout","pointerover"]);Kr("onPointerLeave",["pointerout","pointerover"]);fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ui));function Vd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,I_(r,e,void 0,t),t.currentTarget=null}function Rv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Vd(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Vd(i,l,u),s=a}}}if(zo)throw t=cu,zo=!1,cu=null,t}function de(t,e){var n=e[wu];n===void 0&&(n=e[wu]=new Set);var r=t+"__bubble";n.has(r)||(Ov(e,t,2,!1),n.add(r))}function ka(t,e,n){var r=0;e&&(r|=4),Ov(n,t,r,e)}var io="_reactListening"+Math.random().toString(36).slice(2);function ms(t){if(!t[io]){t[io]=!0,zp.forEach(function(n){n!=="selectionchange"&&(P0.has(n)||ka(n,!1,t),ka(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[io]||(e[io]=!0,ka("selectionchange",!1,e))}}function Ov(t,e,n,r){switch(pv(e)){case 1:var i=W_;break;case 4:i=V_;break;default:i=Dc}n=i.bind(null,e,n,t),i=void 0,!uu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function xa(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Yn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}ev(function(){var u=s,f=Pc(n),d=[];e:{var c=Pv.get(t);if(c!==void 0){var p=Lc,m=t;switch(t){case"keypress":if(ko(n)===0)break e;case"keydown":case"keyup":p=s0;break;case"focusin":m="focus",p=_a;break;case"focusout":m="blur",p=_a;break;case"beforeblur":case"afterblur":p=_a;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Q_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=a0;break;case kv:case xv:case Iv:p=q_;break;case Nv:p=c0;break;case"scroll":p=H_;break;case"wheel":p=d0;break;case"copy":case"cut":case"paste":p=J_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Md}var _=(e&4)!==0,S=!_&&t==="scroll",v=_?c!==null?c+"Capture":null:c;_=[];for(var h=u,g;h!==null;){g=h;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,v!==null&&(w=cs(h,v),w!=null&&_.push(gs(h,w,g)))),S)break;h=h.return}0<_.length&&(c=new p(c,m,null,n,f),d.push({event:c,listeners:_}))}}if((e&7)===0){e:{if(c=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",c&&n!==lu&&(m=n.relatedTarget||n.fromElement)&&(Yn(m)||m[dn]))break e;if((p||c)&&(c=f.window===f?f:(c=f.ownerDocument)?c.defaultView||c.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?Yn(m):null,m!==null&&(S=dr(m),m!==S||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(_=Ad,w="onMouseLeave",v="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(_=Md,w="onPointerLeave",v="onPointerEnter",h="pointer"),S=p==null?c:Rr(p),g=m==null?c:Rr(m),c=new _(w,h+"leave",p,n,f),c.target=S,c.relatedTarget=g,w=null,Yn(f)===u&&(_=new _(v,h+"enter",m,n,f),_.target=g,_.relatedTarget=S,w=_),S=w,p&&m)t:{for(_=p,v=m,h=0,g=_;g;g=yr(g))h++;for(g=0,w=v;w;w=yr(w))g++;for(;0<h-g;)_=yr(_),h--;for(;0<g-h;)v=yr(v),g--;for(;h--;){if(_===v||v!==null&&_===v.alternate)break t;_=yr(_),v=yr(v)}_=null}else _=null;p!==null&&Hd(d,c,p,_,!1),m!==null&&S!==null&&Hd(d,S,m,_,!0)}}e:{if(c=u?Rr(u):window,p=c.nodeName&&c.nodeName.toLowerCase(),p==="select"||p==="input"&&c.type==="file")var T=_0;else if(bd(c))if(wv)T=C0;else{T=S0;var I=w0}else(p=c.nodeName)&&p.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(T=E0);if(T&&(T=T(t,u))){_v(d,T,n,f);break e}I&&I(t,c,u),t==="focusout"&&(I=c._wrapperState)&&I.controlled&&c.type==="number"&&nu(c,"number",c.value)}switch(I=u?Rr(u):window,t){case"focusin":(bd(I)||I.contentEditable==="true")&&(Nr=I,pu=u,qi=null);break;case"focusout":qi=pu=Nr=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,Bd(d,n,f);break;case"selectionchange":if(x0)break;case"keydown":case"keyup":Bd(d,n,f)}var C;if(bc)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ir?gv(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(mv&&n.locale!=="ko"&&(Ir||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ir&&(C=vv()):(En=f,Mc="value"in En?En.value:En.textContent,Ir=!0)),I=Wo(u,E),0<I.length&&(E=new Dd(E,t,null,n,f),d.push({event:E,listeners:I}),C?E.data=C:(C=yv(n),C!==null&&(E.data=C)))),(C=p0?v0(t,n):m0(t,n))&&(u=Wo(u,"onBeforeInput"),0<u.length&&(f=new Dd("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=C))}Rv(d,e)})}function gs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=cs(t,n),s!=null&&r.unshift(gs(t,s,i)),s=cs(t,e),s!=null&&r.push(gs(t,s,i))),t=t.return}return r}function yr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hd(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=cs(n,s),a!=null&&o.unshift(gs(n,a,l))):i||(a=cs(n,s),a!=null&&o.push(gs(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var R0=/\r\n?/g,O0=/\u0000|\uFFFD/g;function Gd(t){return(typeof t=="string"?t:""+t).replace(R0,`
`).replace(O0,"")}function so(t,e,n){if(e=Gd(e),Gd(t)!==e&&n)throw Error(k(425))}function Vo(){}var mu=null,gu=null;function yu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _u=typeof setTimeout=="function"?setTimeout:void 0,A0=typeof clearTimeout=="function"?clearTimeout:void 0,Qd=typeof Promise=="function"?Promise:void 0,D0=typeof queueMicrotask=="function"?queueMicrotask:typeof Qd!="undefined"?function(t){return Qd.resolve(null).then(t).catch(M0)}:_u;function M0(t){setTimeout(function(){throw t})}function Ia(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),hs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);hs(e)}function sn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),qt="__reactFiber$"+hi,ys="__reactProps$"+hi,dn="__reactContainer$"+hi,wu="__reactEvents$"+hi,L0="__reactListeners$"+hi,F0="__reactHandles$"+hi;function Yn(t){var e=t[qt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dn]||n[qt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yd(t);t!==null;){if(n=t[qt])return n;t=Yd(t)}return e}t=n,n=t.parentNode}return null}function js(t){return t=t[qt]||t[dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(k(33))}function Ml(t){return t[ys]||null}var Su=[],Or=-1;function Un(t){return{current:t}}function he(t){0>Or||(t.current=Su[Or],Su[Or]=null,Or--)}function fe(t,e){Or++,Su[Or]=t.current,t.current=e}var Ln={},et=Un(Ln),ft=Un(!1),tr=Ln;function qr(t,e){var n=t.type.contextTypes;if(!n)return Ln;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function dt(t){return t=t.childContextTypes,t!=null}function Ho(){he(ft),he(et)}function Kd(t,e,n){if(et.current!==Ln)throw Error(k(168));fe(et,e),fe(ft,n)}function Av(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(k(108,w_(t)||"Unknown",i));return we({},n,r)}function Go(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ln,tr=et.current,fe(et,t),fe(ft,ft.current),!0}function qd(t,e,n){var r=t.stateNode;if(!r)throw Error(k(169));n?(t=Av(t,e,tr),r.__reactInternalMemoizedMergedChildContext=t,he(ft),he(et),fe(et,t)):he(ft),fe(ft,n)}var rn=null,Ll=!1,Na=!1;function Dv(t){rn===null?rn=[t]:rn.push(t)}function b0(t){Ll=!0,Dv(t)}function Bn(){if(!Na&&rn!==null){Na=!0;var t=0,e=te;try{var n=rn;for(te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}rn=null,Ll=!1}catch(i){throw rn!==null&&(rn=rn.slice(t+1)),iv(Rc,Bn),i}finally{te=e,Na=!1}}return null}var z0=vn.ReactCurrentBatchConfig;function Dt(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Qo=Un(null),Yo=null,Ar=null,jc=null;function $c(){jc=Ar=Yo=null}function Uc(t){var e=Qo.current;he(Qo),t._currentValue=e}function Eu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Br(t,e){Yo=t,jc=Ar=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(ut=!0),t.firstContext=null)}function It(t){var e=t._currentValue;if(jc!==t)if(t={context:t,memoizedValue:e,next:null},Ar===null){if(Yo===null)throw Error(k(308));Ar=t,Yo.dependencies={lanes:0,firstContext:t}}else Ar=Ar.next=t;return e}var jt=null,yn=!1;function Bc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Nn(t,e){var n=t.updateQueue;n!==null&&(n=n.shared,Cm(t)?(t=n.interleaved,t===null?(e.next=e,jt===null?jt=[n]:jt.push(n)):(e.next=t.next,t.next=e),n.interleaved=e):(t=n.pending,t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e))}function xo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Oc(t,n)}}function Xd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ko(t,e,n,r){var i=t.updateQueue;yn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,f=u=a=null,l=s;do{var c=l.lane,p=l.eventTime;if((r&c)===c){f!==null&&(f=f.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,_=l;switch(c=e,p=n,_.tag){case 1:if(m=_.payload,typeof m=="function"){d=m.call(p,d,c);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=_.payload,c=typeof m=="function"?m.call(p,d,c):m,c==null)break e;d=we({},d,c);break e;case 2:yn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,c=i.effects,c===null?i.effects=[l]:c.push(l))}else p={eventTime:p,lane:c,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=p,a=d):f=f.next=p,o|=c;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;c=l,l=c.next,c.next=null,i.lastBaseUpdate=c,i.shared.pending=null}}while(1);if(f===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ir|=o,t.lanes=o,t.memoizedState=d}}function Jd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(k(191,i));i.call(r)}}}var Lv=new bp.Component().refs;function Cu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fl={isMounted:function(t){return(t=t._reactInternals)?dr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rt(),i=Rn(t),s=un(r,i);s.payload=e,n!=null&&(s.callback=n),Nn(t,s),e=xt(t,i,r),e!==null&&xo(e,t,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rt(),i=Rn(t),s=un(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),Nn(t,s),e=xt(t,i,r),e!==null&&xo(e,t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rt(),r=Rn(t),i=un(n,r);i.tag=2,e!=null&&(i.callback=e),Nn(t,i),e=xt(t,r,n),e!==null&&xo(e,t,r)}};function Zd(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!vs(n,r)||!vs(i,s):!0}function Fv(t,e,n){var r=!1,i=Ln,s=e.contextType;return typeof s=="object"&&s!==null?s=It(s):(i=dt(e)?tr:et.current,r=e.contextTypes,s=(r=r!=null)?qr(t,i):Ln),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function eh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Fl.enqueueReplaceState(e,e.state,null)}function Tu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Lv,Bc(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=It(s):(s=dt(e)?tr:et.current,i.context=qr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Cu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Fl.enqueueReplaceState(i,i.state,null),Ko(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}var Dr=[],Mr=0,qo=null,Xo=0,St=[],Et=0,nr=null,on=1,ln="";function Vn(t,e){Dr[Mr++]=Xo,Dr[Mr++]=qo,qo=t,Xo=e}function bv(t,e,n){St[Et++]=on,St[Et++]=ln,St[Et++]=nr,nr=t;var r=on;t=ln;var i=32-Ut(r)-1;r&=~(1<<i),n+=1;var s=32-Ut(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,on=1<<32-Ut(e)+i|n<<i|r,ln=s+t}else on=1<<s|n<<i|r,ln=t}function Wc(t){t.return!==null&&(Vn(t,1),bv(t,1,0))}function Vc(t){for(;t===qo;)qo=Dr[--Mr],Dr[Mr]=null,Xo=Dr[--Mr],Dr[Mr]=null;for(;t===nr;)nr=St[--Et],St[Et]=null,ln=St[--Et],St[Et]=null,on=St[--Et],St[Et]=null}var mt=null,at=null,ge=!1,bt=null;function zv(t,e){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function th(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mt=t,at=sn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mt=t,at=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=nr!==null?{id:on,overflow:ln}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mt=t,at=null,!0):!1;default:return!1}}function ku(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xu(t){if(ge){var e=at;if(e){var n=e;if(!th(t,e)){if(ku(t))throw Error(k(418));e=sn(n.nextSibling);var r=mt;e&&th(t,e)?zv(r,n):(t.flags=t.flags&-4097|2,ge=!1,mt=t)}}else{if(ku(t))throw Error(k(418));t.flags=t.flags&-4097|2,ge=!1,mt=t}}}function nh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mt=t}function Ni(t){if(t!==mt)return!1;if(!ge)return nh(t),ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yu(t.type,t.memoizedProps)),e&&(e=at)){if(ku(t)){for(t=at;t;)t=sn(t.nextSibling);throw Error(k(418))}for(;e;)zv(t,e),e=sn(e.nextSibling)}if(nh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(k(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){at=sn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}at=null}}else at=mt?sn(t.stateNode.nextSibling):null;return!0}function Xr(){at=mt=null,ge=!1}function Hc(t){bt===null?bt=[t]:bt.push(t)}function Pi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(k(309));var r=n.stateNode}if(!r)throw Error(k(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;l===Lv&&(l=i.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(k(284));if(!n._owner)throw Error(k(290,t))}return t}function oo(t,e){throw t=Object.prototype.toString.call(e),Error(k(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rh(t){var e=t._init;return e(t._payload)}function jv(t){function e(v,h){if(t){var g=v.deletions;g===null?(v.deletions=[h],v.flags|=16):g.push(h)}}function n(v,h){if(!t)return null;for(;h!==null;)e(v,h),h=h.sibling;return null}function r(v,h){for(v=new Map;h!==null;)h.key!==null?v.set(h.key,h):v.set(h.index,h),h=h.sibling;return v}function i(v,h){return v=Fn(v,h),v.index=0,v.sibling=null,v}function s(v,h,g){return v.index=g,t?(g=v.alternate,g!==null?(g=g.index,g<h?(v.flags|=2,h):g):(v.flags|=2,h)):(v.flags|=1048576,h)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,h,g,w){return h===null||h.tag!==6?(h=Ma(g,v.mode,w),h.return=v,h):(h=i(h,g),h.return=v,h)}function a(v,h,g,w){var T=g.type;return T===xr?f(v,h,g.props.children,w,g.key):h!==null&&(h.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===gn&&rh(T)===h.type)?(w=i(h,g.props),w.ref=Pi(v,h,g),w.return=v,w):(w=Oo(g.type,g.key,g.props,null,v.mode,w),w.ref=Pi(v,h,g),w.return=v,w)}function u(v,h,g,w){return h===null||h.tag!==4||h.stateNode.containerInfo!==g.containerInfo||h.stateNode.implementation!==g.implementation?(h=La(g,v.mode,w),h.return=v,h):(h=i(h,g.children||[]),h.return=v,h)}function f(v,h,g,w,T){return h===null||h.tag!==7?(h=Jn(g,v.mode,w,T),h.return=v,h):(h=i(h,g),h.return=v,h)}function d(v,h,g){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Ma(""+h,v.mode,g),h.return=v,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case qs:return g=Oo(h.type,h.key,h.props,null,v.mode,g),g.ref=Pi(v,null,h),g.return=v,g;case kr:return h=La(h,v.mode,g),h.return=v,h;case gn:var w=h._init;return d(v,w(h._payload),g)}if(ji(h)||Ci(h))return h=Jn(h,v.mode,g,null),h.return=v,h;oo(v,h)}return null}function c(v,h,g,w){var T=h!==null?h.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return T!==null?null:l(v,h,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case qs:return g.key===T?a(v,h,g,w):null;case kr:return g.key===T?u(v,h,g,w):null;case gn:return T=g._init,c(v,h,T(g._payload),w)}if(ji(g)||Ci(g))return T!==null?null:f(v,h,g,w,null);oo(v,g)}return null}function p(v,h,g,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(g)||null,l(h,v,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case qs:return v=v.get(w.key===null?g:w.key)||null,a(h,v,w,T);case kr:return v=v.get(w.key===null?g:w.key)||null,u(h,v,w,T);case gn:var I=w._init;return p(v,h,g,I(w._payload),T)}if(ji(w)||Ci(w))return v=v.get(g)||null,f(h,v,w,T,null);oo(h,w)}return null}function m(v,h,g,w){for(var T=null,I=null,C=h,E=h=0,L=null;C!==null&&E<g.length;E++){C.index>E?(L=C,C=null):L=C.sibling;var D=c(v,C,g[E],w);if(D===null){C===null&&(C=L);break}t&&C&&D.alternate===null&&e(v,C),h=s(D,h,E),I===null?T=D:I.sibling=D,I=D,C=L}if(E===g.length)return n(v,C),ge&&Vn(v,E),T;if(C===null){for(;E<g.length;E++)C=d(v,g[E],w),C!==null&&(h=s(C,h,E),I===null?T=C:I.sibling=C,I=C);return ge&&Vn(v,E),T}for(C=r(v,C);E<g.length;E++)L=p(C,v,E,g[E],w),L!==null&&(t&&L.alternate!==null&&C.delete(L.key===null?E:L.key),h=s(L,h,E),I===null?T=L:I.sibling=L,I=L);return t&&C.forEach(function(U){return e(v,U)}),ge&&Vn(v,E),T}function _(v,h,g,w){var T=Ci(g);if(typeof T!="function")throw Error(k(150));if(g=T.call(g),g==null)throw Error(k(151));for(var I=T=null,C=h,E=h=0,L=null,D=g.next();C!==null&&!D.done;E++,D=g.next()){C.index>E?(L=C,C=null):L=C.sibling;var U=c(v,C,D.value,w);if(U===null){C===null&&(C=L);break}t&&C&&U.alternate===null&&e(v,C),h=s(U,h,E),I===null?T=U:I.sibling=U,I=U,C=L}if(D.done)return n(v,C),ge&&Vn(v,E),T;if(C===null){for(;!D.done;E++,D=g.next())D=d(v,D.value,w),D!==null&&(h=s(D,h,E),I===null?T=D:I.sibling=D,I=D);return ge&&Vn(v,E),T}for(C=r(v,C);!D.done;E++,D=g.next())D=p(C,v,E,D.value,w),D!==null&&(t&&D.alternate!==null&&C.delete(D.key===null?E:D.key),h=s(D,h,E),I===null?T=D:I.sibling=D,I=D);return t&&C.forEach(function(oe){return e(v,oe)}),ge&&Vn(v,E),T}function S(v,h,g,w){if(typeof g=="object"&&g!==null&&g.type===xr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case qs:e:{for(var T=g.key,I=h;I!==null;){if(I.key===T){if(T=g.type,T===xr){if(I.tag===7){n(v,I.sibling),h=i(I,g.props.children),h.return=v,v=h;break e}}else if(I.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===gn&&rh(T)===I.type){n(v,I.sibling),h=i(I,g.props),h.ref=Pi(v,I,g),h.return=v,v=h;break e}n(v,I);break}else e(v,I);I=I.sibling}g.type===xr?(h=Jn(g.props.children,v.mode,w,g.key),h.return=v,v=h):(w=Oo(g.type,g.key,g.props,null,v.mode,w),w.ref=Pi(v,h,g),w.return=v,v=w)}return o(v);case kr:e:{for(I=g.key;h!==null;){if(h.key===I)if(h.tag===4&&h.stateNode.containerInfo===g.containerInfo&&h.stateNode.implementation===g.implementation){n(v,h.sibling),h=i(h,g.children||[]),h.return=v,v=h;break e}else{n(v,h);break}else e(v,h);h=h.sibling}h=La(g,v.mode,w),h.return=v,v=h}return o(v);case gn:return I=g._init,S(v,h,I(g._payload),w)}if(ji(g))return m(v,h,g,w);if(Ci(g))return _(v,h,g,w);oo(v,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,h!==null&&h.tag===6?(n(v,h.sibling),h=i(h,g),h.return=v,v=h):(n(v,h),h=Ma(g,v.mode,w),h.return=v,v=h),o(v)):n(v,h)}return S}var Jr=jv(!0),$v=jv(!1),$s={},Jt=Un($s),_s=Un($s),ws=Un($s);function Kn(t){if(t===$s)throw Error(k(174));return t}function Gc(t,e){switch(fe(ws,e),fe(_s,t),fe(Jt,$s),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:iu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=iu(e,t)}he(Jt),fe(Jt,e)}function Zr(){he(Jt),he(_s),he(ws)}function Uv(t){Kn(ws.current);var e=Kn(Jt.current),n=iu(e,t.type);e!==n&&(fe(_s,t),fe(Jt,n))}function Qc(t){_s.current===t&&(he(Jt),he(_s))}var ye=Un(0);function Jo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pa=[];function Yc(){for(var t=0;t<Pa.length;t++)Pa[t]._workInProgressVersionPrimary=null;Pa.length=0}var Io=vn.ReactCurrentDispatcher,Ra=vn.ReactCurrentBatchConfig,rr=0,_e=null,Oe=null,ze=null,Zo=!1,Xi=!1,Ss=0,j0=0;function qe(){throw Error(k(321))}function Kc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wt(t[n],e[n]))return!1;return!0}function qc(t,e,n,r,i,s){if(rr=s,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Io.current=t===null||t.memoizedState===null?W0:V0,t=n(r,i),Xi){s=0;do{if(Xi=!1,Ss=0,25<=s)throw Error(k(301));s+=1,ze=Oe=null,e.updateQueue=null,Io.current=H0,t=n(r,i)}while(Xi)}if(Io.current=el,e=Oe!==null&&Oe.next!==null,rr=0,ze=Oe=_e=null,Zo=!1,e)throw Error(k(300));return t}function Xc(){var t=Ss!==0;return Ss=0,t}function Kt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?_e.memoizedState=ze=t:ze=ze.next=t,ze}function Nt(){if(Oe===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=Oe.next;var e=ze===null?_e.memoizedState:ze.next;if(e!==null)ze=e,Oe=t;else{if(t===null)throw Error(k(310));Oe=t,t={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},ze===null?_e.memoizedState=ze=t:ze=ze.next=t}return ze}function Es(t,e){return typeof e=="function"?e(t):e}function Oa(t){var e=Nt(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var r=Oe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var f=u.lane;if((rr&f)===f)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,_e.lanes|=f,ir|=f}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,Wt(r,e.memoizedState)||(ut=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,_e.lanes|=s,ir|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Aa(t){var e=Nt(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Wt(s,e.memoizedState)||(ut=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Bv(){}function Wv(t,e){var n=_e,r=Nt(),i=e(),s=!Wt(r.memoizedState,i);if(s&&(r.memoizedState=i,ut=!0),r=r.queue,Jc(Gv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,Cs(9,Hv.bind(null,n,r,i,e),void 0,null),Le===null)throw Error(k(349));(rr&30)!==0||Vv(n,e,i)}return i}function Vv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Hv(t,e,n,r){e.value=n,e.getSnapshot=r,Qv(e)&&xt(t,1,-1)}function Gv(t,e,n){return n(function(){Qv(e)&&xt(t,1,-1)})}function Qv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wt(t,n)}catch{return!0}}function ih(t){var e=Kt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:t},e.queue=t,t=t.dispatch=B0.bind(null,_e,t),[e.memoizedState,t]}function Cs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Yv(){return Nt().memoizedState}function No(t,e,n,r){var i=Kt();_e.flags|=t,i.memoizedState=Cs(1|e,n,void 0,r===void 0?null:r)}function bl(t,e,n,r){var i=Nt();r=r===void 0?null:r;var s=void 0;if(Oe!==null){var o=Oe.memoizedState;if(s=o.destroy,r!==null&&Kc(r,o.deps)){i.memoizedState=Cs(e,n,s,r);return}}_e.flags|=t,i.memoizedState=Cs(1|e,n,s,r)}function sh(t,e){return No(8390656,8,t,e)}function Jc(t,e){return bl(2048,8,t,e)}function Kv(t,e){return bl(4,2,t,e)}function qv(t,e){return bl(4,4,t,e)}function Xv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Jv(t,e,n){return n=n!=null?n.concat([t]):null,bl(4,4,Xv.bind(null,e,t),n)}function Zc(){}function Zv(t,e){var n=Nt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function em(t,e){var n=Nt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function tm(t,e,n){return(rr&21)===0?(t.baseState&&(t.baseState=!1,ut=!0),t.memoizedState=n):(Wt(n,e)||(n=lv(),_e.lanes|=n,ir|=n,t.baseState=!0),e)}function $0(t,e){var n=te;te=n!==0&&4>n?n:4,t(!0);var r=Ra.transition;Ra.transition={};try{t(!1),e()}finally{te=n,Ra.transition=r}}function nm(){return Nt().memoizedState}function U0(t,e,n){var r=Rn(t);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rm(t)?im(e,n):(sm(t,e,n),n=rt(),t=xt(t,r,n),t!==null&&om(t,e,r))}function B0(t,e,n){var r=Rn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rm(t))im(e,i);else{sm(t,e,i);var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Wt(l,o))return}catch{}finally{}n=rt(),t=xt(t,r,n),t!==null&&om(t,e,r)}}function rm(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function im(t,e){Xi=Zo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sm(t,e,n){Cm(t)?(t=e.interleaved,t===null?(n.next=n,jt===null?jt=[e]:jt.push(e)):(n.next=t.next,t.next=n),e.interleaved=n):(t=e.pending,t===null?n.next=n:(n.next=t.next,t.next=n),e.pending=n)}function om(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Oc(t,n)}}var el={readContext:It,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},W0={readContext:It,useCallback:function(t,e){return Kt().memoizedState=[t,e===void 0?null:e],t},useContext:It,useEffect:sh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,No(4194308,4,Xv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return No(4194308,4,t,e)},useInsertionEffect:function(t,e){return No(4,2,t,e)},useMemo:function(t,e){var n=Kt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Kt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=U0.bind(null,_e,t),[r.memoizedState,t]},useRef:function(t){var e=Kt();return t={current:t},e.memoizedState=t},useState:ih,useDebugValue:Zc,useDeferredValue:function(t){return Kt().memoizedState=t},useTransition:function(){var t=ih(!1),e=t[0];return t=$0.bind(null,t[1]),Kt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_e,i=Kt();if(ge){if(n===void 0)throw Error(k(407));n=n()}else{if(n=e(),Le===null)throw Error(k(349));(rr&30)!==0||Vv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,sh(Gv.bind(null,r,s,t),[t]),r.flags|=2048,Cs(9,Hv.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Kt(),e=Le.identifierPrefix;if(ge){var n=ln,r=on;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ss++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=j0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},V0={readContext:It,useCallback:Zv,useContext:It,useEffect:Jc,useImperativeHandle:Jv,useInsertionEffect:Kv,useLayoutEffect:qv,useMemo:em,useReducer:Oa,useRef:Yv,useState:function(){return Oa(Es)},useDebugValue:Zc,useDeferredValue:function(t){var e=Nt();return tm(e,Oe.memoizedState,t)},useTransition:function(){var t=Oa(Es)[0],e=Nt().memoizedState;return[t,e]},useMutableSource:Bv,useSyncExternalStore:Wv,useId:nm,unstable_isNewReconciler:!1},H0={readContext:It,useCallback:Zv,useContext:It,useEffect:Jc,useImperativeHandle:Jv,useInsertionEffect:Kv,useLayoutEffect:qv,useMemo:em,useReducer:Aa,useRef:Yv,useState:function(){return Aa(Es)},useDebugValue:Zc,useDeferredValue:function(t){var e=Nt();return Oe===null?e.memoizedState=t:tm(e,Oe.memoizedState,t)},useTransition:function(){var t=Aa(Es)[0],e=Nt().memoizedState;return[t,e]},useMutableSource:Bv,useSyncExternalStore:Wv,useId:nm,unstable_isNewReconciler:!1};function ef(t,e){try{var n="",r=e;do n+=__(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i}}function Iu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var G0=typeof WeakMap=="function"?WeakMap:Map;function lm(t,e,n){n=un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nl||(nl=!0,Fu=r),Iu(t,e)},n}function am(t,e,n){n=un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Iu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Iu(t,e),typeof r!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function oh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new G0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=sw.bind(null,t,e,n),e.then(t,t))}function lh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ah(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=un(-1,1),e.tag=2,Nn(n,e))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var um,Nu,cm,fm;um=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nu=function(){};cm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Kn(Jt.current);var s=null;switch(n){case"input":i=eu(t,i),r=eu(t,r),s=[];break;case"select":i=we({},i,{value:void 0}),r=we({},r,{value:void 0}),s=[];break;case"textarea":i=ru(t,i),r=ru(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vo)}su(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(as.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(as.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&de("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};fm=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ri(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Q0(t,e,n){var r=e.pendingProps;switch(Vc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(e),null;case 1:return dt(e.type)&&Ho(),Xe(e),null;case 3:return r=e.stateNode,Zr(),he(ft),he(et),Yc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ni(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,bt!==null&&(ju(bt),bt=null))),Nu(t,e),Xe(e),null;case 5:Qc(e);var i=Kn(ws.current);if(n=e.type,t!==null&&e.stateNode!=null)cm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(k(166));return Xe(e),null}if(t=Kn(Jt.current),Ni(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[qt]=e,r[ys]=s,t=(e.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(i=0;i<Ui.length;i++)de(Ui[i],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":Ed(r,s),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},de("invalid",r);break;case"textarea":Td(r,s),de("invalid",r)}su(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&so(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&so(r.textContent,l,t),i=["children",""+l]):as.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&de("scroll",r)}switch(n){case"input":Xs(r),Cd(r,s,!0);break;case"textarea":Xs(r),kd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Vo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Gp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[qt]=e,t[ys]=r,um(t,e,!1,!1),e.stateNode=t;e:{switch(o=ou(n,r),n){case"dialog":de("cancel",t),de("close",t),i=r;break;case"iframe":case"object":case"embed":de("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ui.length;i++)de(Ui[i],t);i=r;break;case"source":de("error",t),i=r;break;case"img":case"image":case"link":de("error",t),de("load",t),i=r;break;case"details":de("toggle",t),i=r;break;case"input":Ed(t,r),i=eu(t,r),de("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=we({},r,{value:void 0}),de("invalid",t);break;case"textarea":Td(t,r),i=ru(t,r),de("invalid",t);break;default:i=r}su(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Kp(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Qp(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&us(t,a):typeof a=="number"&&us(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(as.hasOwnProperty(s)?a!=null&&s==="onScroll"&&de("scroll",t):a!=null&&kc(t,s,a,o))}switch(n){case"input":Xs(t),Cd(t,r,!1);break;case"textarea":Xs(t),kd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Mn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?zr(t,!!r.multiple,s,!1):r.defaultValue!=null&&zr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Vo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xe(e),null;case 6:if(t&&e.stateNode!=null)fm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(k(166));if(n=Kn(ws.current),Kn(Jt.current),Ni(e)){if(r=e.stateNode,n=e.memoizedProps,r[qt]=e,(s=r.nodeValue!==n)&&(t=mt,t!==null))switch(t.tag){case 3:so(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&so(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qt]=e,e.stateNode=r}return Xe(e),null;case 13:if(he(ye),r=e.memoizedState,ge&&at!==null&&(e.mode&1)!==0&&(e.flags&128)===0){for(r=at;r;)r=sn(r.nextSibling);return Xr(),e.flags|=98560,e}if(r!==null&&r.dehydrated!==null){if(r=Ni(e),t===null){if(!r)throw Error(k(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(k(317));r[qt]=e}else Xr(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;return Xe(e),null}return bt!==null&&(ju(bt),bt=null),(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,n=!1,t===null?Ni(e):n=t.memoizedState!==null,r!==n&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(ye.current&1)!==0?Me===0&&(Me=3):lf())),e.updateQueue!==null&&(e.flags|=4),Xe(e),null);case 4:return Zr(),Nu(t,e),t===null&&ms(e.stateNode.containerInfo),Xe(e),null;case 10:return Uc(e.type._context),Xe(e),null;case 17:return dt(e.type)&&Ho(),Xe(e),null;case 19:if(he(ye),s=e.memoizedState,s===null)return Xe(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ri(s,!1);else{if(Me!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=Jo(t),o!==null){for(e.flags|=128,Ri(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fe(ye,ye.current&1|2),e.child}t=t.sibling}s.tail!==null&&xe()>ei&&(e.flags|=128,r=!0,Ri(s,!1),e.lanes=4194304)}else{if(!r)if(t=Jo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ri(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ge)return Xe(e),null}else 2*xe()-s.renderingStartTime>ei&&n!==1073741824&&(e.flags|=128,r=!0,Ri(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=xe(),e.sibling=null,n=ye.current,fe(ye,r?n&1|2:n&1),e):(Xe(e),null);case 22:case 23:return of(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(vt&1073741824)!==0&&(Xe(e),e.subtreeFlags&6&&(e.flags|=8192)):Xe(e),null;case 24:return null;case 25:return null}throw Error(k(156,e.tag))}var Y0=vn.ReactCurrentOwner,ut=!1;function tt(t,e,n,r){e.child=t===null?$v(e,null,n,r):Jr(e,t.child,n,r)}function uh(t,e,n,r,i){n=n.render;var s=e.ref;return Br(e,i),r=qc(t,e,n,r,s,i),n=Xc(),t!==null&&!ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,hn(t,e,i)):(ge&&n&&Wc(e),e.flags|=1,tt(t,e,r,i),e.child)}function ch(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!af(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,dm(t,e,s,r,i)):(t=Oo(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:vs,n(o,r)&&t.ref===e.ref)return hn(t,e,i)}return e.flags|=1,t=Fn(s,r),t.ref=e.ref,t.return=e,e.child=t}function dm(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(vs(s,r)&&t.ref===e.ref)if(ut=!1,e.pendingProps=r=s,(t.lanes&i)!==0)(t.flags&131072)!==0&&(ut=!0);else return e.lanes=t.lanes,hn(t,e,i)}return Pu(t,e,n,r,i)}function hm(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(Fr,vt),vt|=n;else if((n&1073741824)!==0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,fe(Fr,vt),vt|=r;else return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fe(Fr,vt),vt|=t,null;else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,fe(Fr,vt),vt|=r;return tt(t,e,i,n),e.child}function pm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pu(t,e,n,r,i){var s=dt(n)?tr:et.current;return s=qr(e,s),Br(e,i),n=qc(t,e,n,r,s,i),r=Xc(),t!==null&&!ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,hn(t,e,i)):(ge&&r&&Wc(e),e.flags|=1,tt(t,e,n,i),e.child)}function fh(t,e,n,r,i){if(dt(n)){var s=!0;Go(e)}else s=!1;if(Br(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),Fv(e,n,r),Tu(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=It(u):(u=dt(n)?tr:et.current,u=qr(e,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&eh(e,o,r,u),yn=!1;var c=e.memoizedState;o.state=c,Ko(e,r,o,i),a=e.memoizedState,l!==r||c!==a||ft.current||yn?(typeof f=="function"&&(Cu(e,n,f,r),a=e.memoizedState),(l=yn||Zd(e,n,l,r,c,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Mv(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Dt(e.type,l),o.props=u,d=e.pendingProps,c=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=It(a):(a=dt(n)?tr:et.current,a=qr(e,a));var p=n.getDerivedStateFromProps;(f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||c!==a)&&eh(e,o,r,a),yn=!1,c=e.memoizedState,o.state=c,Ko(e,r,o,i);var m=e.memoizedState;l!==d||c!==m||ft.current||yn?(typeof p=="function"&&(Cu(e,n,p,r),m=e.memoizedState),(u=yn||Zd(e,n,u,r,c,m,a)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),r=!1)}return Ru(t,e,n,r,s,i)}function Ru(t,e,n,r,i,s){pm(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&qd(e,n,!1),hn(t,e,s);r=e.stateNode,Y0.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Jr(e,t.child,null,s),e.child=Jr(e,null,l,s)):tt(t,e,l,s),e.memoizedState=r.state,i&&qd(e,n,!0),e.child}function vm(t){var e=t.stateNode;e.pendingContext?Kd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kd(t,e.context,!1),Gc(t,e.containerInfo)}function dh(t,e,n,r,i){return Xr(),Hc(i),e.flags|=256,tt(t,e,n,r),e.child}var lo={dehydrated:null,treeContext:null,retryLane:0};function ao(t){return{baseLanes:t,cachePool:null,transitions:null}}function hh(t,e){return{baseLanes:t.baseLanes|e,cachePool:null,transitions:t.transitions}}function mm(t,e,n){var r=e.pendingProps,i=ye.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),fe(ye,i&1),t===null)return xu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=i):s=sl(i,r,0,null),t=Jn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ao(n),e.memoizedState=lo,t):Ou(e,i));if(i=t.memoizedState,i!==null){if(l=i.dehydrated,l!==null){if(o)return e.flags&256?(e.flags&=-257,uo(t,e,n,Error(k(422)))):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=sl({mode:"visible",children:r.children},i,0,null),s=Jn(s,i,n,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,(e.mode&1)!==0&&Jr(e,t.child,null,n),e.child.memoizedState=ao(n),e.memoizedState=lo,s);if((e.mode&1)===0)e=uo(t,e,n,null);else if(l.data==="$!")e=uo(t,e,n,Error(k(419)));else if(r=(n&t.childLanes)!==0,ut||r){if(r=Le,r!==null){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}r=(s&(r.suspendedLanes|n))!==0?0:s,r!==0&&r!==i.retryLane&&(i.retryLane=r,xt(t,r,-1))}lf(),e=uo(t,e,n,Error(k(421)))}else l.data==="$?"?(e.flags|=128,e.child=t.child,e=ow.bind(null,t),l._reactRetry=e,e=null):(n=i.treeContext,at=sn(l.nextSibling),mt=e,ge=!0,bt=null,n!==null&&(St[Et++]=on,St[Et++]=ln,St[Et++]=nr,on=n.id,ln=n.overflow,nr=e),e=Ou(e,e.pendingProps.children),e.flags|=4096);return e}return s?(r=vh(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?ao(n):hh(i,n),s.childLanes=t.childLanes&~n,e.memoizedState=lo,r):(n=ph(t,e,r.children,n),e.memoizedState=null,n)}return s?(r=vh(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?ao(n):hh(i,n),s.childLanes=t.childLanes&~n,e.memoizedState=lo,r):(n=ph(t,e,r.children,n),e.memoizedState=null,n)}function Ou(t,e){return e=sl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ph(t,e,n,r){var i=t.child;return t=i.sibling,n=Fn(i,{mode:"visible",children:n}),(e.mode&1)===0&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n}function vh(t,e,n,r,i){var s=e.mode;t=t.child;var o=t.sibling,l={mode:"hidden",children:n};return(s&1)===0&&e.child!==t?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Fn(t,l),n.subtreeFlags=t.subtreeFlags&14680064),o!==null?r=Fn(o,r):(r=Jn(r,s,i,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,r}function uo(t,e,n,r){return r!==null&&Hc(r),Jr(e,t.child,null,n),t=Ou(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Eu(t.return,e,n)}function Da(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function gm(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(tt(t,e,r.children,n),r=ye.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mh(t,n,e);else if(t.tag===19)mh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fe(ye,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Jo(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Da(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Jo(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Da(e,!0,n,null,s);break;case"together":Da(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ir|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(k(153));if(e.child!==null){for(t=e.child,n=Fn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function K0(t,e,n){switch(e.tag){case 3:vm(e),Xr();break;case 5:Uv(e);break;case 1:dt(e.type)&&Go(e);break;case 4:Gc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;fe(Qo,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fe(ye,ye.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?mm(t,e,n):(fe(ye,ye.current&1),t=hn(t,e,n),t!==null?t.sibling:null);fe(ye,ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return gm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),fe(ye,ye.current),r)break;return null;case 22:case 23:return e.lanes=0,hm(t,e,n)}return hn(t,e,n)}function q0(t,e){switch(Vc(e),e.tag){case 1:return dt(e.type)&&Ho(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zr(),he(ft),he(et),Yc(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Qc(e),null;case 13:if(he(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(k(340));Xr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return he(ye),null;case 4:return Zr(),null;case 10:return Uc(e.type._context),null;case 22:case 23:return of(),null;case 24:return null;default:return null}}var co=!1,Ze=!1,X0=typeof WeakSet=="function"?WeakSet:Set,O=null;function Lr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function Au(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var gh=!1;function J0(t,e){if(mu=Uo,t=Cv(),zc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,f=0,d=t,c=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)c=d,d=p;for(;;){if(d===t)break t;if(c===n&&++u===i&&(l=o),c===s&&++f===r&&(a=o),(p=d.nextSibling)!==null)break;d=c,c=d.parentNode}d=p}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(gu={focusedElem:t,selectionRange:n},Uo=!1,O=e;O!==null;)if(e=O,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,O=t;else for(;O!==null;){e=O;try{var m=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var _=m.memoizedProps,S=m.memoizedState,v=e.stateNode,h=v.getSnapshotBeforeUpdate(e.elementType===e.type?_:Dt(e.type,_),S);v.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var g=e.stateNode.containerInfo;if(g.nodeType===1)g.textContent="";else if(g.nodeType===9){var w=g.body;w!=null&&(w.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(k(163))}}catch(T){Ce(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,O=t;break}O=e.return}return m=gh,gh=!1,m}function Ji(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Au(e,n,s)}i=i.next}while(i!==r)}}function zl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Du(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ym(t){var e=t.alternate;e!==null&&(t.alternate=null,ym(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qt],delete e[ys],delete e[wu],delete e[L0],delete e[F0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _m(t){return t.tag===5||t.tag===3||t.tag===4}function yh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_m(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vo));else if(r!==4&&(t=t.child,t!==null))for(Mu(t,e,n),t=t.sibling;t!==null;)Mu(t,e,n),t=t.sibling}function Lu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lu(t,e,n),t=t.sibling;t!==null;)Lu(t,e,n),t=t.sibling}var We=null,Ft=!1;function mn(t,e,n){for(n=n.child;n!==null;)wm(t,e,n),n=n.sibling}function wm(t,e,n){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(Rl,n)}catch{}switch(n.tag){case 5:Ze||Lr(n,e);case 6:var r=We,i=Ft;We=null,mn(t,e,n),We=r,Ft=i,We!==null&&(Ft?(t=We,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):We.removeChild(n.stateNode));break;case 18:We!==null&&(Ft?(t=We,n=n.stateNode,t.nodeType===8?Ia(t.parentNode,n):t.nodeType===1&&Ia(t,n),hs(t)):Ia(We,n.stateNode));break;case 4:r=We,i=Ft,We=n.stateNode.containerInfo,Ft=!0,mn(t,e,n),We=r,Ft=i;break;case 0:case 11:case 14:case 15:if(!Ze&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&Au(n,e,o),i=i.next}while(i!==r)}mn(t,e,n);break;case 1:if(!Ze&&(Lr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ce(n,e,l)}mn(t,e,n);break;case 21:mn(t,e,n);break;case 22:n.mode&1?(Ze=(r=Ze)||n.memoizedState!==null,mn(t,e,n),Ze=r):mn(t,e,n);break;default:mn(t,e,n)}}function _h(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new X0),e.forEach(function(r){var i=lw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function At(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:We=l.stateNode,Ft=!1;break e;case 3:We=l.stateNode.containerInfo,Ft=!0;break e;case 4:We=l.stateNode.containerInfo,Ft=!0;break e}l=l.return}if(We===null)throw Error(k(160));wm(s,o,i),We=null,Ft=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){Ce(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Sm(e,t),e=e.sibling}function Sm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(At(e,t),Qt(t),r&4){try{Ji(3,t,t.return),zl(3,t)}catch(m){Ce(t,t.return,m)}try{Ji(5,t,t.return)}catch(m){Ce(t,t.return,m)}}break;case 1:At(e,t),Qt(t),r&512&&n!==null&&Lr(n,n.return);break;case 5:if(At(e,t),Qt(t),r&512&&n!==null&&Lr(n,n.return),t.flags&32){var i=t.stateNode;try{us(i,"")}catch(m){Ce(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Vp(i,s),ou(l,o);var u=ou(l,s);for(o=0;o<a.length;o+=2){var f=a[o],d=a[o+1];f==="style"?Kp(i,d):f==="dangerouslySetInnerHTML"?Qp(i,d):f==="children"?us(i,d):kc(i,f,d,u)}switch(l){case"input":tu(i,s);break;case"textarea":Hp(i,s);break;case"select":var c=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?zr(i,!!s.multiple,p,!1):c!==!!s.multiple&&(s.defaultValue!=null?zr(i,!!s.multiple,s.defaultValue,!0):zr(i,!!s.multiple,s.multiple?[]:"",!1))}i[ys]=s}catch(m){Ce(t,t.return,m)}}break;case 6:if(At(e,t),Qt(t),r&4){if(t.stateNode===null)throw Error(k(162));u=t.stateNode,f=t.memoizedProps;try{u.nodeValue=f}catch(m){Ce(t,t.return,m)}}break;case 3:if(At(e,t),Qt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hs(e.containerInfo)}catch(m){Ce(t,t.return,m)}break;case 4:At(e,t),Qt(t);break;case 13:At(e,t),Qt(t),u=t.child,u.flags&8192&&u.memoizedState!==null&&(u.alternate===null||u.alternate.memoizedState===null)&&(rf=xe()),r&4&&_h(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ze=(f=Ze)||u,At(e,t),Ze=f):At(e,t),Qt(t),r&8192){f=t.memoizedState!==null;e:for(d=null,c=t;;){if(c.tag===5){if(d===null){d=c;try{i=c.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=c.stateNode,a=c.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Yp("display",o))}catch(m){Ce(t,t.return,m)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=f?"":c.memoizedProps}catch(m){Ce(t,t.return,m)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}if(f&&!u&&(t.mode&1)!==0)for(O=t,t=t.child;t!==null;){for(u=O=t;O!==null;){switch(f=O,d=f.child,f.tag){case 0:case 11:case 14:case 15:Ji(4,f,f.return);break;case 1:if(Lr(f,f.return),s=f.stateNode,typeof s.componentWillUnmount=="function"){c=f,p=f.return;try{i=c,s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(m){Ce(c,p,m)}}break;case 5:Lr(f,f.return);break;case 22:if(f.memoizedState!==null){Sh(u);continue}}d!==null?(d.return=f,O=d):Sh(u)}t=t.sibling}}break;case 19:At(e,t),Qt(t),r&4&&_h(t);break;case 21:break;default:At(e,t),Qt(t)}}function Qt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_m(n)){var r=n;break e}n=n.return}throw Error(k(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(us(i,""),r.flags&=-33);var s=yh(t);Lu(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=yh(t);Mu(t,l,o);break;default:throw Error(k(161))}}catch(a){Ce(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Z0(t,e,n){O=t,Em(t)}function Em(t,e,n){for(var r=(t.mode&1)!==0;O!==null;){var i=O,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||co;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Ze;l=co;var u=Ze;if(co=o,(Ze=a)&&!u)for(O=i;O!==null;)o=O,a=o.child,o.tag===22&&o.memoizedState!==null?Eh(i):a!==null?(a.return=o,O=a):Eh(i);for(;s!==null;)O=s,Em(s),s=s.sibling;O=i,co=l,Ze=u}wh(t)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,O=s):wh(t)}}function wh(t){for(;O!==null;){var e=O;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Ze||zl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ze)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Dt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Jd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Jd(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&hs(d)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(k(163))}Ze||e.flags&512&&Du(e)}catch(c){Ce(e,e.return,c)}}if(e===t){O=null;break}if(n=e.sibling,n!==null){n.return=e.return,O=n;break}O=e.return}}function Sh(t){for(;O!==null;){var e=O;if(e===t){O=null;break}var n=e.sibling;if(n!==null){n.return=e.return,O=n;break}O=e.return}}function Eh(t){for(;O!==null;){var e=O;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zl(4,e)}catch(a){Ce(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Ce(e,i,a)}}var s=e.return;try{Du(e)}catch(a){Ce(e,s,a)}break;case 5:var o=e.return;try{Du(e)}catch(a){Ce(e,o,a)}}}catch(a){Ce(e,e.return,a)}if(e===t){O=null;break}var l=e.sibling;if(l!==null){l.return=e.return,O=l;break}O=e.return}}var ew=Math.ceil,tl=vn.ReactCurrentDispatcher,tf=vn.ReactCurrentOwner,kt=vn.ReactCurrentBatchConfig,q=0,Le=null,Pe=null,Ge=0,vt=0,Fr=Un(0),Me=0,Ts=null,ir=0,jl=0,nf=0,Zi=null,lt=null,rf=0,ei=1/0,nn=null,nl=!1,Fu=null,Pn=null,fo=!1,Cn=null,rl=0,es=0,bu=null,Po=-1,Ro=0;function rt(){return(q&6)!==0?xe():Po!==-1?Po:Po=xe()}function Rn(t){return(t.mode&1)===0?1:(q&2)!==0&&Ge!==0?Ge&-Ge:z0.transition!==null?(Ro===0&&(Ro=lv()),Ro):(t=te,t!==0||(t=window.event,t=t===void 0?16:pv(t.type)),t)}function xt(t,e,n){if(50<es)throw es=0,bu=null,Error(k(185));var r=$l(t,e);return r===null?null:(bs(r,e,n),((q&2)===0||r!==Le)&&(r===Le&&((q&2)===0&&(jl|=e),Me===4&&wn(r,Ge)),ht(r,n),e===1&&q===0&&(t.mode&1)===0&&(ei=xe()+500,Ll&&Bn())),r)}function $l(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}function Cm(t){return(Le!==null||jt!==null)&&(t.mode&1)!==0&&(q&2)===0}function ht(t,e){var n=t.callbackNode;z_(t,e);var r=$o(t,t===Le?Ge:0);if(r===0)n!==null&&Nd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Nd(n),e===1)t.tag===0?b0(Ch.bind(null,t)):Dv(Ch.bind(null,t)),D0(function(){q===0&&Bn()}),n=null;else{switch(av(r)){case 1:n=Rc;break;case 4:n=sv;break;case 16:n=jo;break;case 536870912:n=ov;break;default:n=jo}n=Om(n,Tm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Tm(t,e){if(Po=-1,Ro=0,(q&6)!==0)throw Error(k(327));var n=t.callbackNode;if(Wr()&&t.callbackNode!==n)return null;var r=$o(t,t===Le?Ge:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=il(t,r);else{e=r;var i=q;q|=2;var s=xm();(Le!==t||Ge!==e)&&(nn=null,ei=xe()+500,Xn(t,e));do try{rw();break}catch(l){km(t,l)}while(1);$c(),tl.current=s,q=i,Pe!==null?e=0:(Le=null,Ge=0,e=Me)}if(e!==0){if(e===2&&(i=fu(t),i!==0&&(r=i,e=zu(t,i))),e===1)throw n=Ts,Xn(t,0),wn(t,r),ht(t,xe()),n;if(e===6)wn(t,r);else{if(i=t.current.alternate,(r&30)===0&&!tw(i)&&(e=il(t,r),e===2&&(s=fu(t),s!==0&&(r=s,e=zu(t,s))),e===1))throw n=Ts,Xn(t,0),wn(t,r),ht(t,xe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(k(345));case 2:Hn(t,lt,nn);break;case 3:if(wn(t,r),(r&130023424)===r&&(e=rf+500-xe(),10<e)){if($o(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){rt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_u(Hn.bind(null,t,lt,nn),e);break}Hn(t,lt,nn);break;case 4:if(wn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ut(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ew(r/1960))-r,10<r){t.timeoutHandle=_u(Hn.bind(null,t,lt,nn),r);break}Hn(t,lt,nn);break;case 5:Hn(t,lt,nn);break;default:throw Error(k(329))}}}return ht(t,xe()),t.callbackNode===n?Tm.bind(null,t):null}function zu(t,e){var n=Zi;return t.current.memoizedState.isDehydrated&&(Xn(t,e).flags|=256),t=il(t,e),t!==2&&(e=lt,lt=n,e!==null&&ju(e)),t}function ju(t){lt===null?lt=t:lt.push.apply(lt,t)}function tw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Wt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wn(t,e){for(e&=~nf,e&=~jl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ut(e),r=1<<n;t[n]=-1,e&=~r}}function Ch(t){if((q&6)!==0)throw Error(k(327));Wr();var e=$o(t,0);if((e&1)===0)return ht(t,xe()),null;var n=il(t,e);if(t.tag!==0&&n===2){var r=fu(t);r!==0&&(e=r,n=zu(t,r))}if(n===1)throw n=Ts,Xn(t,0),wn(t,e),ht(t,xe()),n;if(n===6)throw Error(k(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hn(t,lt,nn),ht(t,xe()),null}function sf(t,e){var n=q;q|=1;try{return t(e)}finally{q=n,q===0&&(ei=xe()+500,Ll&&Bn())}}function sr(t){Cn!==null&&Cn.tag===0&&(q&6)===0&&Wr();var e=q;q|=1;var n=kt.transition,r=te;try{if(kt.transition=null,te=1,t)return t()}finally{te=r,kt.transition=n,q=e,(q&6)===0&&Bn()}}function of(){vt=Fr.current,he(Fr)}function Xn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,A0(n)),Pe!==null)for(n=Pe.return;n!==null;){var r=n;switch(Vc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ho();break;case 3:Zr(),he(ft),he(et),Yc();break;case 5:Qc(r);break;case 4:Zr();break;case 13:he(ye);break;case 19:he(ye);break;case 10:Uc(r.type._context);break;case 22:case 23:of()}n=n.return}if(Le=t,Pe=t=Fn(t.current,null),Ge=vt=e,Me=0,Ts=null,nf=jl=ir=0,lt=Zi=null,jt!==null){for(e=0;e<jt.length;e++)if(n=jt[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}jt=null}return t}function km(t,e){do{var n=Pe;try{if($c(),Io.current=el,Zo){for(var r=_e.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Zo=!1}if(rr=0,ze=Oe=_e=null,Xi=!1,Ss=0,tf.current=null,n===null||n.return===null){Me=1,Ts=e,Pe=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Ge,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,f=l,d=f.tag;if((f.mode&1)===0&&(d===0||d===11||d===15)){var c=f.alternate;c?(f.updateQueue=c.updateQueue,f.memoizedState=c.memoizedState,f.lanes=c.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=lh(o);if(p!==null){p.flags&=-257,ah(p,o,l,s,e),p.mode&1&&oh(s,u,e),e=p,a=u;var m=e.updateQueue;if(m===null){var _=new Set;_.add(a),e.updateQueue=_}else m.add(a);break e}else{if((e&1)===0){oh(s,u,e),lf();break e}a=Error(k(426))}}else if(ge&&l.mode&1){var S=lh(o);if(S!==null){(S.flags&65536)===0&&(S.flags|=256),ah(S,o,l,s,e),Hc(a);break e}}s=a,Me!==4&&(Me=2),Zi===null?Zi=[s]:Zi.push(s),a=ef(a,l),l=o;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var v=lm(l,a,e);Xd(l,v);break e;case 1:s=a;var h=l.type,g=l.stateNode;if((l.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Pn===null||!Pn.has(g)))){l.flags|=65536,e&=-e,l.lanes|=e;var w=am(l,s,e);Xd(l,w);break e}}l=l.return}while(l!==null)}Nm(n)}catch(T){e=T,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(1)}function xm(){var t=tl.current;return tl.current=el,t===null?el:t}function lf(){(Me===0||Me===3||Me===2)&&(Me=4),Le===null||(ir&268435455)===0&&(jl&268435455)===0||wn(Le,Ge)}function il(t,e){var n=q;q|=2;var r=xm();(Le!==t||Ge!==e)&&(nn=null,Xn(t,e));do try{nw();break}catch(i){km(t,i)}while(1);if($c(),q=n,tl.current=r,Pe!==null)throw Error(k(261));return Le=null,Ge=0,Me}function nw(){for(;Pe!==null;)Im(Pe)}function rw(){for(;Pe!==null&&!P_();)Im(Pe)}function Im(t){var e=Rm(t.alternate,t,vt);t.memoizedProps=t.pendingProps,e===null?Nm(t):Pe=e,tf.current=null}function Nm(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=Q0(n,e,vt),n!==null){Pe=n;return}}else{if(n=q0(n,e),n!==null){n.flags&=32767,Pe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Me=6,Pe=null;return}}if(e=e.sibling,e!==null){Pe=e;return}Pe=e=t}while(e!==null);Me===0&&(Me=5)}function Hn(t,e,n){var r=te,i=kt.transition;try{kt.transition=null,te=1,iw(t,e,n,r)}finally{kt.transition=i,te=r}return null}function iw(t,e,n,r){do Wr();while(Cn!==null);if((q&6)!==0)throw Error(k(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(k(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(j_(t,s),t===Le&&(Pe=Le=null,Ge=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||fo||(fo=!0,Om(jo,function(){return Wr(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=kt.transition,kt.transition=null;var o=te;te=1;var l=q;q|=4,tf.current=null,J0(t,n),Sm(n,t),k0(gu),Uo=!!mu,gu=mu=null,t.current=n,Z0(n),R_(),q=l,te=o,kt.transition=s}else t.current=n;if(fo&&(fo=!1,Cn=t,rl=i),s=t.pendingLanes,s===0&&(Pn=null),D_(n.stateNode),ht(t,xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)r(e[n]);if(nl)throw nl=!1,t=Fu,Fu=null,t;return(rl&1)!==0&&t.tag!==0&&Wr(),s=t.pendingLanes,(s&1)!==0?t===bu?es++:(es=0,bu=t):es=0,Bn(),null}function Wr(){if(Cn!==null){var t=av(rl),e=kt.transition,n=te;try{if(kt.transition=null,te=16>t?16:t,Cn===null)var r=!1;else{if(t=Cn,Cn=null,rl=0,(q&6)!==0)throw Error(k(331));var i=q;for(q|=4,O=t.current;O!==null;){var s=O,o=s.child;if((O.flags&16)!==0){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(O=u;O!==null;){var f=O;switch(f.tag){case 0:case 11:case 15:Ji(8,f,s)}var d=f.child;if(d!==null)d.return=f,O=d;else for(;O!==null;){f=O;var c=f.sibling,p=f.return;if(ym(f),f===u){O=null;break}if(c!==null){c.return=p,O=c;break}O=p}}}var m=s.alternate;if(m!==null){var _=m.child;if(_!==null){m.child=null;do{var S=_.sibling;_.sibling=null,_=S}while(_!==null)}}O=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,O=o;else e:for(;O!==null;){if(s=O,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Ji(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,O=v;break e}O=s.return}}var h=t.current;for(O=h;O!==null;){o=O;var g=o.child;if((o.subtreeFlags&2064)!==0&&g!==null)g.return=o,O=g;else e:for(o=h;O!==null;){if(l=O,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:zl(9,l)}}catch(T){Ce(l,l.return,T)}if(l===o){O=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,O=w;break e}O=l.return}}if(q=i,Bn(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(Rl,t)}catch{}r=!0}return r}finally{te=n,kt.transition=e}}return!1}function Th(t,e,n){e=ef(n,e),e=lm(t,e,1),Nn(t,e),e=rt(),t=$l(t,1),t!==null&&(bs(t,1,e),ht(t,e))}function Ce(t,e,n){if(t.tag===3)Th(t,t,n);else for(;e!==null;){if(e.tag===3){Th(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pn===null||!Pn.has(r))){t=ef(n,t),t=am(e,t,1),Nn(e,t),t=rt(),e=$l(e,1),e!==null&&(bs(e,1,t),ht(e,t));break}}e=e.return}}function sw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rt(),t.pingedLanes|=t.suspendedLanes&n,Le===t&&(Ge&n)===n&&(Me===4||Me===3&&(Ge&130023424)===Ge&&500>xe()-rf?Xn(t,0):nf|=n),ht(t,e)}function Pm(t,e){e===0&&((t.mode&1)===0?e=1:(e=eo,eo<<=1,(eo&130023424)===0&&(eo=4194304)));var n=rt();t=$l(t,e),t!==null&&(bs(t,e,n),ht(t,n))}function ow(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Pm(t,n)}function lw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(k(314))}r!==null&&r.delete(e),Pm(t,n)}var Rm;Rm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ft.current)ut=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return ut=!1,K0(t,e,n);ut=(t.flags&131072)!==0}else ut=!1,ge&&(e.flags&1048576)!==0&&bv(e,Xo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps;var i=qr(e,et.current);Br(e,n),i=qc(null,e,r,t,i,n);var s=Xc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dt(r)?(s=!0,Go(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Bc(e),i.updater=Fl,e.stateNode=i,i._reactInternals=e,Tu(e,r,t,n),e=Ru(null,e,r,!0,s,n)):(e.tag=0,ge&&s&&Wc(e),tt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=uw(r),t=Dt(r,t),i){case 0:e=Pu(null,e,r,t,n);break e;case 1:e=fh(null,e,r,t,n);break e;case 11:e=uh(null,e,r,t,n);break e;case 14:e=ch(null,e,r,Dt(r.type,t),n);break e}throw Error(k(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dt(r,i),Pu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dt(r,i),fh(t,e,r,i,n);case 3:e:{if(vm(e),t===null)throw Error(k(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Mv(t,e),Ko(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Error(k(423)),e=dh(t,e,r,n,i);break e}else if(r!==i){i=Error(k(424)),e=dh(t,e,r,n,i);break e}else for(at=sn(e.stateNode.containerInfo.firstChild),mt=e,ge=!0,bt=null,n=$v(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xr(),r===i){e=hn(t,e,n);break e}tt(t,e,r,n)}e=e.child}return e;case 5:return Uv(e),t===null&&xu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,yu(r,i)?o=null:s!==null&&yu(r,s)&&(e.flags|=32),pm(t,e),tt(t,e,o,n),e.child;case 6:return t===null&&xu(e),null;case 13:return mm(t,e,n);case 4:return Gc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Jr(e,null,r,n):tt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dt(r,i),uh(t,e,r,i,n);case 7:return tt(t,e,e.pendingProps,n),e.child;case 8:return tt(t,e,e.pendingProps.children,n),e.child;case 12:return tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,fe(Qo,r._currentValue),r._currentValue=o,s!==null)if(Wt(s.value,o)){if(s.children===i.children&&!ft.current){e=hn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=un(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Eu(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(k(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Eu(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}tt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Br(e,n),i=It(i),r=r(i),e.flags|=1,tt(t,e,r,n),e.child;case 14:return r=e.type,i=Dt(r,e.pendingProps),i=Dt(r.type,i),ch(t,e,r,i,n);case 15:return dm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dt(r,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,dt(r)?(t=!0,Go(e)):t=!1,Br(e,n),Fv(e,r,i),Tu(e,r,i,n),Ru(null,e,r,!0,t,n);case 19:return gm(t,e,n);case 22:return hm(t,e,n)}throw Error(k(156,e.tag))};function Om(t,e){return iv(t,e)}function aw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(t,e,n,r){return new aw(t,e,n,r)}function af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uw(t){if(typeof t=="function")return af(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ic)return 11;if(t===Nc)return 14}return 2}function Fn(t,e){var n=t.alternate;return n===null?(n=Ct(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oo(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")af(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xr:return Jn(n.children,i,s,e);case xc:o=8,i|=8;break;case qa:return t=Ct(12,n,e,i|2),t.elementType=qa,t.lanes=s,t;case Xa:return t=Ct(13,n,e,i),t.elementType=Xa,t.lanes=s,t;case Ja:return t=Ct(19,n,e,i),t.elementType=Ja,t.lanes=s,t;case Up:return sl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jp:o=10;break e;case $p:o=9;break e;case Ic:o=11;break e;case Nc:o=14;break e;case gn:o=16,r=null;break e}throw Error(k(130,t==null?t:typeof t,""))}return e=Ct(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Jn(t,e,n,r){return t=Ct(7,t,r,e),t.lanes=n,t}function sl(t,e,n,r){return t=Ct(22,t,r,e),t.elementType=Up,t.lanes=n,t.stateNode={},t}function Ma(t,e,n){return t=Ct(6,t,null,e),t.lanes=n,t}function La(t,e,n){return e=Ct(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ma(0),this.expirationTimes=ma(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function uf(t,e,n,r,i,s,o,l,a){return t=new cw(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ct(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bc(s),t}function fw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Am(t){if(!t)return Ln;t=t._reactInternals;e:{if(dr(t)!==t||t.tag!==1)throw Error(k(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(k(171))}if(t.tag===1){var n=t.type;if(dt(n))return Av(t,n,e)}return e}function Dm(t,e,n,r,i,s,o,l,a){return t=uf(n,r,!0,t,i,s,o,l,a),t.context=Am(null),n=t.current,r=rt(),i=Rn(n),s=un(r,i),s.callback=e!=null?e:null,Nn(n,s),t.current.lanes=i,bs(t,i,r),ht(t,r),t}function Ul(t,e,n,r){var i=e.current,s=rt(),o=Rn(i);return n=Am(n),e.context===null?e.context=n:e.pendingContext=n,e=un(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),Nn(i,e),t=xt(i,o,s),t!==null&&xo(t,i,o),o}function ol(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cf(t,e){kh(t,e),(t=t.alternate)&&kh(t,e)}function dw(){return null}var Mm=typeof reportError=="function"?reportError:function(t){console.error(t)};function ff(t){this._internalRoot=t}Bl.prototype.render=ff.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(k(409));Ul(t,e,null,null)};Bl.prototype.unmount=ff.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;sr(function(){Ul(null,t,null,null)}),e[dn]=null}};function Bl(t){this._internalRoot=t}Bl.prototype.unstable_scheduleHydration=function(t){if(t){var e=fv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_n.length&&e!==0&&e<_n[n].priority;n++);_n.splice(n,0,t),n===0&&hv(t)}};function df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xh(){}function hw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ol(o);s.call(u)}}var o=Dm(e,r,t,0,null,!1,!1,"",xh);return t._reactRootContainer=o,t[dn]=o.current,ms(t.nodeType===8?t.parentNode:t),sr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=ol(a);l.call(u)}}var a=uf(t,0,!1,null,null,!1,!1,"",xh);return t._reactRootContainer=a,t[dn]=a.current,ms(t.nodeType===8?t.parentNode:t),sr(function(){Ul(e,a,n,r)}),a}function Vl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=ol(o);l.call(a)}}Ul(e,o,t,i)}else o=hw(n,e,t,i,r);return ol(o)}uv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$i(e.pendingLanes);n!==0&&(Oc(e,n|1),ht(e,xe()),(q&6)===0&&(ei=xe()+500,Bn()))}break;case 13:var r=rt();sr(function(){return xt(t,1,r)}),cf(t,1)}};Ac=function(t){if(t.tag===13){var e=rt();xt(t,134217728,e),cf(t,134217728)}};cv=function(t){if(t.tag===13){var e=rt(),n=Rn(t);xt(t,n,e),cf(t,n)}};fv=function(){return te};dv=function(t,e){var n=te;try{return te=t,e()}finally{te=n}};au=function(t,e,n){switch(e){case"input":if(tu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ml(r);if(!i)throw Error(k(90));Wp(r),tu(r,i)}}}break;case"textarea":Hp(t,n);break;case"select":e=n.value,e!=null&&zr(t,!!n.multiple,e,!1)}};Jp=sf;Zp=sr;var pw={usingClientEntryPoint:!1,Events:[js,Rr,Ml,qp,Xp,sf]},Oi={findFiberByHostInstance:Yn,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},vw={bundleType:Oi.bundleType,version:Oi.version,rendererPackageName:Oi.rendererPackageName,rendererConfig:Oi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nv(t),t===null?null:t.stateNode},findFiberByHostInstance:Oi.findFiberByHostInstance||dw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var ho=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ho.isDisabled&&ho.supportsFiber)try{Rl=ho.inject(vw),Xt=ho}catch{}}yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pw;yt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!df(e))throw Error(k(200));return fw(t,e,null,n)};yt.createRoot=function(t,e){if(!df(t))throw Error(k(299));var n=!1,r="",i=Mm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=uf(t,1,!1,null,null,n,!1,r,i),t[dn]=e.current,ms(t.nodeType===8?t.parentNode:t),new ff(e)};yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(k(188)):(t=Object.keys(t).join(","),Error(k(268,t)));return t=nv(e),t=t===null?null:t.stateNode,t};yt.flushSync=function(t){return sr(t)};yt.hydrate=function(t,e,n){if(!Wl(e))throw Error(k(200));return Vl(null,t,e,!0,n)};yt.hydrateRoot=function(t,e,n){if(!df(t))throw Error(k(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Mm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Dm(e,null,t,1,n!=null?n:null,i,!1,s,o),t[dn]=e.current,ms(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Bl(e)};yt.render=function(t,e,n){if(!Wl(e))throw Error(k(200));return Vl(null,t,e,!1,n)};yt.unmountComponentAtNode=function(t){if(!Wl(t))throw Error(k(40));return t._reactRootContainer?(sr(function(){Vl(null,null,t,!1,function(){t._reactRootContainer=null,t[dn]=null})}),!0):!1};yt.unstable_batchedUpdates=sf;yt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Wl(n))throw Error(k(200));if(t==null||t._reactInternals===void 0)throw Error(k(38));return Vl(t,e,n,!1,r)};yt.version="18.1.0-next-22edb9f77-20220426";function Lm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lm)}catch(t){console.error(t)}}Lm(),Mp.exports=yt;var Fm,mw=Mp.exports;Fm=mw.createRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x=function(t,e){if(!t)throw pi(e)},pi=function(t){return new Error("Firebase Database ("+bm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},gw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},hf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,f=s>>2,d=(s&3)<<4|l>>4;let c=(l&15)<<2|u>>6,p=u&63;a||(p=64,o||(c=64)),r.push(n[f],n[d],n[c],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||d==null)throw Error();const c=s<<2|l>>4;if(r.push(c),u!==64){const p=l<<4&240|u>>2;if(r.push(p),d!==64){const m=u<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},jm=function(t){const e=zm(t);return hf.encodeByteArray(e,!0)},ll=function(t){return jm(t).replace(/\./g,"")},Ih=function(t){try{return hf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t){return $m(void 0,t)}function $m(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!_w(n)||(t[n]=$m(t[n],e[n]));return t}function _w(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[ll(JSON.stringify(n)),ll(JSON.stringify(o)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Um(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sw())}function Ew(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bm(){return bm.NODE_ADMIN===!0}function Cw(){return typeof indexedDB=="object"}function Tw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="FirebaseError";class pf extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kw,Object.setPrototypeOf(this,pf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wm.prototype.create)}}class Wm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?xw(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new pf(i,l,r)}}function xw(t,e){return t.replace(Iw,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Iw=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t){return JSON.parse(t)}function De(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=ks(Ih(s[0])||""),n=ks(Ih(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},Nw=function(t){const e=Vm(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Pw=function(t){const e=Vm(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ti(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Nh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function al(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function $u(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ph(s)&&Ph(o)){if(!$u(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ph(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const c=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(c<<1|c>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,f;for(let d=0;d<80;d++){d<40?d<20?(u=l^s&(o^l),f=1518500249):(u=s^o^l,f=1859775393):d<60?(u=s&o|l&(s|o),f=2400959708):(u=s^o^l,f=3395469782);const c=(i<<5|i>>>27)+u+a+f+r[d]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=c}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Hl(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,x(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Gl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t){return t&&t._delegate?t._delegate:t}class xs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Us;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lw(e))try{this.getOrInitializeService({instanceIdentifier:Gn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Gn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gn){return this.instances.has(e)}getOptions(e=Gn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Mw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gn){return this.component?this.component.multipleInstances?e:Gn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mw(t){return t===Gn?void 0:t}function Lw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Dw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const bw={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},zw=ue.INFO,jw={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},$w=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=jw[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hm{constructor(e){this.name=e,this._logLevel=zw,this._logHandler=$w,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const Uw=(t,e)=>e.some(n=>t instanceof n);let Rh,Oh;function Bw(){return Rh||(Rh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ww(){return Oh||(Oh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gm=new WeakMap,Uu=new WeakMap,Qm=new WeakMap,Fa=new WeakMap,vf=new WeakMap;function Vw(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(On(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gm.set(n,t)}).catch(()=>{}),vf.set(e,t),e}function Hw(t){if(Uu.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Uu.set(t,e)}let Bu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Uu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return On(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Gw(t){Bu=t(Bu)}function Qw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ba(this),e,...n);return Qm.set(r,e.sort?e.sort():[e]),On(r)}:Ww().includes(t)?function(...e){return t.apply(ba(this),e),On(Gm.get(this))}:function(...e){return On(t.apply(ba(this),e))}}function Yw(t){return typeof t=="function"?Qw(t):(t instanceof IDBTransaction&&Hw(t),Uw(t,Bw())?new Proxy(t,Bu):t)}function On(t){if(t instanceof IDBRequest)return Vw(t);if(Fa.has(t))return Fa.get(t);const e=Yw(t);return e!==t&&(Fa.set(t,e),vf.set(e,t)),e}const ba=t=>vf.get(t);function Kw(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}){const o=indexedDB.open(t,e),l=On(o);return r&&o.addEventListener("upgradeneeded",a=>{r(On(o.result),a.oldVersion,a.newVersion,On(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",()=>i())}).catch(()=>{}),l}const qw=["get","getKey","getAll","getAllKeys","count"],Xw=["put","add","delete","clear"],za=new Map;function Ah(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(za.get(e))return za.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Xw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qw.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return za.set(e,s),s}Gw(t=>Ot(Rt({},t),{get:(e,n,r)=>Ah(e,n)||t.get(e,n,r),has:(e,n)=>!!Ah(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Zw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Zw(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wu="@firebase/app",Dh="0.7.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=new Hm("@firebase/app"),eS="@firebase/app-compat",tS="@firebase/analytics-compat",nS="@firebase/analytics",rS="@firebase/app-check-compat",iS="@firebase/app-check",sS="@firebase/auth",oS="@firebase/auth-compat",lS="@firebase/database",aS="@firebase/database-compat",uS="@firebase/functions",cS="@firebase/functions-compat",fS="@firebase/installations",dS="@firebase/installations-compat",hS="@firebase/messaging",pS="@firebase/messaging-compat",vS="@firebase/performance",mS="@firebase/performance-compat",gS="@firebase/remote-config",yS="@firebase/remote-config-compat",_S="@firebase/storage",wS="@firebase/storage-compat",SS="@firebase/firestore",ES="@firebase/firestore-compat",CS="firebase",TS="9.8.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="[DEFAULT]",kS={[Wu]:"fire-core",[eS]:"fire-core-compat",[nS]:"fire-analytics",[tS]:"fire-analytics-compat",[iS]:"fire-app-check",[rS]:"fire-app-check-compat",[sS]:"fire-auth",[oS]:"fire-auth-compat",[lS]:"fire-rtdb",[aS]:"fire-rtdb-compat",[uS]:"fire-fn",[cS]:"fire-fn-compat",[fS]:"fire-iid",[dS]:"fire-iid-compat",[hS]:"fire-fcm",[pS]:"fire-fcm-compat",[vS]:"fire-perf",[mS]:"fire-perf-compat",[gS]:"fire-rc",[yS]:"fire-rc-compat",[_S]:"fire-gcs",[wS]:"fire-gcs-compat",[SS]:"fire-fst",[ES]:"fire-fst-compat","fire-js":"fire-js",[CS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=new Map,Vu=new Map;function xS(t,e){try{t.container.addComponent(e)}catch(n){mf.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cl(t){const e=t.name;if(Vu.has(e))return mf.debug(`There were multiple attempts to register component ${e}.`),!1;Vu.set(e,t);for(const n of ul.values())xS(n,t);return!0}function IS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},or=new Wm("app","Firebase",NS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=TS;function OS(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:Ym,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw or.create("bad-app-name",{appName:String(r)});const i=ul.get(r);if(i){if($u(t,i.options)&&$u(n,i.config))return i;throw or.create("duplicate-app",{appName:r})}const s=new Fw(r);for(const l of Vu.values())s.addComponent(l);const o=new PS(t,n,s);return ul.set(r,o),o}function AS(t=Ym){const e=ul.get(t);if(!e)throw or.create("no-app",{appName:t});return e}function Vr(t,e,n){var r;let i=(r=kS[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mf.warn(l.join(" "));return}cl(new xs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="firebase-heartbeat-database",MS=1,Is="firebase-heartbeat-store";let ja=null;function Km(){return ja||(ja=Kw(DS,MS,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Is)}}}).catch(t=>{throw or.create("storage-open",{originalErrorMessage:t.message})})),ja}async function LS(t){try{return(await Km()).transaction(Is).objectStore(Is).get(qm(t))}catch(e){throw or.create("storage-get",{originalErrorMessage:e.message})}}async function Mh(t,e){try{const r=(await Km()).transaction(Is,"readwrite");return await r.objectStore(Is).put(e,qm(t)),r.done}catch(n){throw or.create("storage-set",{originalErrorMessage:n.message})}}function qm(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=1024,bS=30*24*60*60*1e3;class zS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $S(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Lh();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=bS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Lh(),{heartbeatsToSend:n,unsentEntries:r}=jS(this._heartbeatsCache.heartbeats),i=ll(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Lh(){return new Date().toISOString().substring(0,10)}function jS(t,e=FS){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Fh(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Fh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $S{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cw()?Tw().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await LS(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Mh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Mh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Fh(t){return ll(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){cl(new xs("platform-logger",e=>new Jw(e),"PRIVATE")),cl(new xs("heartbeat",e=>new zS(e),"PRIVATE")),Vr(Wu,Dh,t),Vr(Wu,Dh,"esm2017"),Vr("fire-js","")}US("");var BS="firebase",WS="9.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(BS,WS,"app");const bh="@firebase/database",zh="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xm="";function VS(t){Xm=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),De(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ks(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Zt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=function(t){try{if(typeof window!="undefined"&&typeof window[t]!="undefined"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new HS(e)}}catch{}return new GS},qn=Jm("localStorage"),Hu=Jm("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new Hm("@firebase/database"),QS=function(){let t=1;return function(){return t++}}(),Zm=function(t){const e=Aw(t),n=new Ow;n.update(e);const r=n.digest();return hf.encodeByteArray(r)},Bs=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Bs.apply(null,r):typeof r=="object"?e+=De(r):e+=r,e+=" "}return e};let Zn=null,jh=!0;const YS=function(t,e){x(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Hr.logLevel=ue.VERBOSE,Zn=Hr.log.bind(Hr),e&&Hu.set("logging_enabled",!0)):typeof t=="function"?Zn=t:(Zn=null,Hu.remove("logging_enabled"))},He=function(...t){if(jh===!0&&(jh=!1,Zn===null&&Hu.get("logging_enabled")===!0&&YS(!0)),Zn){const e=Bs.apply(null,t);Zn(e)}},Ws=function(t){return function(...e){He(t,...e)}},Gu=function(...t){const e="FIREBASE INTERNAL ERROR: "+Bs(...t);Hr.error(e)},pn=function(...t){const e=`FIREBASE FATAL ERROR: ${Bs(...t)}`;throw Hr.error(e),new Error(e)},it=function(...t){const e="FIREBASE WARNING: "+Bs(...t);Hr.warn(e)},KS=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&it("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},gf=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},qS=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ni="[MIN_NAME]",lr="[MAX_NAME]",pr=function(t,e){if(t===e)return 0;if(t===ni||e===lr)return-1;if(e===ni||t===lr)return 1;{const n=$h(t),r=$h(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},XS=function(t,e){return t===e?0:t<e?-1:1},Ai=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+De(e))},yf=function(t){if(typeof t!="object"||t===null)return De(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=De(e[r]),n+=":",n+=yf(t[e[r]]);return n+="}",n},eg=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Ye(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const tg=function(t){x(!gf(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const f=u.join("");let d="";for(a=0;a<64;a+=8){let c=parseInt(f.substr(a,8),2).toString(16);c.length===1&&(c="0"+c),d=d+c}return d.toLowerCase()},JS=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ZS=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function eE(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const tE=new RegExp("^-?(0*)\\d{1,10}$"),nE=-2147483648,rE=2147483647,$h=function(t){if(tE.test(t)){const e=Number(t);if(e>=nE&&e<=rE)return e}return null},vi=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw it("Exception was thrown by user callback.",n),e},Math.floor(0))}},iE=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ts=function(t,e){const n=setTimeout(t,e);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){it(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(He("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',it(e)}}class Gr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Gr.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="5",ng="v",rg="s",ig="r",sg="f",og=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lg="ls",ag="p",Qu="ac",ug="websocket",cg="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,r,i,s=!1,o="",l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function lE(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function dg(t,e,n){x(typeof e=="string","typeof type must == string"),x(typeof n=="object","typeof params must == object");let r;if(e===ug)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===cg)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);lE(t)&&(n.ns=t.namespace);const i=[];return Ye(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.counters_={}}incrementCounter(e,n=1){Zt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return yw(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a={},Ua={};function wf(t){const e=t.toString();return $a[e]||($a[e]=new aE),$a[e]}function uE(t,e){const n=t.toString();return Ua[n]||(Ua[n]=e()),Ua[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&vi(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="start",fE="close",dE="pLPCommand",hE="pRTLPCB",hg="id",pg="pw",vg="ser",pE="cb",vE="seg",mE="ts",gE="d",yE="dframe",mg=1870,gg=30,_E=mg-gg,wE=25e3,SE=3e4;class br{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ws(e),this.stats_=wf(n),this.urlFn=a=>(this.appCheckToken&&(a[Qu]=this.appCheckToken),dg(n,cg,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new cE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(SE)),qS(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Sf((...s)=>{const[o,l,a,u,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Uh)this.id=l,this.password=a;else if(o===fE)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Uh]="t",r[vg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[pE]=this.scriptTagHolder.uniqueCallbackIdentifier),r[ng]=_f,this.transportSessionId&&(r[rg]=this.transportSessionId),this.lastSessionId&&(r[lg]=this.lastSessionId),this.applicationId&&(r[ag]=this.applicationId),this.appCheckToken&&(r[Qu]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&og.test(location.hostname)&&(r[ig]=sg);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){br.forceAllow_=!0}static forceDisallow(){br.forceDisallow_=!0}static isAvailable(){return br.forceAllow_?!0:!br.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!JS()&&!ZS()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=De(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=jm(n),i=eg(r,_E);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[yE]="t",r[hg]=e,r[pg]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=De(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Sf{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=QS(),window[dE+this.uniqueCallbackIdentifier]=e,window[hE+this.uniqueCallbackIdentifier]=n,this.myIFrame=Sf.createIFrame_();let s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){const l=document.domain;s='<script>document.domain="'+l+'";<\/script>'}const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){He("frame writing exception"),l.stack&&He(l.stack),He(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||He("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[hg]=this.myID,e[pg]=this.myPW,e[vg]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gg+r.length<=mg;){const o=this.pendingSegs.shift();r=r+"&"+vE+i+"="+o.seg+"&"+mE+i+"="+o.ts+"&"+gE+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(wE)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{He("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=16384,CE=45e3;let fl=null;typeof MozWebSocket!="undefined"?fl=MozWebSocket:typeof WebSocket!="undefined"&&(fl=WebSocket);class zt{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ws(this.connId),this.stats_=wf(n),this.connURL=zt.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[ng]=_f,typeof location!="undefined"&&location.hostname&&og.test(location.hostname)&&(o[ig]=sg),n&&(o[rg]=n),r&&(o[lg]=r),i&&(o[Qu]=i),s&&(o[ag]=s),dg(e,ug,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qn.set("previous_websocket_failure",!0);try{let r;Bm(),this.mySock=new fl(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){zt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&fl!==null&&!zt.forceDisallow_}static previouslyFailed(){return qn.isInMemoryStorage||qn.get("previous_websocket_failure")===!0}markConnectionHealthy(){qn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=ks(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(x(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=De(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=eg(n,EE);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(CE))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}zt.responsesRequiredToBeHealthy=2;zt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[br,zt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=zt&&zt.isAvailable();let r=n&&!zt.previouslyFailed();if(e.webSocketOnly&&(n||it("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[zt];else{const i=this.transports_=[];for(const s of Ns.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Ns.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ns.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=6e4,kE=5e3,xE=10*1024,IE=100*1024,Ba="t",Bh="d",NE="s",Wh="r",PE="e",Vh="o",Hh="a",Gh="n",Qh="p",RE="h";class OE{constructor(e,n,r,i,s,o,l,a,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ws("c:"+this.id+":"),this.transportManager_=new Ns(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ts(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>IE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>xE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ba in e){const n=e[Ba];n===Hh?this.upgradeIfSecondaryHealthy_():n===Wh?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Vh&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ai("t",e),r=Ai("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Qh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Hh,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Gh,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ai("t",e),r=Ai("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ai(Ba,e);if(Bh in e){const r=e[Bh];if(n===RE)this.onHandshake_(r);else if(n===Gh){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===NE?this.onConnectionShutdown_(r):n===Wh?this.onReset_(r):n===PE?Gu("Server Error: "+r):n===Vh?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),_f!==r&&it("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ts(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(TE))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ts(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(kE))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Qh,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this.allowedEvents_=e,this.listeners_={},x(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){x(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends _g{constructor(){super(["online"]),this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!Um()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new dl}getInitialEvent(e){return x(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=32,Kh=768;class ie{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function X(){return new ie("")}function B(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function bn(t){return t.pieces_.length-t.pieceNum_}function ce(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ie(t.pieces_,e)}function Ef(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function AE(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ps(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function wg(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ie(e,0)}function Te(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ie)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ie(n,0)}function H(t){return t.pieceNum_>=t.pieces_.length}function nt(t,e){const n=B(t),r=B(e);if(n===null)return e;if(n===r)return nt(ce(t),ce(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function DE(t,e){const n=Ps(t,0),r=Ps(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=pr(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Cf(t,e){if(bn(t)!==bn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Tt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(bn(t)>bn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class ME{constructor(e,n){this.errorPrefix_=n,this.parts_=Ps(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Gl(this.parts_[r]);Sg(this)}}function LE(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Gl(e),Sg(t)}function FE(t){const e=t.parts_.pop();t.byteLength_-=Gl(e),t.parts_.length>0&&(t.byteLength_-=1)}function Sg(t){if(t.byteLength_>Kh)throw new Error(t.errorPrefix_+"has a key path longer than "+Kh+" bytes ("+t.byteLength_+").");if(t.parts_.length>Yh)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Yh+") or object contains a cycle "+Qn(t))}function Qn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf extends _g{constructor(){super(["visible"]);let e,n;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(n="visibilitychange",e="hidden"):typeof document.mozHidden!="undefined"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden!="undefined"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden!="undefined"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Tf}getInitialEvent(e){return x(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=1e3,bE=60*5*1e3,zE=3*1e3,qh=30*1e3,jE=1.3,$E=3e4,UE="server_kill",Xh=3;class cn extends yg{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=cn.nextPersistentConnectionId_++,this.log_=Ws("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Di,this.maxReconnectDelay_=bE,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Bm())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Tf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&dl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(De(s)),x(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Us,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:o=>{const l=o.d;o.s==="ok"?(this.onDataUpdate_(r.p,l,!1,null),n.resolve(l)):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const o=this.outstandingGets_[s];o===void 0||i!==o||(delete this.outstandingGets_[s],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),this.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},zE),this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),x(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),x(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;cn.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Zt(e,"w")){const r=ti(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();it(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Pw(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=qh)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Nw(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),x(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+De(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Gu("Unrecognized action received from server: "+De(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){x(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Di,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Di,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>$E&&(this.reconnectDelay_=Di),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*jE)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+cn.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(d){x(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,c]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?He("getToken() completed but was canceled"):(He("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=c&&c.token,l=new OE(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,p=>{it(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(UE)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&it(d),a())}}}interrupt(e){He("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){He("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Nh(this.interruptReasons_)&&(this.reconnectDelay_=Di,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>yf(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new ie(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){He("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Xh&&(this.reconnectDelay_=qh,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){He("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Xh&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Xm.replace(/\./g,"-")]=1,Um()?e["framework.cordova"]=1:Ew()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=dl.getInstance().currentlyOnline();return Nh(this.interruptReasons_)&&e}}cn.nextPersistentConnectionId_=0;cn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new W(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new W(ni,e),i=new W(ni,n);return this.compare(r,i)!==0}minPost(){return W.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po;class Eg extends Ql{static get __EMPTY_NODE(){return po}static set __EMPTY_NODE(e){po=e}compare(e,n){return pr(e.name,n.name)}isDefinedOn(e){throw pi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return W.MIN}maxPost(){return new W(lr,po)}makePost(e,n){return x(typeof e=="string","KeyIndex indexValue must always be a string."),new W(e,po)}toString(){return".key"}}const Qr=new Eg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class je{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:je.RED,this.left=i!=null?i:ct.EMPTY_NODE,this.right=s!=null?s:ct.EMPTY_NODE}copy(e,n,r,i,s){return new je(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ct.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ct.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}je.RED=!0;je.BLACK=!1;class BE{copy(e,n,r,i,s){return this}insert(e,n,r){return new je(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ct{constructor(e,n=ct.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ct(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,je.BLACK,null,null))}remove(e){return new ct(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,je.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new vo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new vo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new vo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new vo(this.root_,null,this.comparator_,!0,e)}}ct.EMPTY_NODE=new BE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t,e){return pr(t.name,e.name)}function kf(t,e){return pr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu;function VE(t){Yu=t}const Cg=function(t){return typeof t=="number"?"number:"+tg(t):"string:"+t},Tg=function(t){if(t.isLeafNode()){const e=t.val();x(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Zt(e,".sv"),"Priority must be a string or number.")}else x(t===Yu||t.isEmpty(),"priority of unexpected type.");x(t===Yu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jh;class be{constructor(e,n=be.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,x(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Tg(this.priorityNode_)}static set __childrenNodeConstructor(e){Jh=e}static get __childrenNodeConstructor(){return Jh}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new be(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:be.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return H(e)?this:B(e)===".priority"?this.priorityNode_:be.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:be.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=B(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(x(r!==".priority"||bn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,be.__childrenNodeConstructor.EMPTY_NODE.updateChild(ce(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Cg(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=tg(this.value_):e+=this.value_,this.lazyHash_=Zm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===be.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof be.__childrenNodeConstructor?-1:(x(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=be.VALUE_TYPE_ORDER.indexOf(n),s=be.VALUE_TYPE_ORDER.indexOf(r);return x(i>=0,"Unknown leaf type: "+n),x(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}be.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kg,xg;function HE(t){kg=t}function GE(t){xg=t}class QE extends Ql{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?pr(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return W.MIN}maxPost(){return new W(lr,new be("[PRIORITY-POST]",xg))}makePost(e,n){const r=kg(e);return new W(n,new be("[PRIORITY-POST]",r))}toString(){return".priority"}}const ke=new QE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=Math.log(2);class KE{constructor(e){const n=s=>parseInt(Math.log(s)/YE,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hl=function(t,e,n,r){t.sort(e);const i=function(a,u){const f=u-a;let d,c;if(f===0)return null;if(f===1)return d=t[a],c=n?n(d):d,new je(c,d.node,je.BLACK,null,null);{const p=parseInt(f/2,10)+a,m=i(a,p),_=i(p+1,u);return d=t[p],c=n?n(d):d,new je(c,d.node,je.BLACK,m,_)}},s=function(a){let u=null,f=null,d=t.length;const c=function(m,_){const S=d-m,v=d;d-=m;const h=i(S+1,v),g=t[S],w=n?n(g):g;p(new je(w,g.node,_,null,h))},p=function(m){u?(u.left=m,u=m):(f=m,u=m)};for(let m=0;m<a.count;++m){const _=a.nextBitIsOne(),S=Math.pow(2,a.count-(m+1));_?c(S,je.BLACK):(c(S,je.BLACK),c(S,je.RED))}return f},o=new KE(t.length),l=s(o);return new ct(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa;const _r={};class an{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return x(_r&&ke,"ChildrenNode.ts has not been loaded"),Wa=Wa||new an({".priority":_r},{".priority":ke}),Wa}get(e){const n=ti(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ct?n:null}hasIndex(e){return Zt(this.indexSet_,e.toString())}addIndex(e,n){x(e!==Qr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(W.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=hl(r,e.getCompare()):l=_r;const a=e.toString(),u=Object.assign({},this.indexSet_);u[a]=e;const f=Object.assign({},this.indexes_);return f[a]=l,new an(f,u)}addToIndexes(e,n){const r=al(this.indexes_,(i,s)=>{const o=ti(this.indexSet_,s);if(x(o,"Missing index implementation for "+s),i===_r)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(W.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),hl(l,o.getCompare())}else return _r;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new W(e.name,l))),a.insert(e,e.node)}});return new an(r,this.indexSet_)}removeFromIndexes(e,n){const r=al(this.indexes_,i=>{if(i===_r)return i;{const s=n.get(e.name);return s?i.remove(new W(e.name,s)):i}});return new an(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mi;class b{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Tg(this.priorityNode_),this.children_.isEmpty()&&x(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Mi||(Mi=new b(new ct(kf),null,an.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Mi}updatePriority(e){return this.children_.isEmpty()?this:new b(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Mi:n}}getChild(e){const n=B(e);return n===null?this:this.getImmediateChild(n).getChild(ce(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(x(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new W(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Mi:this.priorityNode_;return new b(i,o,s)}}updateChild(e,n){const r=B(e);if(r===null)return n;{x(B(e)!==".priority"||bn(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(ce(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ke,(o,l)=>{n[o]=l.val(e),r++,s&&b.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Cg(this.getPriority().val())+":"),this.forEachChild(ke,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Zm(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new W(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new W(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new W(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,W.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,W.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Vs?-1:0}withIndex(e){if(e===Qr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new b(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Qr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ke),i=n.getIterator(ke);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Qr?null:this.indexMap_.get(e.toString())}}b.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class qE extends b{constructor(){super(new ct(kf),b.EMPTY_NODE,an.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return b.EMPTY_NODE}isEmpty(){return!1}}const Vs=new qE;Object.defineProperties(W,{MIN:{value:new W(ni,b.EMPTY_NODE)},MAX:{value:new W(lr,Vs)}});Eg.__EMPTY_NODE=b.EMPTY_NODE;be.__childrenNodeConstructor=b;VE(Vs);GE(Vs);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=!0;function Ae(t,e=null){if(t===null)return b.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),x(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new be(n,Ae(e))}if(!(t instanceof Array)&&XE){const n=[];let r=!1;if(Ye(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=Ae(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new W(o,a)))}}),n.length===0)return b.EMPTY_NODE;const s=hl(n,WE,o=>o.name,kf);if(r){const o=hl(n,ke.getCompare());return new b(s,Ae(e),new an({".priority":o},{".priority":ke}))}else return new b(s,Ae(e),an.Default)}else{let n=b.EMPTY_NODE;return Ye(t,(r,i)=>{if(Zt(t,r)&&r.substring(0,1)!=="."){const s=Ae(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ae(e))}}HE(Ae);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE extends Ql{constructor(e){super(),this.indexPath_=e,x(!H(e)&&B(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?pr(e.name,n.name):s}makePost(e,n){const r=Ae(e),i=b.EMPTY_NODE.updateChild(this.indexPath_,r);return new W(n,i)}maxPost(){const e=b.EMPTY_NODE.updateChild(this.indexPath_,Vs);return new W(lr,e)}toString(){return Ps(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE extends Ql{compare(e,n){const r=e.node.compareTo(n.node);return r===0?pr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return W.MIN}maxPost(){return W.MAX}makePost(e,n){const r=Ae(e);return new W(n,r)}toString(){return".value"}}const eC=new ZE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",tC=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Zh.charAt(n%64),n=Math.floor(n/64);x(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Zh.charAt(e[i]);return x(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t){return{type:"value",snapshotNode:t}}function ri(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Rs(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Os(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function nC(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){x(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Rs(n,l)):x(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(ri(n,r)):o.trackChildChange(Os(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ke,(i,s)=>{n.hasChild(i)||r.trackChildChange(Rs(i,s))}),n.isLeafNode()||n.forEachChild(ke,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Os(i,s,o))}else r.trackChildChange(ri(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?b.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.indexedFilter_=new xf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=As.getStartPost_(e),this.endPost_=As.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,n,r,i,s,o){return this.matches(new W(n,r))||(r=b.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=b.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(b.EMPTY_NODE);const s=this;return n.forEachChild(ke,(o,l)=>{s.matches(new W(o,l))||(i=i.updateImmediateChild(o,b.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.rangedFilter_=new As(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new W(n,r))||(r=b.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=b.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=b.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();let a;if(this.reverse_?a=this.index_.compare(this.rangedFilter_.getStartPost(),l)<=0:a=this.index_.compare(l,this.rangedFilter_.getEndPost())<=0,a)i=i.updateImmediateChild(l.name,l.node),o++;else break}}else{i=n.withIndex(this.index_),i=i.updatePriority(b.EMPTY_NODE);let s,o,l,a;if(this.reverse_){a=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const d=this.index_.getCompare();l=(c,p)=>d(p,c)}else a=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();let u=0,f=!1;for(;a.hasNext();){const d=a.getNext();!f&&l(s,d)<=0&&(f=!0),f&&u<this.limit_&&l(d,o)<=0?u++:i=i.updateImmediateChild(d.name,b.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(c,p)=>d(p,c)}else o=this.index_.getCompare();const l=e;x(l.numChildren()===this.limit_,"");const a=new W(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),f=this.rangedFilter_.matches(a);if(l.hasChild(n)){const d=l.getImmediateChild(n);let c=i.getChildAfterChild(this.index_,u,this.reverse_);for(;c!=null&&(c.name===n||l.hasChild(c.name));)c=i.getChildAfterChild(this.index_,c,this.reverse_);const p=c==null?1:o(c,a);if(f&&!r.isEmpty()&&p>=0)return s!=null&&s.trackChildChange(Os(n,r,d)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Rs(n,d));const _=l.updateImmediateChild(n,b.EMPTY_NODE);return c!=null&&this.rangedFilter_.matches(c)?(s!=null&&s.trackChildChange(ri(c.name,c.node)),_.updateImmediateChild(c.name,c.node)):_}}else return r.isEmpty()?e:f&&o(u,a)>=0?(s!=null&&(s.trackChildChange(Rs(u.name,u.node)),s.trackChildChange(ri(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,b.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ke}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return x(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return x(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ni}hasEnd(){return this.endSet_}getIndexEndValue(){return x(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return x(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return x(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ke}copy(){const e=new If;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function iC(t){return t.loadsAllData()?new xf(t.getIndex()):t.hasLimit()?new rC(t):new As(t)}function ep(t){const e={};if(t.isDefault())return e;let n;return t.index_===ke?n="$priority":t.index_===eC?n="$value":t.index_===Qr?n="$key":(x(t.index_ instanceof JE,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=De(n),t.startSet_&&(e.startAt=De(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+De(t.indexStartName_))),t.endSet_&&(e.endAt=De(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+De(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function tp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ke&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends yg{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ws("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(x(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=pl.getListenId_(e,r),l={};this.listens_[o]=l;const a=ep(e._queryParams);this.restRequest_(s+".json",a,(u,f)=>{let d=f;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),ti(this.listens_,o)===l){let c;u?u===401?c="permission_denied":c="rest_error:"+u:c="ok",i(c,null)}})}unlisten(e,n){const r=pl.getListenId_(e,n);delete this.listens_[r]}get(e){const n=ep(e._queryParams),r=e._path.toString(),i=new Us;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Rw(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=ks(l.responseText)}catch{it("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&it("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.rootNode_=b.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(){return{value:null,children:new Map}}function Ng(t,e,n){if(H(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=B(e);t.children.has(r)||t.children.set(r,vl());const i=t.children.get(r);e=ce(e),Ng(i,e,n)}}function Ku(t,e,n){t.value!==null?n(e,t.value):oC(t,(r,i)=>{const s=new ie(e.toString()+"/"+r);Ku(i,s,n)})}function oC(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ye(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np=10*1e3,aC=30*1e3,uC=5*60*1e3;class cC{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new lC(e);const r=np+(aC-np)*Math.random();ts(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ye(e,(i,s)=>{s>0&&Zt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ts(this.reportStats_.bind(this),Math.floor(Math.random()*2*uC))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})($t||($t={}));function Nf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Pf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Rf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=$t.ACK_USER_WRITE,this.source=Nf()}operationForChild(e){if(H(this.path)){if(this.affectedTree.value!=null)return x(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ie(e));return new ml(X(),n,this.revert)}}else return x(B(this.path)===e,"operationForChild called for unrelated child."),new ml(ce(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){this.source=e,this.path=n,this.type=$t.LISTEN_COMPLETE}operationForChild(e){return H(this.path)?new Ds(this.source,X()):new Ds(this.source,ce(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=$t.OVERWRITE}operationForChild(e){return H(this.path)?new ar(this.source,X(),this.snap.getImmediateChild(e)):new ar(this.source,ce(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=$t.MERGE}operationForChild(e){if(H(this.path)){const n=this.children.subtree(new ie(e));return n.isEmpty()?null:n.value?new ar(this.source,X(),n.value):new ii(this.source,X(),n)}else return x(B(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ii(this.source,ce(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(H(e))return this.isFullyInitialized()&&!this.filtered_;const n=B(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function dC(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(nC(o.childName,o.snapshotNode))}),Li(t,i,"child_removed",e,r,n),Li(t,i,"child_added",e,r,n),Li(t,i,"child_moved",s,r,n),Li(t,i,"child_changed",e,r,n),Li(t,i,"value",e,r,n),i}function Li(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>pC(t,l,a)),o.forEach(l=>{const a=hC(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function hC(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function pC(t,e,n){if(e.childName==null||n.childName==null)throw pi("Should only compare child_ events.");const r=new W(e.childName,e.snapshotNode),i=new W(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(t,e){return{eventCache:t,serverCache:e}}function ns(t,e,n,r){return Yl(new zn(e,n,r),t.serverCache)}function Pg(t,e,n,r){return Yl(t.eventCache,new zn(e,n,r))}function gl(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ur(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Va;const vC=()=>(Va||(Va=new ct(XS)),Va);class ae{constructor(e,n=vC()){this.value=e,this.children=n}static fromObject(e){let n=new ae(null);return Ye(e,(r,i)=>{n=n.set(new ie(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:X(),value:this.value};if(H(e))return null;{const r=B(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(ce(e),n);return s!=null?{path:Te(new ie(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(H(e))return this;{const n=B(e),r=this.children.get(n);return r!==null?r.subtree(ce(e)):new ae(null)}}set(e,n){if(H(e))return new ae(n,this.children);{const r=B(e),s=(this.children.get(r)||new ae(null)).set(ce(e),n),o=this.children.insert(r,s);return new ae(this.value,o)}}remove(e){if(H(e))return this.children.isEmpty()?new ae(null):new ae(null,this.children);{const n=B(e),r=this.children.get(n);if(r){const i=r.remove(ce(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new ae(null):new ae(this.value,s)}else return this}}get(e){if(H(e))return this.value;{const n=B(e),r=this.children.get(n);return r?r.get(ce(e)):null}}setTree(e,n){if(H(e))return n;{const r=B(e),s=(this.children.get(r)||new ae(null)).setTree(ce(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new ae(this.value,o)}}fold(e){return this.fold_(X(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Te(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,X(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(H(e))return null;{const s=B(e),o=this.children.get(s);return o?o.findOnPath_(ce(e),Te(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,X(),n)}foreachOnPath_(e,n,r){if(H(e))return this;{this.value&&r(n,this.value);const i=B(e),s=this.children.get(i);return s?s.foreachOnPath_(ce(e),Te(n,i),r):new ae(null)}}foreach(e){this.foreach_(X(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Te(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.writeTree_=e}static empty(){return new Bt(new ae(null))}}function rs(t,e,n){if(H(e))return new Bt(new ae(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=nt(i,e);return s=s.updateChild(o,n),new Bt(t.writeTree_.set(i,s))}else{const i=new ae(n),s=t.writeTree_.setTree(e,i);return new Bt(s)}}}function qu(t,e,n){let r=t;return Ye(n,(i,s)=>{r=rs(r,Te(e,i),s)}),r}function rp(t,e){if(H(e))return Bt.empty();{const n=t.writeTree_.setTree(e,new ae(null));return new Bt(n)}}function Xu(t,e){return vr(t,e)!=null}function vr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(nt(n.path,e)):null}function ip(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ke,(r,i)=>{e.push(new W(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new W(r,i.value))}),e}function An(t,e){if(H(e))return t;{const n=vr(t,e);return n!=null?new Bt(new ae(n)):new Bt(t.writeTree_.subtree(e))}}function Ju(t){return t.writeTree_.isEmpty()}function si(t,e){return Rg(X(),t.writeTree_,e)}function Rg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(x(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Rg(Te(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Te(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t,e){return Mg(e,t)}function mC(t,e,n,r,i){x(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=rs(t.visibleWrites,e,n)),t.lastWriteId=r}function gC(t,e,n,r){x(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=qu(t.visibleWrites,e,n),t.lastWriteId=r}function yC(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function _C(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);x(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&wC(l,r.path)?i=!1:Tt(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return SC(t),!0;if(r.snap)t.visibleWrites=rp(t.visibleWrites,r.path);else{const l=r.children;Ye(l,a=>{t.visibleWrites=rp(t.visibleWrites,Te(r.path,a))})}return!0}else return!1}function wC(t,e){if(t.snap)return Tt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Tt(Te(t.path,n),e))return!0;return!1}function SC(t){t.visibleWrites=Og(t.allWrites,EC,X()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function EC(t){return t.visible}function Og(t,e,n){let r=Bt.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)Tt(n,o)?(l=nt(n,o),r=rs(r,l,s.snap)):Tt(o,n)&&(l=nt(o,n),r=rs(r,X(),s.snap.getChild(l)));else if(s.children){if(Tt(n,o))l=nt(n,o),r=qu(r,l,s.children);else if(Tt(o,n))if(l=nt(o,n),H(l))r=qu(r,X(),s.children);else{const a=ti(s.children,B(l));if(a){const u=a.getChild(ce(l));r=rs(r,X(),u)}}}else throw pi("WriteRecord should have .snap or .children")}}return r}function Ag(t,e,n,r,i){if(!r&&!i){const s=vr(t.visibleWrites,e);if(s!=null)return s;{const o=An(t.visibleWrites,e);if(Ju(o))return n;if(n==null&&!Xu(o,X()))return null;{const l=n||b.EMPTY_NODE;return si(o,l)}}}else{const s=An(t.visibleWrites,e);if(!i&&Ju(s))return n;if(!i&&n==null&&!Xu(s,X()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Tt(u.path,e)||Tt(e,u.path))},l=Og(t.allWrites,o,e),a=n||b.EMPTY_NODE;return si(l,a)}}}function CC(t,e,n){let r=b.EMPTY_NODE;const i=vr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ke,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=An(t.visibleWrites,e);return n.forEachChild(ke,(o,l)=>{const a=si(An(s,new ie(o)),l);r=r.updateImmediateChild(o,a)}),ip(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=An(t.visibleWrites,e);return ip(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function TC(t,e,n,r,i){x(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Te(e,n);if(Xu(t.visibleWrites,s))return null;{const o=An(t.visibleWrites,s);return Ju(o)?i.getChild(n):si(o,i.getChild(n))}}function kC(t,e,n,r){const i=Te(e,n),s=vr(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=An(t.visibleWrites,i);return si(o,r.getNode().getImmediateChild(n))}else return null}function xC(t,e){return vr(t.visibleWrites,e)}function IC(t,e,n,r,i,s,o){let l;const a=An(t.visibleWrites,e),u=vr(a,X());if(u!=null)l=u;else if(n!=null)l=si(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const f=[],d=o.getCompare(),c=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let p=c.getNext();for(;p&&f.length<i;)d(p,r)!==0&&f.push(p),p=c.getNext();return f}else return[]}function NC(){return{visibleWrites:Bt.empty(),allWrites:[],lastWriteId:-1}}function yl(t,e,n,r){return Ag(t.writeTree,t.treePath,e,n,r)}function Of(t,e){return CC(t.writeTree,t.treePath,e)}function sp(t,e,n,r){return TC(t.writeTree,t.treePath,e,n,r)}function _l(t,e){return xC(t.writeTree,Te(t.treePath,e))}function PC(t,e,n,r,i,s){return IC(t.writeTree,t.treePath,e,n,r,i,s)}function Af(t,e,n){return kC(t.writeTree,t.treePath,e,n)}function Dg(t,e){return Mg(Te(t.treePath,e),t.writeTree)}function Mg(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;x(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),x(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Os(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Rs(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,ri(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Os(r,e.snapshotNode,i.oldSnap));else throw pi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Lg=new OC;class Df{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new zn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Af(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ur(this.viewCache_),s=PC(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t){return{filter:t}}function DC(t,e){x(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),x(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function MC(t,e,n,r,i){const s=new RC;let o,l;if(n.type===$t.OVERWRITE){const u=n;u.source.fromUser?o=Zu(t,e,u.path,u.snap,r,i,s):(x(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!H(u.path),o=wl(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===$t.MERGE){const u=n;u.source.fromUser?o=FC(t,e,u.path,u.children,r,i,s):(x(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=ec(t,e,u.path,u.children,r,i,l,s))}else if(n.type===$t.ACK_USER_WRITE){const u=n;u.revert?o=jC(t,e,u.path,r,i,s):o=bC(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===$t.LISTEN_COMPLETE)o=zC(t,e,n.path,r,s);else throw pi("Unknown operation type: "+n.type);const a=s.getChanges();return LC(e,o,a),{viewCache:o,changes:a}}function LC(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=gl(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Ig(gl(e)))}}function Fg(t,e,n,r,i,s){const o=e.eventCache;if(_l(r,n)!=null)return e;{let l,a;if(H(n))if(x(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=ur(e),f=u instanceof b?u:b.EMPTY_NODE,d=Of(r,f);l=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=yl(r,ur(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=B(n);if(u===".priority"){x(bn(n)===1,"Can't have a priority with additional path components");const f=o.getNode();a=e.serverCache.getNode();const d=sp(r,n,f,a);d!=null?l=t.filter.updatePriority(f,d):l=o.getNode()}else{const f=ce(n);let d;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const c=sp(r,n,o.getNode(),a);c!=null?d=o.getNode().getImmediateChild(u).updateChild(f,c):d=o.getNode().getImmediateChild(u)}else d=Af(r,u,e.serverCache);d!=null?l=t.filter.updateChild(o.getNode(),u,d,f,i,s):l=o.getNode()}}return ns(e,l,o.isFullyInitialized()||H(n),t.filter.filtersNodes())}}function wl(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const f=o?t.filter:t.filter.getIndexedFilter();if(H(n))u=f.updateFullNode(a.getNode(),r,null);else if(f.filtersNodes()&&!a.isFiltered()){const p=a.getNode().updateChild(n,r);u=f.updateFullNode(a.getNode(),p,null)}else{const p=B(n);if(!a.isCompleteForPath(n)&&bn(n)>1)return e;const m=ce(n),S=a.getNode().getImmediateChild(p).updateChild(m,r);p===".priority"?u=f.updatePriority(a.getNode(),S):u=f.updateChild(a.getNode(),p,S,m,Lg,null)}const d=Pg(e,u,a.isFullyInitialized()||H(n),f.filtersNodes()),c=new Df(i,d,s);return Fg(t,d,n,i,c,l)}function Zu(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const f=new Df(i,e,s);if(H(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=ns(e,u,!0,t.filter.filtersNodes());else{const d=B(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=ns(e,u,l.isFullyInitialized(),l.isFiltered());else{const c=ce(n),p=l.getNode().getImmediateChild(d);let m;if(H(c))m=r;else{const _=f.getCompleteChild(d);_!=null?Ef(c)===".priority"&&_.getChild(wg(c)).isEmpty()?m=_:m=_.updateChild(c,r):m=b.EMPTY_NODE}if(p.equals(m))a=e;else{const _=t.filter.updateChild(l.getNode(),d,m,c,f,o);a=ns(e,_,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function op(t,e){return t.eventCache.isCompleteForChild(e)}function FC(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const f=Te(n,a);op(e,B(f))&&(l=Zu(t,l,f,u,i,s,o))}),r.foreach((a,u)=>{const f=Te(n,a);op(e,B(f))||(l=Zu(t,l,f,u,i,s,o))}),l}function lp(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ec(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;H(n)?u=r:u=new ae(null).setTree(n,r);const f=e.serverCache.getNode();return u.children.inorderTraversal((d,c)=>{if(f.hasChild(d)){const p=e.serverCache.getNode().getImmediateChild(d),m=lp(t,p,c);a=wl(t,a,new ie(d),m,i,s,o,l)}}),u.children.inorderTraversal((d,c)=>{const p=!e.serverCache.isCompleteForChild(d)&&c.value===void 0;if(!f.hasChild(d)&&!p){const m=e.serverCache.getNode().getImmediateChild(d),_=lp(t,m,c);a=wl(t,a,new ie(d),_,i,s,o,l)}}),a}function bC(t,e,n,r,i,s,o){if(_l(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(H(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return wl(t,e,n,a.getNode().getChild(n),i,s,l,o);if(H(n)){let u=new ae(null);return a.getNode().forEachChild(Qr,(f,d)=>{u=u.set(new ie(f),d)}),ec(t,e,n,u,i,s,l,o)}else return e}else{let u=new ae(null);return r.foreach((f,d)=>{const c=Te(n,f);a.isCompleteForPath(c)&&(u=u.set(f,a.getNode().getChild(c)))}),ec(t,e,n,u,i,s,l,o)}}function zC(t,e,n,r,i){const s=e.serverCache,o=Pg(e,s.getNode(),s.isFullyInitialized()||H(n),s.isFiltered());return Fg(t,o,n,r,Lg,i)}function jC(t,e,n,r,i,s){let o;if(_l(r,n)!=null)return e;{const l=new Df(r,e,i),a=e.eventCache.getNode();let u;if(H(n)||B(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=yl(r,ur(e));else{const d=e.serverCache.getNode();x(d instanceof b,"serverChildren would be complete if leaf node"),f=Of(r,d)}f=f,u=t.filter.updateFullNode(a,f,s)}else{const f=B(n);let d=Af(r,f,e.serverCache);d==null&&e.serverCache.isCompleteForChild(f)&&(d=a.getImmediateChild(f)),d!=null?u=t.filter.updateChild(a,f,d,ce(n),l,s):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(a,f,b.EMPTY_NODE,ce(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=yl(r,ur(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||_l(r,X())!=null,ns(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new xf(r.getIndex()),s=iC(r);this.processor_=AC(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(b.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(b.EMPTY_NODE,l.getNode(),null),f=new zn(a,o.isFullyInitialized(),i.filtersNodes()),d=new zn(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=Yl(d,f),this.eventGenerator_=new fC(this.query_)}get query(){return this.query_}}function UC(t){return t.viewCache_.serverCache.getNode()}function BC(t){return gl(t.viewCache_)}function WC(t,e){const n=ur(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!H(e)&&!n.getImmediateChild(B(e)).isEmpty())?n.getChild(e):null}function ap(t){return t.eventRegistrations_.length===0}function VC(t,e){t.eventRegistrations_.push(e)}function up(t,e,n){const r=[];if(n){x(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function cp(t,e,n,r){e.type===$t.MERGE&&e.source.queryId!==null&&(x(ur(t.viewCache_),"We should always have a full cache before handling merges"),x(gl(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=MC(t.processor_,i,e,n,r);return DC(t.processor_,s.viewCache),x(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,bg(t,s.changes,s.viewCache.eventCache.getNode(),null)}function HC(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ke,(s,o)=>{r.push(ri(s,o))}),n.isFullyInitialized()&&r.push(Ig(n.getNode())),bg(t,r,n.getNode(),e)}function bg(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return dC(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl;class zg{constructor(){this.views=new Map}}function GC(t){x(!Sl,"__referenceConstructor has already been defined"),Sl=t}function QC(){return x(Sl,"Reference.ts has not been loaded"),Sl}function YC(t){return t.views.size===0}function Mf(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return x(s!=null,"SyncTree gave us an op for an invalid query."),cp(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(cp(o,e,n,r));return s}}function jg(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=yl(n,i?r:null),a=!1;l?a=!0:r instanceof b?(l=Of(n,r),a=!1):(l=b.EMPTY_NODE,a=!1);const u=Yl(new zn(l,a,!1),new zn(r,i,!1));return new $C(e,u)}return o}function KC(t,e,n,r,i,s){const o=jg(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),VC(o,n),HC(o,n)}function qC(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=jn(t);if(i==="default")for(const[a,u]of t.views.entries())o=o.concat(up(u,n,r)),ap(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=t.views.get(i);a&&(o=o.concat(up(a,n,r)),ap(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!jn(t)&&s.push(new(QC())(e._repo,e._path)),{removed:s,events:o}}function $g(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Dn(t,e){let n=null;for(const r of t.views.values())n=n||WC(r,e);return n}function Ug(t,e){if(e._queryParams.loadsAllData())return ql(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Bg(t,e){return Ug(t,e)!=null}function jn(t){return ql(t)!=null}function ql(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El;function XC(t){x(!El,"__referenceConstructor has already been defined"),El=t}function JC(){return x(El,"Reference.ts has not been loaded"),El}let ZC=1;class fp{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ae(null),this.pendingWriteTree_=NC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Wg(t,e,n,r,i){return mC(t.pendingWriteTree_,e,n,r,i),i?mi(t,new ar(Nf(),e,n)):[]}function e1(t,e,n,r){gC(t.pendingWriteTree_,e,n,r);const i=ae.fromObject(n);return mi(t,new ii(Nf(),e,i))}function Tn(t,e,n=!1){const r=yC(t.pendingWriteTree_,e);if(_C(t.pendingWriteTree_,e)){let s=new ae(null);return r.snap!=null?s=s.set(X(),!0):Ye(r.children,o=>{s=s.set(new ie(o),!0)}),mi(t,new ml(r.path,s,n))}else return[]}function Hs(t,e,n){return mi(t,new ar(Pf(),e,n))}function t1(t,e,n){const r=ae.fromObject(n);return mi(t,new ii(Pf(),e,r))}function n1(t,e){return mi(t,new Ds(Pf(),e))}function r1(t,e,n){const r=Ff(t,n);if(r){const i=bf(r),s=i.path,o=i.queryId,l=nt(s,e),a=new Ds(Rf(o),l);return zf(t,s,a)}else return[]}function tc(t,e,n,r){const i=e._path,s=t.syncPointTree_.get(i);let o=[];if(s&&(e._queryIdentifier==="default"||Bg(s,e))){const l=qC(s,e,n,r);YC(s)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const a=l.removed;o=l.events;const u=a.findIndex(d=>d._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(i,(d,c)=>jn(c));if(u&&!f){const d=t.syncPointTree_.subtree(i);if(!d.isEmpty()){const c=l1(d);for(let p=0;p<c.length;++p){const m=c[p],_=m.query,S=Gg(t,m);t.listenProvider_.startListening(is(_),Cl(t,_),S.hashFn,S.onComplete)}}}!f&&a.length>0&&!r&&(u?t.listenProvider_.stopListening(is(e),null):a.forEach(d=>{const c=t.queryToTagMap.get(Xl(d));t.listenProvider_.stopListening(is(d),c)})),a1(t,a)}return o}function i1(t,e,n,r){const i=Ff(t,r);if(i!=null){const s=bf(i),o=s.path,l=s.queryId,a=nt(o,e),u=new ar(Rf(l),a,n);return zf(t,o,u)}else return[]}function s1(t,e,n,r){const i=Ff(t,r);if(i){const s=bf(i),o=s.path,l=s.queryId,a=nt(o,e),u=ae.fromObject(n),f=new ii(Rf(l),a,u);return zf(t,o,f)}else return[]}function dp(t,e,n){const r=e._path;let i=null,s=!1;t.syncPointTree_.foreachOnPath(r,(d,c)=>{const p=nt(d,r);i=i||Dn(c,p),s=s||jn(c)});let o=t.syncPointTree_.get(r);o?(s=s||jn(o),i=i||Dn(o,X())):(o=new zg,t.syncPointTree_=t.syncPointTree_.set(r,o));let l;i!=null?l=!0:(l=!1,i=b.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((c,p)=>{const m=Dn(p,X());m&&(i=i.updateImmediateChild(c,m))}));const a=Bg(o,e);if(!a&&!e._queryParams.loadsAllData()){const d=Xl(e);x(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const c=u1();t.queryToTagMap.set(d,c),t.tagToQueryMap.set(c,d)}const u=Kl(t.pendingWriteTree_,r);let f=KC(o,e,n,u,i,l);if(!a&&!s){const d=Ug(o,e);f=f.concat(c1(t,e,d))}return f}function Lf(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=nt(o,e),u=Dn(l,a);if(u)return u});return Ag(i,e,s,n,!0)}function o1(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,f)=>{const d=nt(u,n);r=r||Dn(f,d)});let i=t.syncPointTree_.get(n);i?r=r||Dn(i,X()):(i=new zg,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new zn(r,!0,!1):null,l=Kl(t.pendingWriteTree_,e._path),a=jg(i,e,l,s?o.getNode():b.EMPTY_NODE,s);return BC(a)}function mi(t,e){return Vg(e,t.syncPointTree_,null,Kl(t.pendingWriteTree_,X()))}function Vg(t,e,n,r){if(H(t.path))return Hg(t,e,n,r);{const i=e.get(X());n==null&&i!=null&&(n=Dn(i,X()));let s=[];const o=B(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,f=Dg(r,o);s=s.concat(Vg(l,a,u,f))}return i&&(s=s.concat(Mf(i,t,r,n))),s}}function Hg(t,e,n,r){const i=e.get(X());n==null&&i!=null&&(n=Dn(i,X()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=Dg(r,o),f=t.operationForChild(o);f&&(s=s.concat(Hg(f,l,a,u)))}),i&&(s=s.concat(Mf(i,t,r,n))),s}function Gg(t,e){const n=e.query,r=Cl(t,n);return{hashFn:()=>(UC(e)||b.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?r1(t,n._path,r):n1(t,n._path);{const s=eE(i,n);return tc(t,n,null,s)}}}}function Cl(t,e){const n=Xl(e);return t.queryToTagMap.get(n)}function Xl(t){return t._path.toString()+"$"+t._queryIdentifier}function Ff(t,e){return t.tagToQueryMap.get(e)}function bf(t){const e=t.indexOf("$");return x(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ie(t.substr(0,e))}}function zf(t,e,n){const r=t.syncPointTree_.get(e);x(r,"Missing sync point for query tag that we're tracking");const i=Kl(t.pendingWriteTree_,e);return Mf(r,n,i,null)}function l1(t){return t.fold((e,n,r)=>{if(n&&jn(n))return[ql(n)];{let i=[];return n&&(i=$g(n)),Ye(r,(s,o)=>{i=i.concat(o)}),i}})}function is(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(JC())(t._repo,t._path):t}function a1(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Xl(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function u1(){return ZC++}function c1(t,e,n){const r=e._path,i=Cl(t,e),s=Gg(t,n),o=t.listenProvider_.startListening(is(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)x(!jn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,f,d)=>{if(!H(u)&&f&&jn(f))return[ql(f).query];{let c=[];return f&&(c=c.concat($g(f).map(p=>p.query))),Ye(d,(p,m)=>{c=c.concat(m)}),c}});for(let u=0;u<a.length;++u){const f=a[u];t.listenProvider_.stopListening(is(f),Cl(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new jf(n)}node(){return this.node_}}class $f{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Te(this.path_,e);return new $f(this.syncTree_,n)}node(){return Lf(this.syncTree_,this.path_)}}const f1=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},hp=function(t,e,n){if(!t||typeof t!="object")return t;if(x(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return d1(t[".sv"],e,n);if(typeof t[".sv"]=="object")return h1(t[".sv"],e);x(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},d1=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:x(!1,"Unexpected server value: "+t)}},h1=function(t,e,n){t.hasOwnProperty("increment")||x(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&x(!1,"Unexpected increment value: "+r);const i=e.node();if(x(i!==null&&typeof i!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},Qg=function(t,e,n,r){return Uf(e,new $f(n,t),r)},Yg=function(t,e,n){return Uf(t,new jf(e),n)};function Uf(t,e,n){const r=t.getPriority().val(),i=hp(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=hp(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new be(l,Ae(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new be(i))),o.forEachChild(ke,(l,a)=>{const u=Uf(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Wf(t,e){let n=e instanceof ie?e:new ie(e),r=t,i=B(n);for(;i!==null;){const s=ti(r.node.children,i)||{children:{},childCount:0};r=new Bf(i,r,s),n=ce(n),i=B(n)}return r}function gi(t){return t.node.value}function Kg(t,e){t.node.value=e,nc(t)}function qg(t){return t.node.childCount>0}function p1(t){return gi(t)===void 0&&!qg(t)}function Jl(t,e){Ye(t.node.children,(n,r)=>{e(new Bf(n,t,r))})}function Xg(t,e,n,r){n&&!r&&e(t),Jl(t,i=>{Xg(i,e,!0,r)}),n&&r&&e(t)}function v1(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Gs(t){return new ie(t.parent===null?t.name:Gs(t.parent)+"/"+t.name)}function nc(t){t.parent!==null&&m1(t.parent,t.name,t)}function m1(t,e,n){const r=p1(n),i=Zt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,nc(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,nc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=/[\[\].#$\/\u0000-\u001F\u007F]/,y1=/[\[\].#$\u0000-\u001F\u007F]/,Ha=10*1024*1024,Vf=function(t){return typeof t=="string"&&t.length!==0&&!g1.test(t)},Jg=function(t){return typeof t=="string"&&t.length!==0&&!y1.test(t)},_1=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Jg(t)},w1=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!gf(t)||t&&typeof t=="object"&&Zt(t,".sv")},Zg=function(t,e,n,r){r&&e===void 0||Zl(Hl(t,"value"),e,n)},Zl=function(t,e,n){const r=n instanceof ie?new ME(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Qn(r));if(typeof e=="function")throw new Error(t+"contains a function "+Qn(r)+" with contents = "+e.toString());if(gf(e))throw new Error(t+"contains "+e.toString()+" "+Qn(r));if(typeof e=="string"&&e.length>Ha/3&&Gl(e)>Ha)throw new Error(t+"contains a string greater than "+Ha+" utf8 bytes "+Qn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Ye(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Vf(o)))throw new Error(t+" contains an invalid key ("+o+") "+Qn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);LE(r,o),Zl(t,l,r),FE(r)}),i&&s)throw new Error(t+' contains ".value" child '+Qn(r)+" in addition to actual children.")}},S1=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Ps(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Vf(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(DE);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Tt(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},E1=function(t,e,n,r){if(r&&e===void 0)return;const i=Hl(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Ye(e,(o,l)=>{const a=new ie(o);if(Zl(i,l,Te(n,a)),Ef(a)===".priority"&&!w1(l))throw new Error(i+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(a)}),S1(i,s)},ey=function(t,e,n,r){if(!(r&&n===void 0)&&!Jg(n))throw new Error(Hl(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},C1=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ey(t,e,n,r)},ty=function(t,e){if(B(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},T1=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Vf(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!_1(n))throw new Error(Hl(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ea(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Cf(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Hf(t,e,n){ea(t,n),ny(t,r=>Cf(r,e))}function Vt(t,e,n){ea(t,n),ny(t,r=>Tt(r,e)||Tt(e,r))}function ny(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(x1(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function x1(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Zn&&He("event: "+n.toString()),vi(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="repo_interrupt",N1=25;class P1{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new k1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vl(),this.transactionQueueTree_=new Bf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function R1(t,e,n){if(t.stats_=wf(t.repoInfo_),t.forceRestClient_||iE())t.server_=new pl(t.repoInfo_,(r,i,s,o)=>{pp(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>vp(t,!0),0);else{if(typeof n!="undefined"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{De(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new cn(t.repoInfo_,e,(r,i,s,o)=>{pp(t,r,i,s,o)},r=>{vp(t,r)},r=>{O1(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=uE(t.repoInfo_,()=>new cC(t.stats_,t.server_)),t.infoData_=new sC,t.infoSyncTree_=new fp({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=Hs(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Gf(t,"connected",!1),t.serverSyncTree_=new fp({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);Vt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function ry(t){const n=t.infoData_.getNode(new ie(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ta(t){return f1({timestamp:ry(t)})}function pp(t,e,n,r,i){t.dataUpdateCount++;const s=new ie(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=al(n,u=>Ae(u));o=s1(t.serverSyncTree_,s,a,i)}else{const a=Ae(n);o=i1(t.serverSyncTree_,s,a,i)}else if(r){const a=al(n,u=>Ae(u));o=t1(t.serverSyncTree_,s,a)}else{const a=Ae(n);o=Hs(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=oi(t,s)),Vt(t.eventQueue_,l,o)}function vp(t,e){Gf(t,"connected",e),e===!1&&L1(t)}function O1(t,e){Ye(e,(n,r)=>{Gf(t,n,r)})}function Gf(t,e,n){const r=new ie("/.info/"+e),i=Ae(n);t.infoData_.updateSnapshot(r,i);const s=Hs(t.infoSyncTree_,r,i);Vt(t.eventQueue_,r,s)}function Qf(t){return t.nextWriteId_++}function A1(t,e){const n=o1(t.serverSyncTree_,e);return n!=null?Promise.resolve(n):t.server_.get(e).then(r=>{const i=Ae(r).withIndex(e._queryParams.getIndex()),s=Hs(t.serverSyncTree_,e._path,i);return Hf(t.eventQueue_,e._path,s),Promise.resolve(i)},r=>(Qs(t,"get for query "+De(e)+" failed: "+r),Promise.reject(new Error(r))))}function D1(t,e,n,r,i){Qs(t,"set",{path:e.toString(),value:n,priority:r});const s=ta(t),o=Ae(n,r),l=Lf(t.serverSyncTree_,e),a=Yg(o,l,s),u=Qf(t),f=Wg(t.serverSyncTree_,e,a,u,!0);ea(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(c,p)=>{const m=c==="ok";m||it("set at "+e+" failed: "+c);const _=Tn(t.serverSyncTree_,u,!m);Vt(t.eventQueue_,e,_),rc(t,i,c,p)});const d=Kf(t,e);oi(t,d),Vt(t.eventQueue_,d,[])}function M1(t,e,n,r){Qs(t,"update",{path:e.toString(),value:n});let i=!0;const s=ta(t),o={};if(Ye(n,(l,a)=>{i=!1,o[l]=Qg(Te(e,l),Ae(a),t.serverSyncTree_,s)}),i)He("update() called with empty data.  Don't do anything."),rc(t,r,"ok",void 0);else{const l=Qf(t),a=e1(t.serverSyncTree_,e,o,l);ea(t.eventQueue_,a),t.server_.merge(e.toString(),n,(u,f)=>{const d=u==="ok";d||it("update at "+e+" failed: "+u);const c=Tn(t.serverSyncTree_,l,!d),p=c.length>0?oi(t,e):e;Vt(t.eventQueue_,p,c),rc(t,r,u,f)}),Ye(n,u=>{const f=Kf(t,Te(e,u));oi(t,f)}),Vt(t.eventQueue_,e,[])}}function L1(t){Qs(t,"onDisconnectEvents");const e=ta(t),n=vl();Ku(t.onDisconnect_,X(),(i,s)=>{const o=Qg(i,s,t.serverSyncTree_,e);Ng(n,i,o)});let r=[];Ku(n,X(),(i,s)=>{r=r.concat(Hs(t.serverSyncTree_,i,s));const o=Kf(t,i);oi(t,o)}),t.onDisconnect_=vl(),Vt(t.eventQueue_,X(),r)}function F1(t,e,n){let r;B(e._path)===".info"?r=dp(t.infoSyncTree_,e,n):r=dp(t.serverSyncTree_,e,n),Hf(t.eventQueue_,e._path,r)}function mp(t,e,n){let r;B(e._path)===".info"?r=tc(t.infoSyncTree_,e,n):r=tc(t.serverSyncTree_,e,n),Hf(t.eventQueue_,e._path,r)}function b1(t){t.persistentConnection_&&t.persistentConnection_.interrupt(I1)}function Qs(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),He(n,...e)}function rc(t,e,n,r){e&&vi(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function iy(t,e,n){return Lf(t.serverSyncTree_,e,n)||b.EMPTY_NODE}function Yf(t,e=t.transactionQueueTree_){if(e||na(t,e),gi(e)){const n=oy(t,e);x(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&z1(t,Gs(e),n)}else qg(e)&&Jl(e,n=>{Yf(t,n)})}function z1(t,e,n){const r=n.map(u=>u.currentWriteId),i=iy(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const f=n[u];x(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const d=nt(e,f.path);s=s.updateChild(d,f.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{Qs(t,"transaction put response",{path:a.toString(),status:u});let f=[];if(u==="ok"){const d=[];for(let c=0;c<n.length;c++)n[c].status=2,f=f.concat(Tn(t.serverSyncTree_,n[c].currentWriteId)),n[c].onComplete&&d.push(()=>n[c].onComplete(null,!0,n[c].currentOutputSnapshotResolved)),n[c].unwatcher();na(t,Wf(t.transactionQueueTree_,e)),Yf(t,t.transactionQueueTree_),Vt(t.eventQueue_,e,f);for(let c=0;c<d.length;c++)vi(d[c])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{it("transaction at "+a.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}oi(t,e)}},o)}function oi(t,e){const n=sy(t,e),r=Gs(n),i=oy(t,n);return j1(t,i,r),r}function j1(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=nt(n,a.path);let f=!1,d;if(x(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)f=!0,d=a.abortReason,i=i.concat(Tn(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=N1)f=!0,d="maxretry",i=i.concat(Tn(t.serverSyncTree_,a.currentWriteId,!0));else{const c=iy(t,a.path,o);a.currentInputSnapshot=c;const p=e[l].update(c.val());if(p!==void 0){Zl("transaction failed: Data returned ",p,a.path);let m=Ae(p);typeof p=="object"&&p!=null&&Zt(p,".priority")||(m=m.updatePriority(c.getPriority()));const S=a.currentWriteId,v=ta(t),h=Yg(m,c,v);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=h,a.currentWriteId=Qf(t),o.splice(o.indexOf(S),1),i=i.concat(Wg(t.serverSyncTree_,a.path,h,a.currentWriteId,a.applyLocally)),i=i.concat(Tn(t.serverSyncTree_,S,!0))}else f=!0,d="nodata",i=i.concat(Tn(t.serverSyncTree_,a.currentWriteId,!0))}Vt(t.eventQueue_,n,i),i=[],f&&(e[l].status=2,function(c){setTimeout(c,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(d),!1,null))))}na(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)vi(r[l]);Yf(t,t.transactionQueueTree_)}function sy(t,e){let n,r=t.transactionQueueTree_;for(n=B(e);n!==null&&gi(r)===void 0;)r=Wf(r,n),e=ce(e),n=B(e);return r}function oy(t,e){const n=[];return ly(t,e,n),n.sort((r,i)=>r.order-i.order),n}function ly(t,e,n){const r=gi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Jl(e,i=>{ly(t,i,n)})}function na(t,e){const n=gi(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Kg(e,n.length>0?n:void 0)}Jl(e,r=>{na(t,r)})}function Kf(t,e){const n=Gs(sy(t,e)),r=Wf(t.transactionQueueTree_,e);return v1(r,i=>{Ga(t,i)}),Ga(t,r),Xg(r,i=>{Ga(t,i)}),n}function Ga(t,e){const n=gi(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(x(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(x(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Tn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Kg(e,void 0):n.length=s+1,Vt(t.eventQueue_,Gs(e),i);for(let o=0;o<r.length;o++)vi(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function U1(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):it(`Invalid query segment '${n}' in query '${t}'`)}return e}const gp=function(t,e){const n=B1(t),r=n.namespace;n.domain==="firebase.com"&&pn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&pn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||KS();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new fg(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ie(n.pathString)}},B1=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(f,d)),f<d&&(i=$1(t.substring(f,d)));const c=U1(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const p=e.slice(0,u);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),n=e.substring(m+1),s=r}"ns"in c&&(s=c.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+De(this.snapshot.exportVal())}}class uy{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return x(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return H(this._path)?null:Ef(this._path)}get ref(){return new en(this._repo,this._path)}get _queryIdentifier(){const e=tp(this._queryParams),n=yf(e);return n==="{}"?"default":n}get _queryObject(){return tp(this._queryParams)}isEqual(e){if(e=hr(e),!(e instanceof qf))return!1;const n=this._repo===e._repo,r=Cf(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+AE(this._path)}}class en extends qf{constructor(e,n){super(e,n,new If,!1)}get parent(){const e=wg(this._path);return e===null?null:new en(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class li{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ie(e),r=ai(this.ref,e);return new li(this._node.getChild(n),r,ke)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new li(i,ai(this.ref,r),ke)))}hasChild(e){const n=new ie(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Yr(t,e){return t=hr(t),t._checkNotDeleted("ref"),e!==void 0?ai(t._root,e):t._root}function ai(t,e){return t=hr(t),B(t._path)===null?C1("child","path",e,!1):ey("child","path",e,!1),new en(t._repo,Te(t._path,e))}function V1(t,e){t=hr(t),ty("push",t._path),Zg("push",e,t._path,!0);const n=ry(t._repo),r=tC(n),i=ai(t,r),s=ai(t,r);let o;return e!=null?o=H1(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function H1(t,e){t=hr(t),ty("set",t._path),Zg("set",e,t._path,!1);const n=new Us;return D1(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Xf(t,e){E1("update",e,t._path,!1);const n=new Us;return M1(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function G1(t){return t=hr(t),A1(t._repo,t).then(e=>new li(e,new en(t._repo,t._path),t._queryParams.getIndex()))}class Jf{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new ay("value",this,new li(e.snapshotNode,new en(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new uy(this,e,n):null}matches(e){return e instanceof Jf?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Zf{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new uy(this,e,n):null}createEvent(e,n){x(e.childName!=null,"Child events should have a childName.");const r=ai(new en(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new ay(e.type,this,new li(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Zf?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Q1(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const a=n,u=(f,d)=>{mp(t._repo,t,l),a(f,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new W1(n,s||void 0),l=e==="value"?new Jf(o):new Zf(e,o);return F1(t._repo,t,l),()=>mp(t._repo,t,l)}function ic(t,e,n,r){return Q1(t,"value",e,n,r)}GC(en);XC(en);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="FIREBASE_DATABASE_EMULATOR_HOST",sc={};let K1=!1;function q1(t,e,n,r){t.repoInfo_=new fg(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}function X1(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||pn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),He("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=gp(s,i),l=o.repoInfo,a,u;typeof process!="undefined"&&process.env&&(u=process.env[Y1]),u?(a=!0,s=`http://${u}?ns=${l.namespace}`,o=gp(s,i),l=o.repoInfo):a=!o.repoInfo.secure;const f=i&&a?new Gr(Gr.OWNER):new oE(t.name,t.options,e);T1("Invalid Firebase Database URL",o),H(o.path)||pn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=Z1(l,t,f,new sE(t.name,n));return new eT(d,t)}function J1(t,e){const n=sc[e];(!n||n[t.key]!==t)&&pn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),b1(t),delete n[t.key]}function Z1(t,e,n,r){let i=sc[e.name];i||(i={},sc[e.name]=i);let s=i[t.toURLString()];return s&&pn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new P1(t,K1,n,r),i[t.toURLString()]=s,s}class eT{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(R1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new en(this._repo,X())),this._rootInternal}_delete(){return this._rootInternal!==null&&(J1(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&pn("Cannot call "+e+" on a deleted database.")}}function tT(t=AS(),e){return IS(t,"database").getImmediate({identifier:e})}function nT(t,e,n,r={}){t=hr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&pn("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Gr(Gr.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:ww(r.mockUserToken,t.app.options.projectId);s=new Gr(o)}q1(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(t){VS(RS),cl(new xs("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return X1(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Vr(bh,zh,t),Vr(bh,zh,"esm2017")}cn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};cn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};rT();const iT={apiKey:"AIzaSyDBo14Ud_75H8hOhupkBSpjoUbGhByS-EM",authDomain:"live-activities.firebaseapp.com",projectId:"live-activities",storageBucket:"live-activities.appspot.com",messagingSenderId:"327588436817",appId:"1:327588436817:web:ebe9c282a97fa03eb65170"};OS(iT);const er=tT();location.hostname==="localhost"&&nT(er,"localhost",9e3);function sT(){var t=new Date,e=t.getFullYear(),n=t.getMonth(),r=t.getDate(),i=new Date(0);return i.setFullYear(e,n,r+1),i.setHours(0,0,0,0),i}function ed(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function cy(t){ed(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function oT(t){ed(1,arguments);var e=cy(t),n=e.getTime();return n}const Ao=t=>t||oT(sT()),td=Yr(er),fy=(t,e)=>{const n={};return n[`/users/${t.id}`]=t,n[`/user-family/${t.id}`]=e,n[`/family-users/${e.id}/${t.id}`]=t,Xf(td,n)},lT=(t,e)=>{const n=V1(Yr(er,"activities")).key,r=Ao(),i={};return i[`/tasks/${e.id}`]=e,i[`/activities/${t.id}/${e.id}`]={id:n,user:t,task:e,state:"idle",startOfTomorrow:r},Xf(td,i)},oc=(t,e)=>{const n={},r=Ot(Rt({},t),{state:e});return n[`/activities/${t.user.id}/${t.task.id}`]=r,Xf(td,n)};var dy={exports:{}},hy={},py={exports:{}},vy={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ui=Ie.exports;function aT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uT=typeof Object.is=="function"?Object.is:aT,cT=ui.useState,fT=ui.useEffect,dT=ui.useLayoutEffect,hT=ui.useDebugValue;function pT(t,e){var n=e(),r=cT({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return dT(function(){i.value=n,i.getSnapshot=e,Qa(i)&&s({inst:i})},[t,n,e]),fT(function(){return Qa(i)&&s({inst:i}),t(function(){Qa(i)&&s({inst:i})})},[t]),hT(n),n}function Qa(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!uT(t,n)}catch{return!0}}function vT(t,e){return e()}var mT=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?vT:pT;vy.useSyncExternalStore=ui.useSyncExternalStore!==void 0?ui.useSyncExternalStore:mT;py.exports=vy;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ra=Ie.exports,gT=py.exports;function yT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _T=typeof Object.is=="function"?Object.is:yT,wT=gT.useSyncExternalStore,ST=ra.useRef,ET=ra.useEffect,CT=ra.useMemo,TT=ra.useDebugValue;hy.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=ST(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=CT(function(){function a(p){if(!u){if(u=!0,f=p,p=r(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return d=m}return d=p}if(m=d,_T(f,p))return m;var _=r(p);return i!==void 0&&i(m,_)?m:(f=p,d=_)}var u=!1,f,d,c=n===void 0?null:n;return[function(){return a(e())},c===null?void 0:function(){return a(c())}]},[e,n,r,i]);var l=wT(t,s[0],s[1]);return ET(function(){o.hasValue=!0,o.value=l},[l]),TT(l),l};dy.exports=hy;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var P=function(){return P=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},P.apply(this,arguments)};function nd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Y(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ee(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function Ee(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var se;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(se||(se={}));var Ms;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(Ms||(Ms={}));var lc=se.Start,rd=se.Stop,ia=se.Raise,sa=se.Send,my=se.Cancel,kT=se.NullEvent,yp=se.Assign;se.After;se.DoneState;var gy=se.Log,xT=se.Init,ac=se.Invoke;se.ErrorExecution;var _p=se.ErrorPlatform,IT=se.ErrorCustom,yy=se.Update,NT=se.Choose,PT=se.Pure,_y=".",wp={},uc="xstate.guard",RT="",Fi=!0,mo;function id(t,e,n){n===void 0&&(n=_y);var r=ss(t,n),i=ss(e,n);return Z(i)?Z(r)?i===r:!1:Z(r)?r in i:Object.keys(r).every(function(s){return s in i?id(r[s],i[s]):!1})}function wy(t){try{return Z(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function cc(t,e){try{return yi(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function OT(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function ss(t,e){if(OT(t))return t.value;if(yi(t))return Tl(t);if(typeof t!="string")return t;var n=cc(t,e);return Tl(n)}function Tl(t){if(t.length===1)return t[0];for(var e={},n=e,r=0;r<t.length-1;r++)r===t.length-2?n[t[r]]=t[r+1]:(n[t[r]]={},n=n[t[r]]);return e}function Bi(t,e){for(var n={},r=Object.keys(t),i=0;i<r.length;i++){var s=r[i];n[s]=e(t[s],s,t,i)}return n}function Sp(t,e,n){var r,i,s={};try{for(var o=Y(Object.keys(t)),l=o.next();!l.done;l=o.next()){var a=l.value,u=t[a];!n(u)||(s[a]=e(u,a,t))}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}var AT=function(t){return function(e){var n,r,i=e;try{for(var s=Y(t),o=s.next();!o.done;o=s.next()){var l=o.value;i=i[l]}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}};function DT(t,e){return function(n){var r,i,s=n;try{for(var o=Y(t),l=o.next();!l.done;l=o.next()){var a=l.value;s=s[e][a]}}catch(u){r={error:u}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}}function Do(t){if(!t)return[[]];if(Z(t))return[[t]];var e=me(Object.keys(t).map(function(n){var r=t[n];return typeof r!="string"&&(!r||!Object.keys(r).length)?[[n]]:Do(t[n]).map(function(i){return[n].concat(i)})}));return e}function me(t){var e;return(e=[]).concat.apply(e,Ee([],ee(t),!1))}function Sy(t){return yi(t)?t:[t]}function Mt(t){return t===void 0?[]:Sy(t)}function kl(t,e,n){var r,i;if(re(t))return t(e,n.data);var s={};try{for(var o=Y(Object.keys(t)),l=o.next();!l.done;l=o.next()){var a=l.value,u=t[a];re(u)?s[a]=u(e,n.data):s[a]=u}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}function MT(t){return/^(done|error)\./.test(t)}function Ep(t){return!!(t instanceof Promise||t!==null&&(re(t)||typeof t=="object")&&re(t.then))}function LT(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function Ey(t,e){var n,r,i=ee([[],[]],2),s=i[0],o=i[1];try{for(var l=Y(t),a=l.next();!a.done;a=l.next()){var u=a.value;e(u)?s.push(u):o.push(u)}}catch(f){n={error:f}}finally{try{a&&!a.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return[s,o]}function Cy(t,e){return Bi(t.states,function(n,r){if(!!n){var i=(Z(e)?void 0:e[r])||(n?n.current:void 0);if(!!i)return{current:i,states:Cy(n,i)}}})}function FT(t,e){return{current:e,states:Cy(t,e)}}function Cp(t,e,n,r){var i=t&&n.reduce(function(s,o){var l,a,u=o.assignment,f={state:r,action:o,_event:e},d={};if(re(u))d=u(s,e.data,f);else try{for(var c=Y(Object.keys(u)),p=c.next();!p.done;p=c.next()){var m=p.value,_=u[m];d[m]=re(_)?_(s,e.data,f):_}}catch(S){l={error:S}}finally{try{p&&!p.done&&(a=c.return)&&a.call(c)}finally{if(l)throw l.error}}return Object.assign({},s,d)},t);return i}var os=function(){};function yi(t){return Array.isArray(t)}function re(t){return typeof t=="function"}function Z(t){return typeof t=="string"}function Ty(t,e){if(!!t)return Z(t)?{type:uc,name:t,predicate:e?e[t]:void 0}:re(t)?{type:uc,name:t.name,predicate:t}:t}function bT(t){try{return"subscribe"in t&&re(t.subscribe)}catch{return!1}}var Sn=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();mo={},mo[Sn]=function(){return this},mo[Symbol.observable]=function(){return this};function cr(t){return!!t&&"__xstatenode"in t}function zT(t){return!!t&&typeof t.send=="function"}function sd(t,e){return Z(t)||typeof t=="number"?P({type:t},e):t}function Je(t,e){if(!Z(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=sd(t);return P({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function wr(t,e){var n=Sy(e).map(function(r){return typeof r=="undefined"||typeof r=="string"||cr(r)?{target:r,event:t}:P(P({},r),{event:t})});return n}function jT(t){if(!(t===void 0||t===RT))return Mt(t)}function ky(t,e,n,r,i){var s=t.options.guards,o={state:i,cond:e,_event:r};if(e.type===uc)return((s==null?void 0:s[e.name])||e.predicate)(n,r.data,o);var l=s==null?void 0:s[e.type];if(!l)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return l(n,r.data,o)}function xy(t){return typeof t=="string"?{type:t}:t}function fc(t,e,n){if(typeof t=="object")return t;var r=function(){};return{next:t,error:e||r,complete:n||r}}function go(t,e){return"".concat(t,":invocation[").concat(e,"]")}var xl=Je({type:xT});function dc(t,e){return e&&e[t]||void 0}function Ls(t,e){var n;if(Z(t)||typeof t=="number"){var r=dc(t,e);re(r)?n={type:t,exec:r}:r?n=r:n={type:t,exec:void 0}}else if(re(t))n={type:t.name||t.toString(),exec:t};else{var r=dc(t.type,e);if(re(r))n=P(P({},t),{exec:r});else if(r){var i=r.type||t.type;n=P(P(P({},r),t),{type:i})}else n=t}return n}var Il=function(t,e){if(!t)return[];var n=yi(t)?t:[t];return n.map(function(r){return Ls(r,e)})};function od(t){var e=Ls(t);return P(P({id:Z(t)?t:e.id},e),{type:e.type})}function $T(t){return Z(t)?{type:ia,event:t}:Iy(t,{to:Ms.Internal})}function UT(t){return{type:ia,_event:Je(t.event)}}function Iy(t,e){return{to:e?e.to:void 0,type:sa,event:re(t)?t:sd(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:re(t)?t.name:wy(t)}}function BT(t,e,n,r){var i={_event:n},s=Je(re(t.event)?t.event(e,n.data,i):t.event),o;if(Z(t.delay)){var l=r&&r[t.delay];o=re(l)?l(e,n.data,i):l}else o=re(t.delay)?t.delay(e,n.data,i):t.delay;var a=re(t.to)?t.to(e,n.data,i):t.to;return P(P({},t),{to:a,_event:s,event:s.data,delay:o})}var WT=function(t,e,n){return P(P({},t),{value:Z(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},VT=function(t){return{type:my,sendId:t}};function HT(t){var e=od(t);return{type:se.Start,activity:e,exec:void 0}}function GT(t){var e=re(t)?t:od(t);return{type:se.Stop,activity:e,exec:void 0}}function QT(t,e,n){var r=re(t.activity)?t.activity(e,n.data):t.activity,i=typeof r=="string"?{id:r}:r,s={type:se.Stop,activity:i};return s}function YT(t,e){var n=e?"#".concat(e):"";return"".concat(se.After,"(").concat(t,")").concat(n)}function yo(t,e){var n="".concat(se.DoneState,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function Mo(t,e){var n="".concat(se.DoneInvoke,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function Wi(t,e){var n="".concat(se.ErrorPlatform,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function hc(t,e,n,r,i,s){s===void 0&&(s=!1);var o=ee(s?[[],i]:Ey(i,function(c){return c.type===yp}),2),l=o[0],a=o[1],u=l.length?Cp(n,r,l,e):n,f=s?[n]:void 0,d=me(a.map(function(c){var p;switch(c.type){case ia:return UT(c);case sa:var m=BT(c,u,r,t.options.delays);return m;case gy:return WT(c,u,r);case NT:{var _=c,S=(p=_.conds.find(function(D){var U=Ty(D.cond,t.options.guards);return!U||ky(t,U,u,r,e)}))===null||p===void 0?void 0:p.actions;if(!S)return[];var v=ee(hc(t,e,u,r,Il(Mt(S),t.options.actions),s),2),h=v[0],g=v[1];return u=g,f==null||f.push(u),h}case PT:{var S=c.get(u,r.data);if(!S)return[];var w=ee(hc(t,e,u,r,Il(Mt(S),t.options.actions),s),2),T=w[0],I=w[1];return u=I,f==null||f.push(u),T}case rd:return QT(c,u,r);case yp:{u=Cp(u,r,[c],e),f==null||f.push(u);break}default:var C=Ls(c,t.options.actions),E=C.exec;if(E&&f){var L=f.length-1;C=P(P({},C),{exec:function(D){for(var U=[],oe=1;oe<arguments.length;oe++)U[oe-1]=arguments[oe];E.apply(void 0,Ee([f[L]],ee(U),!1))}})}return C}}).filter(function(c){return!!c}));return[d,u]}var Vi=function(t,e){var n=e(t);return n};function Ny(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Sn]=function(){return this},e}function KT(t,e,n,r){var i,s=xy(t.src),o=(i=e==null?void 0:e.options.services)===null||i===void 0?void 0:i[s.type],l=t.data?kl(t.data,n,r):void 0,a=o?qT(o,t.id,l):Ny(t.id);return a.meta=t,a}function qT(t,e,n){var r=Ny(e);if(r.deferred=!0,cr(t)){var i=r.state=Vi(void 0,function(){return(n?t.withContext(n):t).initialState});r.getSnapshot=function(){return i}}return r}function XT(t){try{return typeof t.send=="function"}catch{return!1}}function JT(t){return XT(t)&&"id"in t}function ZT(t){var e;return P((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Sn]=function(){return this},e),t)}var Nl=function(t){return t.type==="atomic"||t.type==="final"};function ci(t){return Object.keys(t.states).map(function(e){return t.states[e]}).filter(function(e){return e.type!=="history"})}function Py(t){var e=[t];return Nl(t)?e:e.concat(me(ci(t).map(Py)))}function Cr(t,e){var n,r,i,s,o,l,a,u,f=new Set(t),d=pc(f),c=new Set(e);try{for(var p=Y(c),m=p.next();!m.done;m=p.next())for(var _=m.value,S=_.parent;S&&!c.has(S);)c.add(S),S=S.parent}catch(L){n={error:L}}finally{try{m&&!m.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}var v=pc(c);try{for(var h=Y(c),g=h.next();!g.done;g=h.next()){var _=g.value;if(_.type==="compound"&&(!v.get(_)||!v.get(_).length))d.get(_)?d.get(_).forEach(function(D){return c.add(D)}):_.initialStateNodes.forEach(function(D){return c.add(D)});else if(_.type==="parallel")try{for(var w=(o=void 0,Y(ci(_))),T=w.next();!T.done;T=w.next()){var I=T.value;c.has(I)||(c.add(I),d.get(I)?d.get(I).forEach(function(D){return c.add(D)}):I.initialStateNodes.forEach(function(D){return c.add(D)}))}}catch(D){o={error:D}}finally{try{T&&!T.done&&(l=w.return)&&l.call(w)}finally{if(o)throw o.error}}}}catch(L){i={error:L}}finally{try{g&&!g.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}try{for(var C=Y(c),E=C.next();!E.done;E=C.next())for(var _=E.value,S=_.parent;S&&!c.has(S);)c.add(S),S=S.parent}catch(L){a={error:L}}finally{try{E&&!E.done&&(u=C.return)&&u.call(C)}finally{if(a)throw a.error}}return c}function Ry(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var r=n[0];if(r){if(Nl(r))return r.key}else return{}}var i={};return n.forEach(function(s){i[s.key]=Ry(s,e)}),i}function pc(t){var e,n,r=new Map;try{for(var i=Y(t),s=i.next();!s.done;s=i.next()){var o=s.value;r.has(o)||r.set(o,[]),o.parent&&(r.has(o.parent)||r.set(o.parent,[]),r.get(o.parent).push(o))}}catch(l){e={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function ek(t,e){var n=Cr([t],e);return Ry(t,pc(n))}function Lo(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function tk(t){return Ee([],ee(new Set(me(Ee([],ee(t.map(function(e){return e.ownEvents})),!1)))),!1)}function ls(t,e){return e.type==="compound"?ci(e).some(function(n){return n.type==="final"&&Lo(t,n)}):e.type==="parallel"?ci(e).every(function(n){return ls(t,n)}):!1}function nk(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function Tp(t){return new Set(me(t.map(function(e){return e.tags})))}function Oy(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(Z(t)||Z(e))return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(function(i){return Oy(t[i],e[i])})}function rk(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function ik(t,e){var n=t.exec,r=P(P({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return r}var Lt=function(){function t(e){var n=this,r;this.actions=[],this.activities=wp,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||wp,this.meta=nk(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(r=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&r!==void 0?r:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return tk(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var r=xl;return new t({value:e,context:n,_event:r,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var r=xl;return new t({value:e.value,context:n,_event:r,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var r=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),Z(e))return[e];var i=Object.keys(e);return i.concat.apply(i,Ee([],ee(i.map(function(s){return r.toStrings(e[s],n).map(function(o){return s+n+o})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var r=nd(e,["configuration","transitions","tags","machine"]);return P(P({},r),{tags:Array.from(n)})},t.prototype.matches=function(e){return id(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;os(!!this.machine);var r=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(r!=null&&r.transitions.length)&&r.transitions.some(function(i){return i.target!==void 0||i.actions.length})},t}(),sk={deferEvents:!1},kp=function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=P(P({},sk),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t}(),Ya=new Map,ok=0,_o={bookId:function(){return"x:".concat(ok++)},register:function(t,e){return Ya.set(t,e),t},get:function(t){return Ya.get(t)},free:function(t){Ya.delete(t)}};function ld(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global}function lk(){var t=ld();if(t&&"__xstate__"in t)return t.__xstate__}function ak(t){if(!!ld()){var e=lk();e&&e.register(t)}}function uk(t,e){e===void 0&&(e={});var n=t.initialState,r=new Set,i=[],s=!1,o=function(){if(!s){for(s=!0;i.length>0;){var u=i.shift();n=t.transition(n,u,a),r.forEach(function(f){return f.next(n)})}s=!1}},l=ZT({id:e.id,send:function(u){i.push(u),o()},getSnapshot:function(){return n},subscribe:function(u,f,d){var c=fc(u,f,d);return r.add(c),c.next(n),{unsubscribe:function(){r.delete(c)}}}}),a={parent:e.parent,self:l,id:e.id||"anonymous",observers:r};return n=t.start?t.start(a):n,l}var ck={sync:!1,autoForward:!1},Fe;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Fe||(Fe={}));var fk=function(){function t(e,n){var r=this;n===void 0&&(n=t.defaultOptions),this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Fe.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(f,d){if(yi(f))return r.batch(f),r.state;var c=Je(sd(f,d));if(r.status===Fe.Stopped)return r.state;if(r.status!==Fe.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(c.name,'" was sent to uninitialized service "').concat(r.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(c.data)));return r.scheduler.schedule(function(){r.forward(c);var p=r.nextState(c);r.update(p,c)}),r._state},this.sendTo=function(f,d){var c=r.parent&&(d===Ms.Parent||r.parent.id===d),p=c?r.parent:Z(d)?r.children.get(d)||_o.get(d):zT(d)?d:void 0;if(!p){if(!c)throw new Error("Unable to send event to child '".concat(d,"' from service '").concat(r.id,"'."));return}"machine"in p?p.send(P(P({},f),{name:f.name===IT?"".concat(Wi(r.id)):f.name,origin:r.sessionId})):p.send(f.data)};var i=P(P({},t.defaultOptions),n),s=i.clock,o=i.logger,l=i.parent,a=i.id,u=a!==void 0?a:e.id;this.id=u,this.logger=o,this.clock=s,this.parent=l,this.options=i,this.scheduler=new kp({deferEvents:this.options.deferEvents}),this.sessionId=_o.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:Vi(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var r,i;try{for(var s=Y(e.actions),o=s.next();!o.done;o=s.next()){var l=o.value;this.exec(l,e,n)}}catch(a){r={error:a}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.update=function(e,n){var r,i,s,o,l,a,u,f,d=this;if(e._sessionid=this.sessionId,this._state=e,this.options.execute&&this.execute(this.state),this.children.forEach(function(L){d.state.children[L.id]=L}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var c=Y(this.eventListeners),p=c.next();!p.done;p=c.next()){var m=p.value;m(e.event)}}catch(L){r={error:L}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}try{for(var _=Y(this.listeners),S=_.next();!S.done;S=_.next()){var m=S.value;m(e,e.event)}}catch(L){s={error:L}}finally{try{S&&!S.done&&(o=_.return)&&o.call(_)}finally{if(s)throw s.error}}try{for(var v=Y(this.contextListeners),h=v.next();!h.done;h=v.next()){var g=h.value;g(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(L){l={error:L}}finally{try{h&&!h.done&&(a=v.return)&&a.call(v)}finally{if(l)throw l.error}}var w=ls(e.configuration||[],this.machine);if(this.state.configuration&&w){var T=e.configuration.find(function(L){return L.type==="final"&&L.parent===d.machine}),I=T&&T.doneData?kl(T.doneData,e.context,n):void 0;try{for(var C=Y(this.doneListeners),E=C.next();!E.done;E=C.next()){var m=E.value;m(Mo(this.id,I))}}catch(L){u={error:L}}finally{try{E&&!E.done&&(f=C.return)&&f.call(C)}finally{if(u)throw u.error}}this.stop()}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Fe.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,r){var i=this;if(!e)return{unsubscribe:function(){}};var s,o=r;return typeof e=="function"?s=e:(s=e.next.bind(e),o=e.complete.bind(e)),this.listeners.add(s),this.status!==Fe.NotStarted&&s(this.state),o&&(this.status===Fe.Stopped?o():this.onDone(o)),{unsubscribe:function(){s&&i.listeners.delete(s),o&&i.doneListeners.delete(o)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Fe.Running)return this;this.machine._init(),_o.register(this.sessionId,this),this.initialized=!0,this.status=Fe.Running;var r=e===void 0?this.initialState:Vi(this,function(){return rk(e)?n.machine.resolveState(e):n.machine.resolveState(Lt.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(r,xl)}),this},t.prototype.stop=function(){var e,n,r,i,s,o,l,a,u,f,d=this;try{for(var c=Y(this.listeners),p=c.next();!p.done;p=c.next()){var m=p.value;this.listeners.delete(m)}}catch(E){e={error:E}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}try{for(var _=Y(this.stopListeners),S=_.next();!S.done;S=_.next()){var m=S.value;m(),this.stopListeners.delete(m)}}catch(E){r={error:E}}finally{try{S&&!S.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}try{for(var v=Y(this.contextListeners),h=v.next();!h.done;h=v.next()){var m=h.value;this.contextListeners.delete(m)}}catch(E){s={error:E}}finally{try{h&&!h.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}try{for(var g=Y(this.doneListeners),w=g.next();!w.done;w=g.next()){var m=w.value;this.doneListeners.delete(m)}}catch(E){l={error:E}}finally{try{w&&!w.done&&(a=g.return)&&a.call(g)}finally{if(l)throw l.error}}if(!this.initialized)return this;Ee([],ee(this.state.configuration),!1).sort(function(E,L){return L.order-E.order}).forEach(function(E){var L,D;try{for(var U=Y(E.definition.exit),oe=U.next();!oe.done;oe=U.next()){var Ke=oe.value;d.exec(Ke,d.state)}}catch(wt){L={error:wt}}finally{try{oe&&!oe.done&&(D=U.return)&&D.call(U)}finally{if(L)throw L.error}}}),this.children.forEach(function(E){re(E.stop)&&E.stop()}),this.children.clear();try{for(var T=Y(Object.keys(this.delayedEventsMap)),I=T.next();!I.done;I=T.next()){var C=I.value;this.clock.clearTimeout(this.delayedEventsMap[C])}}catch(E){u={error:E}}finally{try{I&&!I.done&&(f=T.return)&&f.call(T)}finally{if(u)throw u.error}}return this.scheduler.clear(),this.scheduler=new kp({deferEvents:this.options.deferEvents}),this.initialized=!1,this.status=Fe.Stopped,this._initialState=void 0,_o.free(this.sessionId),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Fe.NotStarted&&this.options.deferEvents)){if(this.status!==Fe.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}this.scheduler.schedule(function(){var r,i,s=n.state,o=!1,l=[],a=function(c){var p=Je(c);n.forward(p),s=Vi(n,function(){return n.machine.transition(s,p)}),l.push.apply(l,Ee([],ee(s.actions.map(function(m){return ik(m,s)})),!1)),o=o||!!s.changed};try{for(var u=Y(e),f=u.next();!f.done;f=u.next()){var d=f.value;a(d)}}catch(c){r={error:c}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}s.changed=o,s.actions=l,n.update(s,Je(e[e.length-1]))})},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype.nextState=function(e){var n=this,r=Je(e);if(r.name.indexOf(_p)===0&&!this.state.nextEvents.some(function(s){return s.indexOf(_p)===0}))throw r.data.data;var i=Vi(this,function(){return n.machine.transition(n.state,r)});return i},t.prototype.forward=function(e){var n,r;try{for(var i=Y(this.forwardTo),s=i.next();!s.done;s=i.next()){var o=s.value,l=this.children.get(o);if(!l)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));l.send(e)}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this;this.delayedEventsMap[e.id]=this.clock.setTimeout(function(){e.to?n.sendTo(e._event,e.to):n.send(e._event)},e.delay)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,r){r===void 0&&(r=this.machine.options.actions);var i=n.context,s=n._event,o=e.exec||dc(e.type,r),l=re(o)?o:o?o.exec:e.exec;if(l)try{return l(i,s.data,{action:e,state:this.state,_event:s})}catch(w){throw this.parent&&this.parent.send({type:"xstate.error",data:w}),w}switch(e.type){case sa:var a=e;if(typeof a.delay=="number"){this.defer(a);return}else a.to?this.sendTo(a._event,a.to):this.send(a._event);break;case my:this.cancel(e.sendId);break;case lc:{if(this.status!==Fe.Running)return;var u=e.activity;if(!this.state.activities[u.id||u.type])break;if(u.type===se.Invoke){var f=xy(u.src),d=this.machine.options.services?this.machine.options.services[f.type]:void 0,c=u.id,p=u.data,m="autoForward"in u?u.autoForward:!!u.forward;if(!d)return;var _=p?kl(p,i,s):void 0;if(typeof d=="string")return;var S=re(d)?d(i,s.data,{data:_,src:f,meta:u.meta}):d;if(!S)return;var v=void 0;cr(S)&&(S=_?S.withContext(_):S,v={autoForward:m}),this.spawn(S,c,v)}else this.spawnActivity(u);break}case rd:{this.stopChild(e.activity.id);break}case gy:var h=e.label,g=e.value;h?this.logger(h,g):this.logger(g);break}},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);!n||(this.removeChild(e),re(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,r){if(Ep(e))return this.spawnPromise(Promise.resolve(e),n);if(re(e))return this.spawnCallback(e,n);if(JT(e))return this.spawnActor(e,n);if(bT(e))return this.spawnObservable(e,n);if(cr(e))return this.spawnMachine(e,P(P({},r),{id:n}));if(LT(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var r=this;n===void 0&&(n={});var i=new t(e,P(P({},this.options),{parent:this,id:n.id||e.id})),s=P(P({},ck),n);s.sync&&i.onTransition(function(l){r.send(yy,{state:l,id:i.id})});var o=i;return this.children.set(i.id,o),s.autoForward&&this.forwardTo.add(i.id),i.onDone(function(l){r.removeChild(i.id),r.send(Je(l,{origin:i.id}))}).start(),o},t.prototype.spawnBehavior=function(e,n){var r=uk(e,{id:n,parent:this});return this.children.set(n,r),r},t.prototype.spawnPromise=function(e,n){var r,i=this,s=!1,o;e.then(function(a){s||(o=a,i.removeChild(n),i.send(Je(Mo(n,a),{origin:n})))},function(a){if(!s){i.removeChild(n);var u=Wi(n,a);try{i.send(Je(u,{origin:n}))}catch{i.devTools&&i.devTools.send(u,i.state),i.machine.strict&&i.stop()}}});var l=(r={id:n,send:function(){},subscribe:function(a,u,f){var d=fc(a,u,f),c=!1;return e.then(function(p){c||(d.next(p),!c&&d.complete())},function(p){c||d.error(p)}),{unsubscribe:function(){return c=!0}}},stop:function(){s=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return o}},r[Sn]=function(){return this},r);return this.children.set(n,l),l},t.prototype.spawnCallback=function(e,n){var r,i=this,s=!1,o=new Set,l=new Set,a,u=function(c){a=c,l.forEach(function(p){return p(c)}),!s&&i.send(Je(c,{origin:n}))},f;try{f=e(u,function(c){o.add(c)})}catch(c){this.send(Wi(n,c))}if(Ep(f))return this.spawnPromise(f,n);var d=(r={id:n,send:function(c){return o.forEach(function(p){return p(c)})},subscribe:function(c){var p=fc(c);return l.add(p.next),{unsubscribe:function(){l.delete(p.next)}}},stop:function(){s=!0,re(f)&&f()},toJSON:function(){return{id:n}},getSnapshot:function(){return a}},r[Sn]=function(){return this},r);return this.children.set(n,d),d},t.prototype.spawnObservable=function(e,n){var r,i=this,s,o=e.subscribe(function(a){s=a,i.send(Je(a,{origin:n}))},function(a){i.removeChild(n),i.send(Je(Wi(n,a),{origin:n}))},function(){i.removeChild(n),i.send(Je(Mo(n),{origin:n}))}),l=(r={id:n,send:function(){},subscribe:function(a,u,f){return e.subscribe(a,u,f)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return s},toJSON:function(){return{id:n}}},r[Sn]=function(){return this},r);return this.children.set(n,l),l},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(!!n){var r=n(this.state.context,e);this.spawnEffect(e.id,r)}},t.prototype.spawnEffect=function(e,n){var r;this.children.set(e,(r={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},r[Sn]=function(){return this},r))},t.prototype.attachDev=function(){var e=ld();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(P(P({name:this.id,autoPause:!0,stateSanitizer:function(r){return{value:r.value,context:r.context,actions:r.actions}}},n),{features:P({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}ak(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Sn]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Fe.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=Ay,t}();function Ay(t,e){var n=new fk(t,e);return n}function dk(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function wo(t){return P(P({type:ac},t),{toJSON:function(){t.onDone,t.onError;var e=nd(t,["onDone","onError"]);return P(P({},e),{type:ac,src:dk(t.src)})}})}var Tr="",vc="#",bi="*",Sr={},Er=function(t){return t[0]===vc},hk=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},pk=function(t,e,n){var r=n.slice(0,-1).some(function(s){return!("cond"in s)&&!("in"in s)&&(Z(s.target)||cr(s.target))}),i=e===Tr?"the transient event":"event '".concat(e,"'");os(!r,"One or more transitions for ".concat(i," on state '").concat(t.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},vk=function(){function t(e,n,r,i){var s=this;r===void 0&&(r="context"in e?e.context:void 0);var o;this.config=e,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(hk(),n),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:_y),this.id=this.config.id||Ee([this.machine.key],ee(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(o=this.config.schema)!==null&&o!==void 0?o:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?Bi(this.config.states,function(u,f){var d,c=new t(u,{},void 0,{parent:s,key:f});return Object.assign(s.idMap,P((d={},d[c.id]=c,d),c.idMap)),c}):Sr;var l=0;function a(u){var f,d;u.order=l++;try{for(var c=Y(ci(u)),p=c.next();!p.done;p=c.next()){var m=p.value;a(m)}}catch(_){f={error:_}}finally{try{p&&!p.done&&(d=c.return)&&d.call(c)}finally{if(f)throw f.error}}}a(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(u){var f=u.event;return f===Tr}):Tr in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=Mt(this.config.entry||this.config.onEntry).map(function(u){return Ls(u)}),this.onExit=Mt(this.config.exit||this.config.onExit).map(function(u){return Ls(u)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=Mt(this.config.invoke).map(function(u,f){var d,c;if(cr(u)){var p=go(s.id,f);return s.machine.options.services=P((d={},d[p]=u,d),s.machine.options.services),wo({src:p,id:p})}else if(Z(u.src)){var p=u.id||go(s.id,f);return wo(P(P({},u),{id:p,src:u.src}))}else if(cr(u.src)||re(u.src)){var p=u.id||go(s.id,f);return s.machine.options.services=P((c={},c[p]=u.src,c),s.machine.options.services),wo(P(P({id:p},u),{src:p}))}else{var m=u.src;return wo(P(P({id:go(s.id,f)},u),{src:m}))}}),this.activities=Mt(this.config.activities).concat(this.invoke).map(function(u){return od(u)}),this.transition=this.transition.bind(this),this.tags=Mt(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||Py(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var r=this.options,i=r.actions,s=r.activities,o=r.guards,l=r.services,a=r.delays;return new t(this.config,{actions:P(P({},i),e.actions),activities:P(P({},s),e.activities),guards:P(P({},o),e.guards),services:P(P({},l),e.services),delays:P(P({},a),e.delays)},n!=null?n:this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return re(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:Bi(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,r){return n[r.eventType]=n[r.eventType]||[],n[r.eventType].push(r),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===Tr,r=this.transitions.filter(function(i){var s=i.eventType===e;return n?s:s||i.eventType===bi});return this.__cache.candidates[e]=r,r},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var r=function(s,o){var l=re(s)?"".concat(e.id,":delay[").concat(o,"]"):s,a=YT(l,e.id);return e.onEntry.push(Iy(a,{delay:s})),e.onExit.push(VT(a)),a},i=yi(n)?n.map(function(s,o){var l=r(s.delay,o);return P(P({},s),{event:l})}):me(Object.keys(n).map(function(s,o){var l=n[s],a=Z(l)?{target:l}:l,u=isNaN(+s)?s:+s,f=r(u,o);return Mt(a).map(function(d){return P(P({},d),{event:f,delay:u})})}));return i.map(function(s){var o=s.delay;return P(P({},e.formatTransition(s)),{delay:o})})},t.prototype.getStateNodes=function(e){var n,r=this;if(!e)return[];var i=e instanceof Lt?e.value:ss(e,this.delimiter);if(Z(i)){var s=this.getStateNode(i).initial;return s!==void 0?this.getStateNodes((n={},n[i]=s,n)):[this,this.states[i]]}var o=Object.keys(i),l=[this];return l.push.apply(l,Ee([],ee(me(o.map(function(a){return r.getStateNode(a).getStateNodes(i[a])}))),!1)),l},t.prototype.handles=function(e){var n=wy(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof Lt?e:Lt.create(e),r=Array.from(Cr([],this.getStateNodes(n.value)));return new Lt(P(P({},n),{value:this.resolve(n.value),configuration:r,done:ls(r,this),tags:Tp(r),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,r){var i=this.getStateNode(e),s=i.next(n,r);return!s||!s.transitions.length?this.next(n,r):s},t.prototype.transitionCompoundNode=function(e,n,r){var i=Object.keys(e),s=this.getStateNode(i[0]),o=s._transition(e[i[0]],n,r);return!o||!o.transitions.length?this.next(n,r):o},t.prototype.transitionParallelNode=function(e,n,r){var i,s,o={};try{for(var l=Y(Object.keys(e)),a=l.next();!a.done;a=l.next()){var u=a.value,f=e[u];if(!!f){var d=this.getStateNode(u),c=d._transition(f,n,r);c&&(o[u]=c)}}}catch(h){i={error:h}}finally{try{a&&!a.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}var p=Object.keys(o).map(function(h){return o[h]}),m=me(p.map(function(h){return h.transitions})),_=p.some(function(h){return h.transitions.length>0});if(!_)return this.next(n,r);var S=me(p.map(function(h){return h.entrySet})),v=me(Object.keys(o).map(function(h){return o[h].configuration}));return{transitions:m,entrySet:S,exitSet:me(p.map(function(h){return h.exitSet})),configuration:v,source:n,actions:me(Object.keys(o).map(function(h){return o[h].actions}))}},t.prototype._transition=function(e,n,r){return Z(e)?this.transitionLeafNode(e,n,r):Object.keys(e).length===1?this.transitionCompoundNode(e,n,r):this.transitionParallelNode(e,n,r)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,Je(n))},t.prototype.next=function(e,n){var r,i,s=this,o=n.name,l=[],a=[],u;try{for(var f=Y(this.getCandidates(o)),d=f.next();!d.done;d=f.next()){var c=d.value,p=c.cond,m=c.in,_=e.context,S=m?Z(m)&&Er(m)?e.matches(ss(this.getStateNodeById(m).path,this.delimiter)):id(ss(m,this.delimiter),AT(this.path.slice(0,-2))(e.value)):!0,v=!1;try{v=!p||ky(this.machine,p,_,n,e)}catch(T){throw new Error("Unable to evaluate guard '".concat(p.name||p.type,"' in transition for event '").concat(o,"' in state node '").concat(this.id,`':
`).concat(T.message))}if(v&&S){c.target!==void 0&&(a=c.target),l.push.apply(l,Ee([],ee(c.actions),!1)),u=c;break}}}catch(T){r={error:T}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}if(!!u){if(!a.length)return{transitions:[u],entrySet:[],exitSet:[],configuration:e.value?[this]:[],source:e,actions:l};var h=me(a.map(function(T){return s.getRelativeStateNodes(T,e.historyValue)})),g=!!u.internal,w=g?[]:me(h.map(function(T){return s.nodesFromChild(T)}));return{transitions:[u],entrySet:w,exitSet:g?[]:[this],configuration:h,source:e,actions:l}}},t.prototype.nodesFromChild=function(e){if(e.escapes(this))return[];for(var n=[],r=e;r&&r!==this;)n.push(r),r=r.parent;return n.push(this),n},t.prototype.escapes=function(e){if(this===e)return!1;for(var n=this.parent;n;){if(n===e)return!1;n=n.parent}return!0},t.prototype.getActions=function(e,n,r,i){var s,o,l,a,u=Cr([],i?this.getStateNodes(i.value):[this]),f=e.configuration.length?Cr(u,e.configuration):u;try{for(var d=Y(f),c=d.next();!c.done;c=d.next()){var p=c.value;Lo(u,p)||e.entrySet.push(p)}}catch(C){s={error:C}}finally{try{c&&!c.done&&(o=d.return)&&o.call(d)}finally{if(s)throw s.error}}try{for(var m=Y(u),_=m.next();!_.done;_=m.next()){var p=_.value;(!Lo(f,p)||Lo(e.exitSet,p.parent))&&e.exitSet.push(p)}}catch(C){l={error:C}}finally{try{_&&!_.done&&(a=m.return)&&a.call(m)}finally{if(l)throw l.error}}var S=me(e.entrySet.map(function(C){var E=[];if(C.type!=="final")return E;var L=C.parent;if(!L.parent)return E;E.push(yo(C.id,C.doneData),yo(L.id,C.doneData?kl(C.doneData,n,r):void 0));var D=L.parent;return D.type==="parallel"&&ci(D).every(function(U){return ls(e.configuration,U)})&&E.push(yo(D.id)),E}));e.exitSet.sort(function(C,E){return E.order-C.order}),e.entrySet.sort(function(C,E){return C.order-E.order});var v=new Set(e.entrySet),h=new Set(e.exitSet),g=ee([me(Array.from(v).map(function(C){return Ee(Ee([],ee(C.activities.map(function(E){return HT(E)})),!1),ee(C.onEntry),!1)})).concat(S.map($T)),me(Array.from(h).map(function(C){return Ee(Ee([],ee(C.onExit),!1),ee(C.activities.map(function(E){return GT(E)})),!1)}))],2),w=g[0],T=g[1],I=Il(T.concat(e.actions).concat(w),this.machine.options.actions);return I},t.prototype.transition=function(e,n,r){e===void 0&&(e=this.initialState);var i=Je(n),s;if(e instanceof Lt)s=r===void 0?e:this.resolveState(Lt.from(e,r));else{var o=Z(e)?this.resolve(Tl(this.getResolvedPath(e))):this.resolve(e),l=r!=null?r:this.machine.context;s=this.resolveState(Lt.from(o,l))}if(!Fi&&i.name===bi)throw new Error("An event cannot have the wildcard type ('".concat(bi,"')"));if(this.strict&&!this.events.includes(i.name)&&!MT(i.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(i.name,"'"));var a=this._transition(s.value,s,i)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:s,actions:[]},u=Cr([],this.getStateNodes(s.value)),f=a.configuration.length?Cr(u,a.configuration):u;return a.configuration=Ee([],ee(f),!1),this.resolveTransition(a,s,s.context,i)},t.prototype.resolveRaisedTransition=function(e,n,r){var i,s=e.actions;return e=this.transition(e,n),e._event=r,e.event=r.data,(i=e.actions).unshift.apply(i,Ee([],ee(s),!1)),e},t.prototype.resolveTransition=function(e,n,r,i){var s,o,l=this;i===void 0&&(i=xl);var a=e.configuration,u=!n||e.transitions.length>0,f=u?ek(this.machine,a):void 0,d=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,c=this.getActions(e,r,i,n),p=n?P({},n.activities):{};try{for(var m=Y(c),_=m.next();!_.done;_=m.next()){var S=_.value;S.type===lc?p[S.activity.id||S.activity.type]=S:S.type===rd&&(p[S.activity.id||S.activity.type]=!1)}}catch(N){s={error:N}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}var v=ee(hc(this,n,r,i,c,this.machine.config.preserveActionOrder),2),h=v[0],g=v[1],w=ee(Ey(h,function(N){return N.type===ia||N.type===sa&&N.to===Ms.Internal}),2),T=w[0],I=w[1],C=h.filter(function(N){var F;return N.type===lc&&((F=N.activity)===null||F===void 0?void 0:F.type)===ac}),E=C.reduce(function(N,F){return N[F.activity.id]=KT(F.activity,l.machine,g,i),N},n?P({},n.children):{}),L=u?e.configuration:n?n.configuration:[],D=ls(L,this),U=new Lt({value:f||n.value,context:g,_event:i,_sessionid:n?n._sessionid:null,historyValue:f?d?FT(d,f):void 0:n?n.historyValue:void 0,history:!f||e.source?n:void 0,actions:f?I:[],activities:f?p:n?n.activities:{},events:[],configuration:L,transitions:e.transitions,children:E,done:D,tags:Tp(L),machine:this}),oe=r!==g;U.changed=i.name===yy||oe;var Ke=U.history;Ke&&delete Ke.history;var wt=!D&&(this._transient||a.some(function(N){return N._transient}));if(!u&&(!wt||i.name===Tr))return U;var pe=U;if(!D)for(wt&&(pe=this.resolveRaisedTransition(pe,{type:kT},i));T.length;){var Be=T.shift();pe=this.resolveRaisedTransition(pe,Be._event,i)}var Wn=pe.changed||(Ke?!!pe.actions.length||oe||typeof Ke.value!=typeof pe.value||!Oy(pe.value,Ke.value):void 0);return pe.changed=Wn,pe.history=Ke,pe},t.prototype.getStateNode=function(e){if(Er(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=Er(e)?e.slice(vc.length):e;if(n===this.id)return this;var r=this.machine.idMap[n];if(!r)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return r},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&Er(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=cc(e,this.delimiter).slice(),r=this;n.length;){var i=n.shift();if(!i.length)break;r=r.getStateNode(i)}return r},t.prototype.resolve=function(e){var n,r=this;if(!e)return this.initialStateValue||Sr;switch(this.type){case"parallel":return Bi(this.initialStateValue,function(s,o){return s?r.getStateNode(o).resolve(e[o]||s):Sr});case"compound":if(Z(e)){var i=this.getStateNode(e);return i.type==="parallel"||i.type==="compound"?(n={},n[e]=i.initialStateValue,n):e}return Object.keys(e).length?Bi(e,function(s,o){return s?r.getStateNode(o).resolve(s):Sr}):this.initialStateValue||{};default:return e||Sr}},t.prototype.getResolvedPath=function(e){if(Er(e)){var n=this.machine.idMap[e.slice(vc.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return cc(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=Sp(this.states,function(r){return r.initialStateValue||Sr},function(r){return r.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Nl(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var r=this.getStateNodes(e);return this.resolveTransition({configuration:r,entrySet:r,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n!=null?n:this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;Z(n.target)?e=Er(n.target)?Tl(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,r){return r===void 0&&(r=!0),r?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Nl(this))return[this];if(this.type==="compound"&&!this.initial)return Fi||os(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var n=Do(this.initialStateValue);return me(n.map(function(r){return e.getFromRelativePath(r)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=ee(e),r=n[0],i=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var s=this.getStateNode(r);if(s.type==="history")return s.resolveHistory();if(!this.states[r])throw new Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(i)},t.prototype.historyValue=function(e){if(!!Object.keys(this.states).length)return{current:e||this.initialStateValue,states:Sp(this.states,function(n,r){if(!e)return n.historyValue();var i=Z(e)?void 0:e[r];return n.historyValue(i||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var r=this.parent;if(!e){var i=this.target;return i?me(Do(i).map(function(o){return r.getFromRelativePath(o)})):r.initialStateNodes}var s=DT(r.path,"states")(e).current;return Z(s)?[r.getStateNode(s)]:me(Do(s).map(function(o){return n.history==="deep"?r.getFromRelativePath(o):[r.states[o[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=me(Object.keys(this.states).map(function(r){return e.states[r].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,r,i;if(this.__cache.events)return this.__cache.events;var s=this.states,o=new Set(this.ownEvents);if(s)try{for(var l=Y(Object.keys(s)),a=l.next();!a.done;a=l.next()){var u=a.value,f=s[u];if(f.states)try{for(var d=(r=void 0,Y(f.events)),c=d.next();!c.done;c=d.next()){var p=c.value;o.add("".concat(p))}}catch(m){r={error:m}}finally{try{c&&!c.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}}catch(m){e={error:m}}finally{try{a&&!a.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(r){if(!Z(r))return r;var i=r[0]===n.delimiter;if(i&&!n.parent)return n.getStateNodeByPath(r.slice(1));var s=i?n.key+r:r;if(n.parent)try{var o=n.parent.getStateNodeByPath(s);return o}catch(l){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(l.message))}else return n.getStateNodeByPath(s)})},t.prototype.formatTransition=function(e){var n=this,r=jT(e.target),i="internal"in e?e.internal:r?r.some(function(a){return Z(a)&&a[0]===n.delimiter}):!0,s=this.machine.options.guards,o=this.resolveTarget(r),l=P(P({},e),{actions:Il(Mt(e.actions)),cond:Ty(e.cond,s),target:o,source:this,internal:i,eventType:e.event,toJSON:function(){return P(P({},l),{target:l.target?l.target.map(function(a){return"#".concat(a.id)}):void 0,source:"#".concat(n.id)})}});return l},t.prototype.formatTransitions=function(){var e,n,r=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var s=this.config.on,o=bi,l=s[o],a=l===void 0?[]:l,u=nd(s,[typeof o=="symbol"?o:o+""]);i=me(Object.keys(u).map(function(h){!Fi&&h===Tr&&os(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(r.id,'".'));var g=wr(h,u[h]);return Fi||pk(r,h,g),g}).concat(wr(bi,a)))}var f=this.config.always?wr("",this.config.always):[],d=this.config.onDone?wr(String(yo(this.id)),this.config.onDone):[];Fi||os(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var c=me(this.invoke.map(function(h){var g=[];return h.onDone&&g.push.apply(g,Ee([],ee(wr(String(Mo(h.id)),h.onDone)),!1)),h.onError&&g.push.apply(g,Ee([],ee(wr(String(Wi(h.id)),h.onError)),!1)),g})),p=this.after,m=me(Ee(Ee(Ee(Ee([],ee(d),!1),ee(c),!1),ee(i),!1),ee(f),!1).map(function(h){return Mt(h).map(function(g){return r.formatTransition(g)})}));try{for(var _=Y(p),S=_.next();!S.done;S=_.next()){var v=S.value;m.push(v)}}catch(h){e={error:h}}finally{try{S&&!S.done&&(n=_.return)&&n.call(_)}finally{if(e)throw e.error}}return m},t}();function mk(t,e){return new vk(t,e)}var gk=Ie.exports.useLayoutEffect;function xp(t){var e=Ie.exports.useRef();return e.current||(e.current={v:t()}),e.current.v}var Pl=globalThis&&globalThis.__assign||function(){return Pl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Pl.apply(this,arguments)},yk=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};globalThis&&globalThis.__read;function _k(t,e){var n=xp(function(){return typeof t=="function"?t():t}),r=e.context,i=e.guards,s=e.actions,o=e.activities,l=e.services,a=e.delays;e.state;var u=yk(e,["context","guards","actions","activities","services","delays","state"]),f=xp(function(){var d={context:r,guards:i,actions:s,activities:o,services:l,delays:a},c=n.withConfig(d,function(){return Pl(Pl({},n.context),r)});return Ay(c,u)});return gk(function(){Object.assign(f.machine.options.actions,s),Object.assign(f.machine.options.guards,i),Object.assign(f.machine.options.activities,o),Object.assign(f.machine.options.services,l),Object.assign(f.machine.options.delays,a)},[s,i,o,l,a]),f}var wk=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s};function Sk(t){return t}function Dy(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=wk(e,1),i=r[0],s=i===void 0?{}:i,o=_k(t,s),l=Ie.exports.useCallback(function(){return o.status===Fe.NotStarted?s.state?Lt.create(s.state):o.machine.initialState:o.state},[o]),a=Ie.exports.useCallback(function(d,c){if(o.status===Fe.NotStarted)return!0;var p=c.changed===void 0&&(Object.keys(c.children).length>0||typeof d.changed=="boolean");return!(c.changed||p)},[o]),u=Ie.exports.useCallback(function(d){var c=o.subscribe(d).unsubscribe;return c},[o]),f=dy.exports.useSyncExternalStoreWithSelector(u,l,l,Sk,a);return Ie.exports.useEffect(function(){var d=s.state;return o.start(d?Lt.create(d):void 0),function(){o.stop(),o.status=Fe.NotStarted}},[]),[f,o.send,o]}var J={},ad={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */t.__assign=function(){return t.__assign=Object.assign||function(o){for(var l,a=1,u=arguments.length;a<u;a++){l=arguments[a];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])}return o},t.__assign.apply(this,arguments)};function e(s,o){var l={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&o.indexOf(a)<0&&(l[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(s);u<a.length;u++)o.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(s,a[u])&&(l[a[u]]=s[a[u]]);return l}function n(s){var o=typeof Symbol=="function"&&Symbol.iterator,l=o&&s[o],a=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&a>=s.length&&(s=void 0),{value:s&&s[a++],done:!s}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function r(s,o){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var a=l.call(s),u,f=[],d;try{for(;(o===void 0||o-- >0)&&!(u=a.next()).done;)f.push(u.value)}catch(c){d={error:c}}finally{try{u&&!u.done&&(l=a.return)&&l.call(a)}finally{if(d)throw d.error}}return f}function i(s,o,l){if(l||arguments.length===2)for(var a=0,u=o.length,f;a<u;a++)(f||!(a in o))&&(f||(f=Array.prototype.slice.call(o,0,a)),f[a]=o[a]);return s.concat(f||Array.prototype.slice.call(o))}t.__read=r,t.__rest=e,t.__spreadArray=i,t.__values=n})(ad);var ud={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,function(e){e.Start="xstate.start",e.Stop="xstate.stop",e.Raise="xstate.raise",e.Send="xstate.send",e.Cancel="xstate.cancel",e.NullEvent="",e.Assign="xstate.assign",e.After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.Log="xstate.log",e.Init="xstate.init",e.Invoke="xstate.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e.Update="xstate.update",e.Pure="xstate.pure",e.Choose="xstate.choose"}(t.ActionTypes||(t.ActionTypes={})),t.SpecialTargets=void 0,function(e){e.Parent="#_parent",e.Internal="#_internal"}(t.SpecialTargets||(t.SpecialTargets={}))})(ud);var Re={};Object.defineProperty(Re,"__esModule",{value:!0});var Ue=ud,Ek=Ue.ActionTypes.Start,Ck=Ue.ActionTypes.Stop,Tk=Ue.ActionTypes.Raise,kk=Ue.ActionTypes.Send,xk=Ue.ActionTypes.Cancel,Ik=Ue.ActionTypes.NullEvent,Nk=Ue.ActionTypes.Assign,Pk=Ue.ActionTypes.After,Rk=Ue.ActionTypes.DoneState,Ok=Ue.ActionTypes.Log,Ak=Ue.ActionTypes.Init,Dk=Ue.ActionTypes.Invoke,Mk=Ue.ActionTypes.ErrorExecution,Lk=Ue.ActionTypes.ErrorPlatform,Fk=Ue.ActionTypes.ErrorCustom,bk=Ue.ActionTypes.Update,zk=Ue.ActionTypes.Choose,jk=Ue.ActionTypes.Pure;Re.after=Pk;Re.assign=Nk;Re.cancel=xk;Re.choose=zk;Re.doneState=Rk;Re.error=Fk;Re.errorExecution=Mk;Re.errorPlatform=Lk;Re.init=Ak;Re.invoke=Dk;Re.log=Ok;Re.nullEvent=Ik;Re.pure=jk;Re.raise=Tk;Re.send=kk;Re.start=Ek;Re.stop=Ck;Re.update=bk;var My={},_i={};Object.defineProperty(_i,"__esModule",{value:!0});var $k=".",Uk={},Bk="xstate.guard",Wk="";_i.DEFAULT_GUARD_TYPE=Bk;_i.EMPTY_ACTIVITY_MAP=Uk;_i.STATE_DELIMITER=$k;_i.TARGETLESS_KEY=Wk;var oa={};Object.defineProperty(oa,"__esModule",{value:!0});var Vk=!0;oa.IS_PRODUCTION=Vk;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ad,n=_i,r=oa,i;function s(y){return Object.keys(y)}function o(y,R,M){M===void 0&&(M=n.STATE_DELIMITER);var A=d(y,M),z=d(R,M);return Be(z)?Be(A)?z===A:!1:Be(A)?A in z:Object.keys(A).every(function(j){return j in z?o(A[j],z[j]):!1})}function l(y){try{return Be(y)||typeof y=="number"?"".concat(y):y.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function a(y){try{return Be(y)||typeof y=="number"?"".concat(y):pe(y)?y.name:y.type}catch{throw new Error("Actions must be strings or objects with a string action.type property.")}}function u(y,R){try{return wt(y)?y:y.toString().split(R)}catch{throw new Error("'".concat(y,"' is not a valid state path."))}}function f(y){return typeof y=="object"&&"value"in y&&"context"in y&&"event"in y&&"_event"in y}function d(y,R){if(f(y))return y.value;if(wt(y))return c(y);if(typeof y!="string")return y;var M=u(y,R);return c(M)}function c(y){if(y.length===1)return y[0];for(var R={},M=R,A=0;A<y.length-1;A++)A===y.length-2?M[y[A]]=y[A+1]:(M[y[A]]={},M=M[y[A]]);return R}function p(y,R){for(var M={},A=Object.keys(y),z=0;z<A.length;z++){var j=A[z];M[j]=R(y[j],j,y,z)}return M}function m(y,R,M){var A,z,j={};try{for(var Q=e.__values(Object.keys(y)),V=Q.next();!V.done;V=Q.next()){var le=V.value,Se=y[le];!M(Se)||(j[le]=R(Se,le,y))}}catch(Gt){A={error:Gt}}finally{try{V&&!V.done&&(z=Q.return)&&z.call(Q)}finally{if(A)throw A.error}}return j}var _=function(y){return function(R){var M,A,z=R;try{for(var j=e.__values(y),Q=j.next();!Q.done;Q=j.next()){var V=Q.value;z=z[V]}}catch(le){M={error:le}}finally{try{Q&&!Q.done&&(A=j.return)&&A.call(j)}finally{if(M)throw M.error}}return z}};function S(y,R){return function(M){var A,z,j=M;try{for(var Q=e.__values(y),V=Q.next();!V.done;V=Q.next()){var le=V.value;j=j[R][le]}}catch(Se){A={error:Se}}finally{try{V&&!V.done&&(z=Q.return)&&z.call(Q)}finally{if(A)throw A.error}}return j}}function v(y){if(!y)return[[]];if(Be(y))return[[y]];var R=g(Object.keys(y).map(function(M){var A=y[M];return typeof A!="string"&&(!A||!Object.keys(A).length)?[[M]]:v(y[M]).map(function(z){return[M].concat(z)})}));return R}function h(y){var R,M,A={};if(y&&y.length===1&&y[0].length===1)return y[0][0];try{for(var z=e.__values(y),j=z.next();!j.done;j=z.next())for(var Q=j.value,V=A,le=0;le<Q.length;le++){var Se=Q[le];if(le===Q.length-2){V[Se]=Q[le+1];break}V[Se]=V[Se]||{},V=V[Se]}}catch(Gt){R={error:Gt}}finally{try{j&&!j.done&&(M=z.return)&&M.call(z)}finally{if(R)throw R.error}}return A}function g(y){var R;return(R=[]).concat.apply(R,e.__spreadArray([],e.__read(y),!1))}function w(y){return wt(y)?y:[y]}function T(y){return y===void 0?[]:w(y)}function I(y,R,M){var A,z;if(pe(y))return y(R,M.data);var j={};try{for(var Q=e.__values(Object.keys(y)),V=Q.next();!V.done;V=Q.next()){var le=V.value,Se=y[le];pe(Se)?j[le]=Se(R,M.data):j[le]=Se}}catch(Gt){A={error:Gt}}finally{try{V&&!V.done&&(z=Q.return)&&z.call(Q)}finally{if(A)throw A.error}}return j}function C(y){return/^(done|error)\./.test(y)}function E(y){return!!(y instanceof Promise||y!==null&&(pe(y)||typeof y=="object")&&pe(y.then))}function L(y){return y!==null&&typeof y=="object"&&"transition"in y&&typeof y.transition=="function"}function D(y,R){var M,A,z=e.__read([[],[]],2),j=z[0],Q=z[1];try{for(var V=e.__values(y),le=V.next();!le.done;le=V.next()){var Se=le.value;R(Se)?j.push(Se):Q.push(Se)}}catch(Gt){M={error:Gt}}finally{try{le&&!le.done&&(A=V.return)&&A.call(V)}finally{if(M)throw M.error}}return[j,Q]}function U(y,R){return p(y.states,function(M,A){if(!!M){var z=(Be(R)?void 0:R[A])||(M?M.current:void 0);if(!!z)return{current:z,states:U(M,z)}}})}function oe(y,R){return{current:R,states:U(y,R)}}function Ke(y,R,M,A){r.IS_PRODUCTION||t.warn(!!y,"Attempting to update undefined context");var z=y&&M.reduce(function(j,Q){var V,le,Se=Q.assignment,Gt={state:A,action:Q,_event:R},ua={};if(pe(Se))ua=Se(j,R.data,Gt);else try{for(var Ys=e.__values(Object.keys(Se)),Ei=Ys.next();!Ei.done;Ei=Ys.next()){var hd=Ei.value,ca=Se[hd];ua[hd]=pe(ca)?ca(j,R.data,Gt):ca}}catch(Gy){V={error:Gy}}finally{try{Ei&&!Ei.done&&(le=Ys.return)&&le.call(Ys)}finally{if(V)throw V.error}}return Object.assign({},j,ua)},y);return z}t.warn=function(){},r.IS_PRODUCTION||(t.warn=function(y,R){var M=y instanceof Error?y:void 0;if(!(!M&&y)&&console!==void 0){var A=["Warning: ".concat(R)];M&&A.push(M),console.warn.apply(console,A)}});function wt(y){return Array.isArray(y)}function pe(y){return typeof y=="function"}function Be(y){return typeof y=="string"}function Wn(y,R){if(!!y)return Be(y)?{type:n.DEFAULT_GUARD_TYPE,name:y,predicate:R?R[y]:void 0}:pe(y)?{type:n.DEFAULT_GUARD_TYPE,name:y.name,predicate:y}:y}function N(y){try{return"subscribe"in y&&pe(y.subscribe)}catch{return!1}}var F=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),$=(i={},i[F]=function(){return this},i[Symbol.observable]=function(){return this},i);function ve(y){return!!y&&"__xstatenode"in y}function Ne(y){return!!y&&typeof y.send=="function"}var mr=function(){var y=0;return function(){return y++,y.toString(16)}}();function Ht(y,R){return Be(y)||typeof y=="number"?e.__assign({type:y},R):y}function Si(y,R){if(!Be(y)&&"$$type"in y&&y.$$type==="scxml")return y;var M=Ht(y);return e.__assign({name:M.type,data:M,$$type:"scxml",type:"external"},R)}function tn(y,R){var M=w(R).map(function(A){return typeof A=="undefined"||typeof A=="string"||ve(A)?{target:A,event:y}:e.__assign(e.__assign({},A),{event:y})});return M}function gr(y){if(!(y===void 0||y===n.TARGETLESS_KEY))return T(y)}function Uy(y,R,M){if(!r.IS_PRODUCTION){var A=y.stack?" Stacktrace was '".concat(y.stack,"'"):"";if(y===R)console.error("Missing onError handler for invocation '".concat(M,"', error was '").concat(y,"'.").concat(A));else{var z=R.stack?" Stacktrace was '".concat(R.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(M,"'. ")+"Original error: '".concat(y,"'. ").concat(A," Current error is '").concat(R,"'.").concat(z))}}}function By(y,R,M,A,z){var j=y.options.guards,Q={state:z,cond:R,_event:A};if(R.type===n.DEFAULT_GUARD_TYPE)return((j==null?void 0:j[R.name])||R.predicate)(M,A.data,Q);var V=j==null?void 0:j[R.type];if(!V)throw new Error("Guard '".concat(R.type,"' is not implemented on machine '").concat(y.id,"'."));return V(M,A.data,Q)}function Wy(y){return typeof y=="string"?{type:y}:y}function Vy(y,R,M){if(typeof y=="object")return y;var A=function(){};return{next:y,error:R||A,complete:M||A}}function Hy(y,R){return"".concat(y,":invocation[").concat(R,"]")}t.createInvokeId=Hy,t.evaluateGuard=By,t.flatten=g,t.getActionType=a,t.getEventType=l,t.interopSymbols=$,t.isActor=Ne,t.isArray=wt,t.isBehavior=L,t.isBuiltInEvent=C,t.isFunction=pe,t.isMachine=ve,t.isObservable=N,t.isPromiseLike=E,t.isStateLike=f,t.isString=Be,t.keys=s,t.mapContext=I,t.mapFilterValues=m,t.mapValues=p,t.matchesState=o,t.nestedPath=S,t.normalizeTarget=gr,t.partition=D,t.path=_,t.pathToStateValue=c,t.pathsToStateValue=h,t.reportUnhandledExceptionOnInvocation=Uy,t.symbolObservable=F,t.toArray=T,t.toArrayStrict=w,t.toEventObject=Ht,t.toGuard=Wn,t.toInvokeSource=Wy,t.toObserver=Vy,t.toSCXMLEvent=Si,t.toStatePath=u,t.toStatePaths=v,t.toStateValue=d,t.toTransitionConfigArray=tn,t.uniqueId=mr,t.updateContext=Ke,t.updateHistoryStates=U,t.updateHistoryValue=oe})(My);Object.defineProperty(J,"__esModule",{value:!0});var ne=ad,Pt=ud,$e=Re,K=My,Hk=oa,Gk=K.toSCXMLEvent({type:$e.init});function mc(t,e){return e&&e[t]||void 0}function la(t,e){var n;if(K.isString(t)||typeof t=="number"){var r=mc(t,e);K.isFunction(r)?n={type:t,exec:r}:r?n=r:n={type:t,exec:void 0}}else if(K.isFunction(t))n={type:t.name||t.toString(),exec:t};else{var r=mc(t.type,e);if(K.isFunction(r))n=ne.__assign(ne.__assign({},t),{exec:r});else if(r){var i=r.type||t.type;n=ne.__assign(ne.__assign(ne.__assign({},r),t),{type:i})}else n=t}return n}var gc=function(t,e){if(!t)return[];var n=K.isArray(t)?t:[t];return n.map(function(r){return la(r,e)})};function cd(t){var e=la(t);return ne.__assign(ne.__assign({id:K.isString(t)?t:e.id},e),{type:e.type})}function Qk(t){return K.isString(t)?{type:$e.raise,event:t}:wi(t,{to:Pt.SpecialTargets.Internal})}function Ly(t){return{type:$e.raise,_event:K.toSCXMLEvent(t.event)}}function wi(t,e){return{to:e?e.to:void 0,type:$e.send,event:K.isFunction(t)?t:K.toEventObject(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:K.isFunction(t)?t.name:K.getEventType(t)}}function Fy(t,e,n,r){var i={_event:n},s=K.toSCXMLEvent(K.isFunction(t.event)?t.event(e,n.data,i):t.event),o;if(K.isString(t.delay)){var l=r&&r[t.delay];o=K.isFunction(l)?l(e,n.data,i):l}else o=K.isFunction(t.delay)?t.delay(e,n.data,i):t.delay;var a=K.isFunction(t.to)?t.to(e,n.data,i):t.to;return ne.__assign(ne.__assign({},t),{to:a,_event:s,event:s.data,delay:o})}function fd(t,e){return wi(t,ne.__assign(ne.__assign({},e),{to:Pt.SpecialTargets.Parent}))}function Yk(t,e,n){return wi(e,ne.__assign(ne.__assign({},n),{to:t}))}function Kk(){return fd($e.update)}function qk(t,e){return wi(t,ne.__assign(ne.__assign({},e),{to:function(n,r,i){var s=i._event;return s.origin}}))}var Xk=function(t,e){return{context:t,event:e}};function Jk(t,e){return t===void 0&&(t=Xk),{type:$e.log,label:e,expr:t}}var by=function(t,e,n){return ne.__assign(ne.__assign({},t),{value:K.isString(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},Zk=function(t){return{type:$e.cancel,sendId:t}};function ex(t){var e=cd(t);return{type:Pt.ActionTypes.Start,activity:e,exec:void 0}}function tx(t){var e=K.isFunction(t)?t:cd(t);return{type:Pt.ActionTypes.Stop,activity:e,exec:void 0}}function zy(t,e,n){var r=K.isFunction(t.activity)?t.activity(e,n.data):t.activity,i=typeof r=="string"?{id:r}:r,s={type:Pt.ActionTypes.Stop,activity:i};return s}var nx=function(t){return{type:$e.assign,assignment:t}};function rx(t){return typeof t=="object"&&"type"in t}function ix(t,e){var n=e?"#".concat(e):"";return"".concat(Pt.ActionTypes.After,"(").concat(t,")").concat(n)}function sx(t,e){var n="".concat(Pt.ActionTypes.DoneState,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function ox(t,e){var n="".concat(Pt.ActionTypes.DoneInvoke,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function lx(t,e){var n="".concat(Pt.ActionTypes.ErrorPlatform,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function ax(t){return{type:Pt.ActionTypes.Pure,get:t}}function ux(t,e){return wi(function(n,r){return r},ne.__assign(ne.__assign({},e),{to:t}))}function cx(t,e){return fd(function(n,r,i){return{type:$e.error,data:K.isFunction(t)?t(n,r,i):t}},ne.__assign(ne.__assign({},e),{to:Pt.SpecialTargets.Parent}))}function fx(t){return{type:Pt.ActionTypes.Choose,conds:t}}function yc(t,e,n,r,i,s){s===void 0&&(s=!1);var o=ne.__read(s?[[],i]:K.partition(i,function(c){return c.type===$e.assign}),2),l=o[0],a=o[1],u=l.length?K.updateContext(n,r,l,e):n,f=s?[n]:void 0,d=K.flatten(a.map(function(c){var p;switch(c.type){case $e.raise:return Ly(c);case $e.send:var m=Fy(c,u,r,t.options.delays);return Hk.IS_PRODUCTION||K.warn(!K.isString(c.delay)||typeof m.delay=="number","No delay reference for delay expression '".concat(c.delay,"' was found on machine '").concat(t.id,"'")),m;case $e.log:return by(c,u,r);case $e.choose:{var _=c,S=(p=_.conds.find(function(D){var U=K.toGuard(D.cond,t.options.guards);return!U||K.evaluateGuard(t,U,u,r,e)}))===null||p===void 0?void 0:p.actions;if(!S)return[];var v=ne.__read(yc(t,e,u,r,gc(K.toArray(S),t.options.actions),s),2),h=v[0],g=v[1];return u=g,f==null||f.push(u),h}case $e.pure:{var S=c.get(u,r.data);if(!S)return[];var w=ne.__read(yc(t,e,u,r,gc(K.toArray(S),t.options.actions),s),2),T=w[0],I=w[1];return u=I,f==null||f.push(u),T}case $e.stop:return zy(c,u,r);case $e.assign:{u=K.updateContext(u,r,[c],e),f==null||f.push(u);break}default:var C=la(c,t.options.actions),E=C.exec;if(E&&f){var L=f.length-1;C=ne.__assign(ne.__assign({},C),{exec:function(D){for(var U=[],oe=1;oe<arguments.length;oe++)U[oe-1]=arguments[oe];E.apply(void 0,ne.__spreadArray([f[L]],ne.__read(U),!1))}})}return C}}).filter(function(c){return!!c}));return[d,u]}J.actionTypes=$e;J.after=ix;var Yt=J.assign=nx;J.cancel=Zk;J.choose=fx;J.done=sx;J.doneInvoke=ox;J.error=lx;J.escalate=cx;J.forwardTo=ux;J.getActionFunction=mc;J.initEvent=Gk;J.isActionObject=rx;J.log=Jk;J.pure=ax;J.raise=Qk;J.resolveActions=yc;J.resolveLog=by;J.resolveRaise=Ly;J.resolveSend=Fy;J.resolveStop=zy;J.respond=qk;J.send=wi;J.sendParent=fd;J.sendTo=Yk;J.sendUpdate=Kk;J.start=ex;J.stop=tx;J.toActionObject=la;J.toActionObjects=gc;J.toActivityDefinition=cd;const jy=mk({context:{activity:{id:"",state:"idle",startOfTomorrow:Ao(),user:{id:"",username:""},task:{id:"",name:"",duration:0}},elapsed:0,duration:5,interval:.1},id:"userTask",initial:"idle",states:{idle:{invoke:{src:{type:"onStateChange",state:"idle"}},on:{INIT:{actions:Yt({activity:(t,e)=>e.value}),target:"initialized"},ASK:{actions:Yt({activity:(t,e)=>e.value}),target:"asking"},ACCEPT:{actions:Yt({activity:(t,e)=>e.value}),target:"running"}}},initialized:{invoke:{src:{type:"onStateChange",state:"initialized"}},on:{ASK:{target:"asking"},ACCEPT:{target:"running",actions:Yt({activity:(t,e)=>e.value})}}},asking:{invoke:{src:{type:"onStateChange",state:"asking"}},on:{ACCEPT:{target:"running"}}},newday:{invoke:{src:{type:"onStateChange",state:"newday"}},on:{START:{actions:"START_ACTIVITY",target:"running"}}},running:{invoke:[{src:"clock"},{src:{type:"onStateChange",state:"running"}}],always:[{cond:t=>t.elapsed>=t.duration,target:"paused"}],on:{TICK:[{actions:["incrementElapsed"],target:"idle",cond:t=>Date.now()<t.activity.startOfTomorrow},{actions:["incrementElapsed"],target:"newday",cond:t=>Date.now()>t.activity.startOfTomorrow}]}},paused:{invoke:{src:{type:"onStateChange",state:"paused"}},always:[{cond:t=>t.elapsed<t.duration,target:"running"},{cond:t=>Date.now()>t.activity.startOfTomorrow,target:"newday"}]}},on:{UPDATE_DURATION:{actions:Yt({duration:(t,e)=>e.value.task.duration})},INCREASE_DURATION:{actions:Yt({duration:(t,e)=>t.duration+e.value.task.duration})},RESET_ELAPSED:{actions:Yt({elapsed:(t,e)=>0})},UPDATE_ACTIVITY:{actions:Yt({activity:(t,e)=>e.value})},START_ACTIVITY:{actions:Yt({activity:(t,e)=>Ot(Rt({},t.activity),{startOfTomorrow:Ao()})})}}},{actions:{incrementElapsed:Yt({elapsed:t=>+(t.elapsed+t.interval).toFixed(2)})},services:{clock:t=>e=>{const n=setInterval(()=>{e("TICK")},1e3*t.interval);return()=>{clearInterval(n)}},onStateChange:(t,e,{src:n})=>(r,i)=>{console.log("onStateChange:",t,e,n);const s=Ot(Rt({},t.activity),{state:n.state});if(s.id&&(r({type:"UPDATE_ACTIVITY",value:s}),oc(s,n.state),n.state==="newday")){const o=Ao(),l=Ot(Rt({},t.activity),{startOfTomorrow:o});r({type:"START_ACTIVITY",value:l}),oc(s,n.state)}}}});function dx(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function hx(t){ed(1,arguments);var e=dx(t);return cy(e*1e3)}var dd={exports:{}},aa={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px=Ie.exports,vx=Symbol.for("react.element"),mx=Symbol.for("react.fragment"),gx=Object.prototype.hasOwnProperty,yx=px.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_x={key:!0,ref:!0,__self:!0,__source:!0};function $y(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)gx.call(e,r)&&!_x.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:vx,type:t,key:s,ref:o,props:i,_owner:yx.current}}aa.Fragment=mx;aa.jsx=$y;aa.jsxs=$y;dd.exports=aa;const Ve=dd.exports.jsx,pt=dd.exports.jsxs,wx=t=>!1,Sx=t=>{const[e,n]=Dy(jy);if(e.context,!wx(t.user))return null},Ex=t=>{const[e,n]=Dy(jy),{elapsed:r,duration:i}=e.context,s=t.state!==e.value,o=t.state==="asking",{user:l,task:a}=t,u=()=>{n("ASK",{value:Ot(Rt({},t),{state:"asking"})})};return Ie.exports.useEffect(()=>{if(t)if(console.log("onLoad:",e.value,t),s)switch(t.state){case"initialized":n("INIT",{value:Ot(Rt({},t),{state:"initialized"})});break;case"asking":n("ASK",{value:Ot(Rt({},t),{state:"asking"})});break;case"running":n("ACCEPT",{value:Ot(Rt({},t),{state:"running"})});break}else n("INIT",{value:Ot(Rt({},t),{state:"initialized"})})},[]),{user:l,task:a,machineState:e,elapsed:r,duration:i,isActivityAskedDb:o,askForStarting:u}},Cx=({activity:t})=>{const{user:e,task:n,machineState:r,elapsed:i,duration:s,isActivityAskedDb:o,askForStarting:l}=Ex(t),a=hx(t.startOfTomorrow/1e3);return pt("section",{children:[Ve("label",{style:{textAlign:"center",fontSize:32},children:e.username||"unkown"}),pt("span",{style:{textAlign:"center",fontSize:28},children:[n.name||"unkown task name",pt("span",{children:[" ",n.duration.toFixed(1)]})]}),pt("label",{children:[pt("div",{children:["state: ",Ve("span",{style:{color:"gray"},children:String(r.value).toUpperCase()})]}),pt("div",{children:["   startOfTomorrow: ",Ve("span",{style:{color:"gray"},children:a.toLocaleString("fr-fr",{formatMatcher:"best fit"})})]}),pt("div",{children:["activity state: ",Ve("span",{style:{color:"gray"},children:String(r.context.activity.state).toUpperCase()})]}),pt("div",{children:["db state: ",Ve("span",{style:{color:"gray"},children:String(t.state).toUpperCase()})]}),pt("output",{children:[i.toFixed(1),"s / ",s.toFixed(1),"s"]}),Ve("progress",{max:s,value:i})]}),Ve("button",{disabled:o,onClick:l,children:"Ask for START"}),Ve(Sx,{user:e})]})},Tx=(t,e)=>{const[n,r]=Ie.exports.useState();return Ie.exports.useEffect(()=>{t&&e&&(fy(t,e),r(()=>t))},[]),n},Hi=(t,e,n)=>{Ie.exports.useEffect(()=>{t&&n&&e&&(fy(t,e),lT(t,n))},[])},kx=t=>{Hi(t,void 0),Hi({id:"noa",username:"noa"},{id:"beauvois",name:"beauvois"},{id:"gaming",name:"gaming",duration:5}),Hi({id:"leo",username:"leo"},{id:"beauvois",name:"beauvois"},{id:"gaming",name:"gaming",duration:5}),Hi({id:"teo",username:"teo"},{id:"notmyfamily",name:"notmyfamily"},{id:"gaming",name:"gaming",duration:5})},xx=(t,e)=>{const[n,r]=Ie.exports.useState();return Ie.exports.useEffect(()=>{let i;if(t)return i=ic(Yr(er,e),s=>{r(s.val()),console.log(e,s.val())}),i()},[t]),n},Ix=(t,e)=>{const[n,r]=Ie.exports.useState(),[i,s]=Ie.exports.useState();return Ie.exports.useEffect(()=>{t&&t.isAdmin&&ic(Yr(er,"activities"),o=>{if(!e)return null;G1(Yr(er,`family-users/${e.id}`)).then(l=>{const a={};l.forEach(u=>{o.forEach(f=>{const d=f.key,c=u.key;d&&d===c&&(a[d]=o.val()[d])})}),console.log("familyActivities:",a),s(a)})}),t&&!t.isAdmin&&ic(Yr(er,`activities/${t.id}`),o=>{r(o.val()),console.log("activities:",o.val())})},[t,e]),{activities:n,allActivities:i}},Nx=({me:t,family:e,allActivities:n})=>pt("div",{children:[Ve("div",{children:`me: ${t.id} family: ${e.id} isAdmin:${t.isAdmin?"true":"false"}`}),Object.entries(n).map(([r,i])=>{Object.entries(i).length;const s=Object.entries(i)[0][0],o=Object.entries(i)[0][1];return pt("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-around"},children:[Ve("div",{children:`state: ${String(o.state).toUpperCase()}`}),pt("p",{children:[`userId: ${r} activity: ${s} status: ${o.state}`," "]}),Ve("button",{disabled:o.state!=="asking",onClick:()=>oc(o,"running"),children:"Accept to START"})]},r)})]}),Px=({me:t,family:e,activities:n})=>pt("div",{children:[Ve("div",{children:`me: ${t.id} family: ${e.id}`}),Object.entries(n).map(([r,i])=>Ve(Cx,{activity:i},t.id))]}),Rx=()=>{const t=Tx({id:"noa",username:"noa"},{id:"beauvois",name:"beauvois"});Hi(t,void 0),kx(t);const e=xx(t,`user-family/${t?t.id:""}`),{activities:n,allActivities:r}=Ix(t,e);return!t||!e?null:t.isAdmin?r?Ve(Nx,{me:t,family:e,allActivities:r}):null:n?Ve(Px,{me:t,family:e,activities:n}):null},Ox=document.getElementById("app"),Ax=Fm(Ox);Ax.render(Ve(p_.StrictMode,{children:Ve(Rx,{})}));
